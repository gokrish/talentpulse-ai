File: ./package.json
Content:
{
  "name": "talentplus",
  "version": "1.0.0",
  "private": true,
  "scripts": {
    "dev": "next dev -p 3000",
    "build": "next build",
    "start": "next start",
    "lint": "next lint",
    "build:clean": "rm -rf .next && next build",
    "type-check": "tsc --noEmit"
  },
  "dependencies": {
    "@anthropic-ai/sdk": "^0.68.0",
    "@supabase/auth-helpers-nextjs": "^0.10.0",
    "@supabase/supabase-js": "^2.77.0",
    "axios": "^1.6.0",
    "date-fns": "^2.30.0",
    "formidable": "^3.5.1",
    "lucide-react": "^0.546.0",
    "mammoth": "^1.11.0",
    "next": "14.0.0",
    "openai": "^4.104.0",
    "pdf-parse": "^1.1.3",
    "react": "18.2.0",
    "react-dom": "18.2.0"
  },
  "devDependencies": {
    "@types/formidable": "^3.4.5",
    "@types/node": "20.4.2",
    "@types/pdf-parse": "^1.1.5",
    "@types/react": "18.2.21",
    "autoprefixer": "^10.4.16",
    "postcss": "^8.4.32",
    "tailwindcss": "^3.4.0",
    "typescript": "5.1.6"
  }
}
-----------------------------

File: ./next-env.d.ts
Content:
/// <reference types="next" />
/// <reference types="next/image-types/global" />

// NOTE: This file should not be edited
// see https://nextjs.org/docs/basic-features/typescript for more information.

-----------------------------

File: ./next.config.js
Content:
/** @type {import('next').NextConfig} */
const nextConfig = {
  reactStrictMode: true,
  swcMinify: true,
  experimental: {
    webpackBuildWorker: true, // Enable webpack worker
    serverComponentsExternalPackages: ['pdf-parse', 'mammoth'],
  },
  typescript: {
    ignoreBuildErrors: false,
  },
  eslint: {
    ignoreDuringBuilds: false,
  },
  env: {
    CUSTOM_KEY: process.env.CUSTOM_KEY || '',
  },
  webpack: (config, { isServer }) => {
    if (!isServer) {
      config.resolve.fallback = {
        ...config.resolve.fallback,
        fs: false,
      };
    }
    return config;
  },
};

module.exports = nextConfig;
-----------------------------

File: ./postcss.config.js
Content:
module.exports = {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
}
-----------------------------

File: ./tailwind.config.js
Content:
/** @type {import('tailwindcss').Config} */
module.exports = {
  content: [
    './src/pages/**/*.{js,ts,jsx,tsx,mdx}',
    './src/components/**/*.{js,ts,jsx,tsx,mdx}',
    './src/app/**/*.{js,ts,jsx,tsx,mdx}',
  ],
  theme: {
    extend: {
      colors: {
        primary: {
          50: '#f0f9ff',
          100: '#e0f2fe',
          200: '#bae6fd',
          300: '#7dd3fc',
          400: '#38bdf8',
          500: '#0ea5e9',
          600: '#0284c7',
          700: '#0369a1',
          800: '#075985',
          900: '#0c4a6e',
        },
      },
    },
  },
  plugins: [],
}
-----------------------------

File: ./tsconfig.json
Content:
{
  "compilerOptions": {
    "target": "es2020",
    "lib": ["dom", "dom.iterable", "es2020"],
    "paths": {
      "@/*": ["./src/*"]
    },
    "allowJs": true,
    "skipLibCheck": true,
    "strict": true,
    "forceConsistentCasingInFileNames": true,
    "noEmit": true,
    "esModuleInterop": true,
    "module": "esnext",
    "moduleResolution": "node",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "jsx": "preserve",
    "baseUrl": ".",
    "incremental": true,
    "plugins": [
      {
        "name": "next"
      }
    ],
    "strictNullChecks": true
  },
  "include": [
    "src",
    "next-env.d.ts",
    ".next/types/**/*.ts"
  ],
  "exclude": ["node_modules"]
}
-----------------------------

File: ./middleware.js
Content:
// middleware.js
export { default } from './src/middleware/rate-limiter';
export const config = {
  matcher: ['/api/:path*', '/dashboard/:path*', '/library/:path*', '/match/:path*'],
};
-----------------------------

File: src/app/candidate/[id]/authenticity/page.tsx
Content:
// src/app/candidate/[id]/authenticity/page.tsx - NEW FILE

'use client';
import { useEffect, useState } from 'react';
import { Shield, AlertTriangle, CheckCircle } from 'lucide-react';

export default function AuthenticityPage({ params }: { params: { id: string } }) {
  const [report, setReport] = useState<any>(null);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    async function loadReport() {
      const res = await fetch(`/api/candidates/${params.id}/authenticity`);
      const data = await res.json();
      setReport(data.report);
      setLoading(false);
    }
    loadReport();
  }, [params.id]);

  if (loading) return <div>Loading...</div>;

  return (
    <div className="min-h-screen bg-gray-50 p-8">
      <div className="max-w-4xl mx-auto">
        
        {/* Header */}
        <div className="bg-white rounded-xl p-6 mb-6 shadow-lg">
          <div className="flex items-center justify-between">
            <div>
              <h1 className="text-3xl font-bold mb-2">Authenticity Report</h1>
              <p className="text-gray-600">AI-powered verification analysis</p>
            </div>
            <div className="text-right">
              <div className={`text-5xl font-bold mb-2 ${
                report.overallScore >= 75 ? 'text-green-600' :
                report.overallScore >= 50 ? 'text-yellow-600' :
                'text-red-600'
              }`}>
                {report.overallScore}%
              </div>
              <span className={`px-4 py-2 rounded-full text-sm font-bold ${
                report.riskLevel === 'LOW' ? 'bg-green-100 text-green-800' :
                report.riskLevel === 'MEDIUM' ? 'bg-yellow-100 text-yellow-800' :
                'bg-red-100 text-red-800'
              }`}>
                {report.riskLevel} RISK
              </span>
            </div>
          </div>
        </div>

        {/* Red Flags */}
        {report.redFlags.length > 0 && (
          <div className="bg-white rounded-xl p-6 mb-6 shadow-lg">
            <h2 className="text-xl font-bold mb-4 flex items-center gap-2">
              <AlertTriangle className="w-6 h-6 text-red-600" />
              Issues Detected ({report.redFlags.length})
            </h2>
            <div className="space-y-3">
              {report.redFlags.map((flag: any, i: number) => (
                <div key={i} className={`p-4 rounded-lg border-l-4 ${
                  flag.severity === 'high' ? 'bg-red-50 border-red-500' :
                  flag.severity === 'medium' ? 'bg-yellow-50 border-yellow-500' :
                  'bg-gray-50 border-gray-300'
                }`}>
                  <div className="flex items-start gap-3">
                    <span className={`px-2 py-1 rounded text-xs font-bold ${
                      flag.severity === 'high' ? 'bg-red-200 text-red-900' :
                      flag.severity === 'medium' ? 'bg-yellow-200 text-yellow-900' :
                      'bg-gray-200 text-gray-900'
                    }`}>
                      {flag.severity.toUpperCase()}
                    </span>
                    <div className="flex-1">
                      <h3 className="font-bold mb-1">{flag.flag}</h3>
                      <p className="text-sm text-gray-700">{flag.explanation}</p>
                    </div>
                  </div>
                </div>
              ))}
            </div>
          </div>
        )}

        {/* Green Flags */}
        {report.greenFlags.length > 0 && (
          <div className="bg-white rounded-xl p-6 mb-6 shadow-lg">
            <h2 className="text-xl font-bold mb-4 flex items-center gap-2">
              <CheckCircle className="w-6 h-6 text-green-600" />
              Positive Indicators ({report.greenFlags.length})
            </h2>
            <div className="space-y-2">
              {report.greenFlags.map((flag: string, i: number) => (
                <div key={i} className="flex items-center gap-2 text-green-700">
                  <CheckCircle className="w-4 h-4" />
                  <span>{flag}</span>
                </div>
              ))}
            </div>
          </div>
        )}

        {/* Recommendations */}
        <div className="bg-white rounded-xl p-6 mb-6 shadow-lg">
          <h2 className="text-xl font-bold mb-4">Recommended Actions</h2>
          <div className="space-y-3">
            {report.recommendations.map((rec: any, i: number) => (
              <div key={i} className={`p-4 rounded-lg ${
                rec.priority === 'high' ? 'bg-red-50 border border-red-200' :
                rec.priority === 'medium' ? 'bg-yellow-50 border border-yellow-200' :
                'bg-blue-50 border border-blue-200'
              }`}>
                <div className="flex items-start gap-3">
                  <span className={`px-2 py-1 rounded text-xs font-bold ${
                    rec.priority === 'high' ? 'bg-red-200 text-red-900' :
                    rec.priority === 'medium' ? 'bg-yellow-200 text-yellow-900' :
                    'bg-blue-200 text-blue-900'
                  }`}>
                    {rec.priority.toUpperCase()}
                  </span>
                  <p className="flex-1 font-medium">{rec.action}</p>
                </div>
              </div>
            ))}
          </div>
        </div>

        {/* Verification Questions */}
        <div className="bg-white rounded-xl p-6 shadow-lg">
          <h2 className="text-xl font-bold mb-4">Interview Questions to Verify Authenticity</h2>
          <p className="text-gray-600 mb-4">
            Ask these questions during the interview to validate the candidate's experience:
          </p>
          <div className="space-y-3">
            {report.verificationQuestions.map((q: string, i: number) => (
              <div key={i} className="p-3 bg-gray-50 rounded-lg">
                <span className="font-bold text-blue-600">Q{i + 1}:</span> {q}
              </div>
            ))}
          </div>
        </div>

      </div>
    </div>
  );
}
-----------------------------

File: src/app/candidate/[id]/page.tsx
Content:
// src/app/candidate/[id]/page.tsx - COMPLETE CANDIDATE DETAIL VIEW
'use client';

import { useEffect, useState } from 'react';
import { useRouter } from 'next/navigation';
import { 
  ArrowLeft, Mail, Phone, MapPin, Briefcase, GraduationCap, 
  Award, Languages, Download, Edit2, Trash2, Star, Shield,
  Calendar, Building, TrendingUp, FileText, Link as LinkIcon
} from 'lucide-react';
import { Candidate } from '@/lib/types';

export default function CandidateDetailPage({ params }: { params: { id: string } }) {
  const router = useRouter();
  const [candidate, setCandidate] = useState<Candidate | null>(null);
  const [loading, setLoading] = useState(true);
  const [editing, setEditing] = useState(false);

  useEffect(() => {
    loadCandidate();
  }, [params.id]);

  async function loadCandidate() {
    try {
      const res = await fetch(`/api/candidates/${params.id}`);
      const data = await res.json();
      if (data.success) {
        setCandidate(data.data);
      }
    } catch (error) {
      console.error('Failed to load candidate:', error);
    } finally {
      setLoading(false);
    }
  }

  async function handleDelete() {
    if (!confirm('Are you sure you want to delete this candidate?')) return;
    
    try {
      const res = await fetch(`/api/candidates/${params.id}`, {
        method: 'DELETE'
      });
      
      if (res.ok) {
        router.push('/library');
      }
    } catch (error) {
      alert('Failed to delete candidate');
    }
  }

  async function downloadResume() {
    if (!candidate) return;
    
    // Create a text file with resume content
    const content = candidate.raw_text || 'No resume text available';
    const blob = new Blob([content], { type: 'text/plain' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `${candidate.name.replace(/\s+/g, '_')}_resume.txt`;
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
  }

  if (loading) {
    return (
      <div className="min-h-screen flex items-center justify-center">
        <div className="text-center">
          <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"></div>
          <p className="text-gray-600">Loading candidate...</p>
        </div>
      </div>
    );
  }

  if (!candidate) {
    return (
      <div className="min-h-screen flex items-center justify-center">
        <div className="text-center">
          <h2 className="text-2xl font-bold text-gray-900 mb-2">Candidate Not Found</h2>
          <button
            onClick={() => router.push('/library')}
            className="text-blue-600 hover:underline"
          >
            ← Back to Library
          </button>
        </div>
      </div>
    );
  }

  return (
    <div className="min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 p-4 md:p-8">
      <div className="max-w-6xl mx-auto">
        {/* Header */}
        <div className="mb-6 flex items-center justify-between">
          <button
            onClick={() => router.push('/library')}
            className="flex items-center text-gray-600 hover:text-gray-900"
          >
            <ArrowLeft className="w-5 h-5 mr-2" />
            Back to Library
          </button>
          
          <div className="flex gap-2">
            <button
              onClick={downloadResume}
              className="px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-2"
            >
              <Download className="w-4 h-4" />
              Download
            </button>
            <button
              onClick={() => setEditing(!editing)}
              className="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2"
            >
              <Edit2 className="w-4 h-4" />
              Edit
            </button>
            <button
              onClick={handleDelete}
              className="px-4 py-2 border border-red-300 text-red-600 rounded-lg hover:bg-red-50 flex items-center gap-2"
            >
              <Trash2 className="w-4 h-4" />
              Delete
            </button>
          </div>
        </div>

        {/* Main Profile Card */}
        <div className="bg-white rounded-2xl shadow-lg border p-8 mb-6">
          <div className="flex flex-col md:flex-row md:items-start gap-6">
            {/* Avatar */}
            <div className="w-24 h-24 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center flex-shrink-0">
              <span className="text-4xl font-bold text-white">
                {candidate.name.split(' ').map(n => n[0]).join('').substring(0, 2)}
              </span>
            </div>

            {/* Basic Info */}
            <div className="flex-1">
              <h1 className="text-3xl font-bold text-gray-900 mb-2">{candidate.name}</h1>
              <p className="text-xl text-gray-600 mb-4">{candidate.title || 'No title specified'}</p>
              
              <div className="grid grid-cols-1 md:grid-cols-2 gap-3 mb-4">
                {candidate.email && (
                  <div className="flex items-center text-gray-700">
                    <Mail className="w-4 h-4 mr-2 text-gray-400" />
                    <a href={`mailto:${candidate.email}`} className="hover:text-blue-600">
                      {candidate.email}
                    </a>
                  </div>
                )}
                {candidate.phone && (
                  <div className="flex items-center text-gray-700">
                    <Phone className="w-4 h-4 mr-2 text-gray-400" />
                    <a href={`tel:${candidate.phone}`} className="hover:text-blue-600">
                      {candidate.phone}
                    </a>
                  </div>
                )}
                {candidate.location && (
                  <div className="flex items-center text-gray-700">
                    <MapPin className="w-4 h-4 mr-2 text-gray-400" />
                    {candidate.location}
                  </div>
                )}
                <div className="flex items-center text-gray-700">
                  <Briefcase className="w-4 h-4 mr-2 text-gray-400" />
                  {candidate.years_of_experience} years experience
                </div>
              </div>

              {/* Metadata Badges */}
              <div className="flex flex-wrap gap-2">
                <span className={`px-3 py-1 rounded-full text-sm font-medium ${
                  candidate.parse_confidence >= 80
                    ? 'bg-green-100 text-green-800'
                    : candidate.parse_confidence >= 60
                    ? 'bg-yellow-100 text-yellow-800'
                    : 'bg-red-100 text-red-800'
                }`}>
                  Parse Quality: {candidate.parse_confidence}%
                </span>
                
                {candidate.authenticity_score !== null && (
                  <button
                    onClick={() => router.push(`/candidate/${candidate.id}/authenticity`)}
                    className={`px-3 py-1 rounded-full text-sm font-medium flex items-center gap-1 hover:opacity-80 ${
                      candidate.authenticity_score >= 75
                        ? 'bg-green-100 text-green-800'
                        : candidate.authenticity_score >= 50
                        ? 'bg-yellow-100 text-yellow-800'
                        : 'bg-red-100 text-red-800'
                    }`}
                  >
                    <Shield className="w-3 h-3" />
                    Authenticity: {candidate.authenticity_score}%
                  </button>
                )}
                
                <span className="px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800">
                  Source: {candidate.source}
                </span>
                
                <span className="px-3 py-1 rounded-full text-sm font-medium bg-gray-100 text-gray-800">
                  Added {new Date(candidate.created_at).toLocaleDateString()}
                </span>
              </div>
            </div>
          </div>

          {/* Summary */}
          {candidate.summary && (
            <div className="mt-6 pt-6 border-t">
              <h3 className="font-semibold text-gray-900 mb-2">Professional Summary</h3>
              <p className="text-gray-700 leading-relaxed">{candidate.summary}</p>
            </div>
          )}
        </div>

        {/* Skills */}
        <div className="bg-white rounded-2xl shadow-lg border p-6 mb-6">
          <h2 className="text-xl font-bold text-gray-900 mb-4 flex items-center gap-2">
            <Star className="w-5 h-5 text-yellow-500" />
            Skills ({candidate.skills.length})
          </h2>
          <div className="flex flex-wrap gap-2">
            {candidate.skills.map((skill, index) => (
              <span
                key={index}
                className="px-4 py-2 bg-blue-50 text-blue-700 rounded-lg text-sm font-medium border border-blue-200"
              >
                {skill}
              </span>
            ))}
          </div>
        </div>

        {/* Experience */}
        <div className="bg-white rounded-2xl shadow-lg border p-6 mb-6">
          <h2 className="text-xl font-bold text-gray-900 mb-4 flex items-center gap-2">
            <Briefcase className="w-5 h-5 text-purple-600" />
            Work Experience
          </h2>
          
          {candidate.experience.length === 0 ? (
            <p className="text-gray-500">No experience listed</p>
          ) : (
            <div className="space-y-6">
              {candidate.experience.map((exp, index) => (
                <div key={index} className="border-l-4 border-blue-500 pl-4">
                  <div className="flex justify-between items-start mb-2">
                    <div>
                      <h3 className="font-bold text-lg text-gray-900">{exp.title}</h3>
                      <div className="flex items-center text-gray-600 mb-1">
                        <Building className="w-4 h-4 mr-1" />
                        {exp.company}
                        {exp.location && ` • ${exp.location}`}
                      </div>
                    </div>
                    <div className="text-sm text-gray-500 flex items-center">
                      <Calendar className="w-4 h-4 mr-1" />
                      {exp.start_date} - {exp.end_date || 'Present'}
                    </div>
                  </div>
                  
                  {exp.description && (
                    <p className="text-gray-700 mb-2">{exp.description}</p>
                  )}
                  
                  {exp.achievements && exp.achievements.length > 0 && (
                    <ul className="list-disc list-inside text-gray-700 space-y-1">
                      {exp.achievements.map((achievement, i) => (
                        <li key={i}>{achievement}</li>
                      ))}
                    </ul>
                  )}
                  
                  {exp.skills_used && exp.skills_used.length > 0 && (
                    <div className="mt-3 flex flex-wrap gap-1">
                      {exp.skills_used.map((skill, i) => (
                        <span key={i} className="px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs">
                          {skill}
                        </span>
                      ))}
                    </div>
                  )}
                </div>
              ))}
            </div>
          )}
        </div>

        {/* Education */}
        <div className="bg-white rounded-2xl shadow-lg border p-6 mb-6">
          <h2 className="text-xl font-bold text-gray-900 mb-4 flex items-center gap-2">
            <GraduationCap className="w-5 h-5 text-green-600" />
            Education
          </h2>
          
          {candidate.education.length === 0 ? (
            <p className="text-gray-500">No education listed</p>
          ) : (
            <div className="space-y-4">
              {candidate.education.map((edu, index) => (
                <div key={index} className="border-l-4 border-green-500 pl-4">
                  <h3 className="font-bold text-lg text-gray-900">{edu.degree}</h3>
                  {edu.field_of_study && (
                    <p className="text-gray-600">{edu.field_of_study}</p>
                  )}
                  <div className="flex items-center text-gray-600 mt-1">
                    <Building className="w-4 h-4 mr-1" />
                    {edu.institution}
                    {edu.location && ` • ${edu.location}`}
                  </div>
                  <div className="text-sm text-gray-500 mt-1">
                    {edu.start_year} - {edu.end_year || 'Present'}
                    {edu.gpa && ` • GPA: ${edu.gpa}`}
                  </div>
                  
                  {edu.achievements && edu.achievements.length > 0 && (
                    <ul className="list-disc list-inside text-gray-700 mt-2 space-y-1">
                      {edu.achievements.map((achievement, i) => (
                        <li key={i}>{achievement}</li>
                      ))}
                    </ul>
                  )}
                </div>
              ))}
            </div>
          )}
        </div>

        {/* Certifications */}
        {candidate.certifications.length > 0 && (
          <div className="bg-white rounded-2xl shadow-lg border p-6 mb-6">
            <h2 className="text-xl font-bold text-gray-900 mb-4 flex items-center gap-2">
              <Award className="w-5 h-5 text-orange-600" />
              Certifications
            </h2>
            
            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
              {candidate.certifications.map((cert, index) => (
                <div key={index} className="border rounded-lg p-4">
                  <h3 className="font-bold text-gray-900">{cert.name}</h3>
                  <p className="text-gray-600 text-sm">{cert.issuer}</p>
                  {cert.issue_date && (
                    <p className="text-gray-500 text-xs mt-1">
                      Issued: {cert.issue_date}
                      {cert.expiry_date && ` • Expires: ${cert.expiry_date}`}
                    </p>
                  )}
                  {cert.credential_url && (
                    <a
                      href={cert.credential_url}
                      target="_blank"
                      rel="noopener noreferrer"
                      className="text-blue-600 hover:underline text-sm flex items-center mt-2"
                    >
                      <LinkIcon className="w-3 h-3 mr-1" />
                      View Credential
                    </a>
                  )}
                </div>
              ))}
            </div>
          </div>
        )}

        {/* Languages */}
        {candidate.languages.length > 0 && (
          <div className="bg-white rounded-2xl shadow-lg border p-6 mb-6">
            <h2 className="text-xl font-bold text-gray-900 mb-4 flex items-center gap-2">
              <Languages className="w-5 h-5 text-indigo-600" />
              Languages
            </h2>
            
            <div className="flex flex-wrap gap-2">
              {candidate.languages.map((language, index) => (
                <span
                  key={index}
                  className="px-4 py-2 bg-indigo-50 text-indigo-700 rounded-lg text-sm font-medium border border-indigo-200"
                >
                  {language}
                </span>
              ))}
            </div>
          </div>
        )}

        {/* Parse Metadata */}
        <div className="bg-gray-50 rounded-2xl border p-6">
          <h3 className="font-semibold text-gray-700 mb-3 flex items-center gap-2">
            <FileText className="w-4 h-4" />
            System Information
          </h3>
          <div className="grid grid-cols-2 md:grid-cols-4 gap-4 text-sm">
            <div>
              <span className="text-gray-600">Parse Method:</span>
              <p className="font-medium text-gray-900">{candidate.parse_method}</p>
            </div>
            <div>
              <span className="text-gray-600">Status:</span>
              <p className="font-medium text-gray-900 capitalize">{candidate.parse_status}</p>
            </div>
            <div>
              <span className="text-gray-600">File Type:</span>
              <p className="font-medium text-gray-900">{candidate.file_type?.toUpperCase()}</p>
            </div>
            <div>
              <span className="text-gray-600">Last Updated:</span>
              <p className="font-medium text-gray-900">
                {new Date(candidate.updated_at).toLocaleDateString()}
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
}
-----------------------------

File: src/app/clients/components/ClientCard.tsx
Content:

-----------------------------

File: src/app/clients/components/ClientForm.tsx
Content:

-----------------------------

File: src/app/clients/components/ClientSelector.tsx
Content:

-----------------------------

File: src/app/clients/new/page.tsx
Content:

-----------------------------

File: src/app/clients/[id]/page.tsx
Content:

-----------------------------

File: src/app/clients/page.tsx
Content:
import React, { useState, useEffect } from 'react';
import {
  Building2, Users, Mail, Phone, MapPin, Calendar, Briefcase,
  Plus, Search, Edit2, Trash2, Eye, ChevronDown, ChevronRight,
  ExternalLink, AlertCircle, CheckCircle, Clock, DollarSign,
  Filter, MoreVertical, X, Save, ArrowLeft, FileText, Tag,
  TrendingUp, Activity, User, Globe, Link2, Star
} from 'lucide-react';

// ============================================================================
// CLIENT TYPES & INTERFACES
// ============================================================================
interface Client {
  id: string;
  name: string;
  type: 'direct' | 'agency';
  status: 'active' | 'inactive' | 'prospect';
  
  // Primary Contact
  primary_contact_name: string;
  primary_contact_email: string;
  primary_contact_phone?: string;
  primary_contact_title?: string;
  
  // Additional Contacts
  additional_contacts?: Contact[];
  
  // Company Info
  industry?: string;
  company_size?: string;
  website?: string;
  address?: string;
  city?: string;
  country?: string;
  
  // Relationship Metrics
  total_jobs: number;
  active_jobs: number;
  total_placements: number;
  total_revenue?: number;
  
  // Metadata
  created_at: string;
  last_contact?: string;
  notes?: string;
  tags?: string[];
}

interface Contact {
  id: string;
  name: string;
  title: string;
  email: string;
  phone?: string;
  is_primary: boolean;
}

interface Job {
  id: string;
  title: string;
  status: 'active' | 'closed' | 'on_hold';
  created_at: string;
  positions: number;
  filled: number;
}

// ============================================================================
// MAIN CLIENT MANAGEMENT COMPONENT
// ============================================================================
export default function ClientManagementSystem() {
  const [view, setView] = useState<'list' | 'detail' | 'add' | 'edit'>('list');
  const [selectedClient, setSelectedClient] = useState<Client | null>(null);
  const [clients, setClients] = useState<Client[]>(mockClients);

  const handleViewClient = (client: Client) => {
    setSelectedClient(client);
    setView('detail');
  };

  const handleAddClient = () => {
    setView('add');
  };

  const handleEditClient = (client: Client) => {
    setSelectedClient(client);
    setView('edit');
  };

  const handleBackToList = () => {
    setView('list');
    setSelectedClient(null);
  };

  return (
    <div className="min-h-screen bg-gray-50">
      {view === 'list' && (
        <ClientList 
          clients={clients}
          onViewClient={handleViewClient}
          onAddClient={handleAddClient}
          onEditClient={handleEditClient}
        />
      )}

      {view === 'detail' && selectedClient && (
        <ClientDetail 
          client={selectedClient}
          onBack={handleBackToList}
          onEdit={() => handleEditClient(selectedClient)}
        />
      )}

      {(view === 'add' || view === 'edit') && (
        <ClientForm
          client={view === 'edit' ? selectedClient : null}
          onBack={handleBackToList}
          onSave={(client) => {
            if (view === 'edit') {
              setClients(clients.map(c => c.id === client.id ? client : c));
            } else {
              setClients([...clients, { ...client, id: Date.now().toString() }]);
            }
            handleBackToList();
          }}
        />
      )}
    </div>
  );
}

// ============================================================================
// CLIENT LIST VIEW
// ============================================================================
function ClientList({ clients, onViewClient, onAddClient, onEditClient }: any) {
  const [searchQuery, setSearchQuery] = useState('');
  const [filterType, setFilterType] = useState<'all' | 'direct' | 'agency'>('all');
  const [filterStatus, setFilterStatus] = useState<'all' | 'active' | 'inactive' | 'prospect'>('all');

  const filteredClients = clients.filter((client: Client) => {
    const matchesSearch = client.name.toLowerCase().includes(searchQuery.toLowerCase()) ||
                         client.primary_contact_name.toLowerCase().includes(searchQuery.toLowerCase());
    const matchesType = filterType === 'all' || client.type === filterType;
    const matchesStatus = filterStatus === 'all' || client.status === filterStatus;
    
    return matchesSearch && matchesType && matchesStatus;
  });

  // Stats
  const stats = {
    total: clients.length,
    active: clients.filter((c: Client) => c.status === 'active').length,
    totalJobs: clients.reduce((sum: number, c: Client) => sum + c.total_jobs, 0),
    totalRevenue: clients.reduce((sum: number, c: Client) => sum + (c.total_revenue || 0), 0)
  };

  return (
    <div className="p-6 max-w-7xl mx-auto">
      {/* Header */}
      <div className="mb-6">
        <div className="flex items-center justify-between mb-4">
          <div>
            <h1 className="text-2xl font-bold text-gray-900">Client Management</h1>
            <p className="text-sm text-gray-500 mt-1">Manage your clients and track relationships</p>
          </div>
          <button
            onClick={onAddClient}
            className="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2 font-medium"
          >
            <Plus className="w-5 h-5" />
            Add Client
          </button>
        </div>

        {/* Stats Cards */}
        <div className="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
          <StatCard
            icon={Building2}
            label="Total Clients"
            value={stats.total}
            color="blue"
          />
          <StatCard
            icon={CheckCircle}
            label="Active Clients"
            value={stats.active}
            color="green"
          />
          <StatCard
            icon={Briefcase}
            label="Total Jobs"
            value={stats.totalJobs}
            color="purple"
          />
          <StatCard
            icon={DollarSign}
            label="Total Revenue"
            value={`€${(stats.totalRevenue / 1000).toFixed(0)}K`}
            color="orange"
          />
        </div>

        {/* Search & Filters */}
        <div className="bg-white rounded-lg border border-gray-200 p-4">
          <div className="flex flex-col md:flex-row gap-4">
            {/* Search */}
            <div className="flex-1 relative">
              <Search className="w-5 h-5 text-gray-400 absolute left-3 top-1/2 -translate-y-1/2" />
              <input
                type="text"
                value={searchQuery}
                onChange={(e) => setSearchQuery(e.target.value)}
                placeholder="Search clients by name or contact..."
                className="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
              />
            </div>

            {/* Type Filter */}
            <select
              value={filterType}
              onChange={(e) => setFilterType(e.target.value as any)}
              className="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
            >
              <option value="all">All Types</option>
              <option value="direct">Direct Clients</option>
              <option value="agency">Agencies</option>
            </select>

            {/* Status Filter */}
            <select
              value={filterStatus}
              onChange={(e) => setFilterStatus(e.target.value as any)}
              className="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
            >
              <option value="all">All Status</option>
              <option value="active">Active</option>
              <option value="inactive">Inactive</option>
              <option value="prospect">Prospect</option>
            </select>
          </div>
        </div>
      </div>

      {/* Client Cards */}
      <div className="grid grid-cols-1 gap-4">
        {filteredClients.length === 0 ? (
          <div className="bg-white rounded-lg border border-gray-200 p-12 text-center">
            <Building2 className="w-12 h-12 text-gray-300 mx-auto mb-3" />
            <p className="text-gray-500">No clients found matching your filters</p>
          </div>
        ) : (
          filteredClients.map((client: Client) => (
            <ClientCard
              key={client.id}
              client={client}
              onView={() => onViewClient(client)}
              onEdit={() => onEditClient(client)}
            />
          ))
        )}
      </div>
    </div>
  );
}

// ============================================================================
// CLIENT CARD COMPONENT
// ============================================================================
function ClientCard({ client, onView, onEdit }: any) {
  const statusColors = {
    active: 'bg-green-100 text-green-800 border-green-200',
    inactive: 'bg-gray-100 text-gray-800 border-gray-200',
    prospect: 'bg-blue-100 text-blue-800 border-blue-200'
  };

  const typeIcons = {
    direct: Building2,
    agency: Users
  };

  const TypeIcon = typeIcons[client.type];

  return (
    <div className="bg-white rounded-lg border border-gray-200 p-5 hover:shadow-md transition-shadow">
      <div className="flex items-start justify-between">
        {/* Left Side - Main Info */}
        <div className="flex-1">
          <div className="flex items-start gap-3 mb-3">
            <div className="p-2 bg-blue-50 rounded-lg">
              <TypeIcon className="w-5 h-5 text-blue-600" />
            </div>
            <div className="flex-1">
              <div className="flex items-center gap-2 mb-1">
                <h3 className="text-lg font-semibold text-gray-900">{client.name}</h3>
                <span className={`px-2 py-0.5 rounded-full text-xs font-medium border ${statusColors[client.status]}`}>
                  {client.status}
                </span>
                <span className="px-2 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-700 capitalize">
                  {client.type === 'direct' ? 'Direct Client' : 'Agency'}
                </span>
              </div>
              
              {/* Primary Contact */}
              <div className="flex flex-wrap items-center gap-x-4 gap-y-1 text-sm text-gray-600">
                <div className="flex items-center gap-1">
                  <User className="w-4 h-4" />
                  <span>{client.primary_contact_name}</span>
                </div>
                <div className="flex items-center gap-1">
                  <Mail className="w-4 h-4" />
                  <span>{client.primary_contact_email}</span>
                </div>
                {client.primary_contact_phone && (
                  <div className="flex items-center gap-1">
                    <Phone className="w-4 h-4" />
                    <span>{client.primary_contact_phone}</span>
                  </div>
                )}
              </div>

              {/* Location */}
              {client.city && (
                <div className="flex items-center gap-1 text-sm text-gray-500 mt-1">
                  <MapPin className="w-4 h-4" />
                  <span>{client.city}, {client.country}</span>
                </div>
              )}
            </div>
          </div>

          {/* Metrics */}
          <div className="flex items-center gap-6 mt-3 pt-3 border-t border-gray-100">
            <div className="flex items-center gap-2">
              <Briefcase className="w-4 h-4 text-gray-400" />
              <span className="text-sm text-gray-600">
                <span className="font-semibold text-gray-900">{client.active_jobs}</span> active
                <span className="text-gray-400 mx-1">/</span>
                <span className="text-gray-500">{client.total_jobs} total jobs</span>
              </span>
            </div>
            <div className="flex items-center gap-2">
              <CheckCircle className="w-4 h-4 text-gray-400" />
              <span className="text-sm text-gray-600">
                <span className="font-semibold text-gray-900">{client.total_placements}</span> placements
              </span>
            </div>
            {client.total_revenue && (
              <div className="flex items-center gap-2">
                <DollarSign className="w-4 h-4 text-gray-400" />
                <span className="text-sm text-gray-600">
                  <span className="font-semibold text-gray-900">€{(client.total_revenue / 1000).toFixed(0)}K</span> revenue
                </span>
              </div>
            )}
          </div>

          {/* Tags */}
          {client.tags && client.tags.length > 0 && (
            <div className="flex flex-wrap gap-2 mt-3">
              {client.tags.slice(0, 3).map((tag, idx) => (
                <span key={idx} className="px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs">
                  {tag}
                </span>
              ))}
              {client.tags.length > 3 && (
                <span className="px-2 py-1 bg-gray-100 text-gray-500 rounded text-xs">
                  +{client.tags.length - 3} more
                </span>
              )}
            </div>
          )}
        </div>

        {/* Right Side - Actions */}
        <div className="flex items-center gap-2 ml-4">
          <button
            onClick={onView}
            className="p-2 hover:bg-gray-100 rounded-lg transition-colors"
            title="View Details"
          >
            <Eye className="w-5 h-5 text-gray-600" />
          </button>
          <button
            onClick={onEdit}
            className="p-2 hover:bg-gray-100 rounded-lg transition-colors"
            title="Edit Client"
          >
            <Edit2 className="w-5 h-5 text-gray-600" />
          </button>
        </div>
      </div>
    </div>
  );
}

// ============================================================================
// CLIENT DETAIL VIEW
// ============================================================================
function ClientDetail({ client, onBack, onEdit }: any) {
  const [activeTab, setActiveTab] = useState<'overview' | 'contacts' | 'jobs' | 'activity'>('overview');

  return (
    <div className="min-h-screen bg-gray-50">
      {/* Header */}
      <div className="bg-white border-b border-gray-200">
        <div className="max-w-7xl mx-auto p-6">
          <button
            onClick={onBack}
            className="flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4"
          >
            <ArrowLeft className="w-5 h-5" />
            Back to Clients
          </button>

          <div className="flex items-start justify-between">
            <div className="flex items-start gap-4">
              <div className="p-3 bg-blue-50 rounded-xl">
                <Building2 className="w-8 h-8 text-blue-600" />
              </div>
              <div>
                <div className="flex items-center gap-3 mb-2">
                  <h1 className="text-2xl font-bold text-gray-900">{client.name}</h1>
                  <StatusBadge status={client.status} />
                  <span className="px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm font-medium capitalize">
                    {client.type === 'direct' ? 'Direct Client' : 'Agency'}
                  </span>
                </div>
                {client.industry && (
                  <p className="text-gray-600">{client.industry}</p>
                )}
                {client.website && (
                  <a
                    href={client.website}
                    target="_blank"
                    rel="noopener noreferrer"
                    className="text-blue-600 hover:text-blue-700 text-sm flex items-center gap-1 mt-1"
                  >
                    <Globe className="w-4 h-4" />
                    {client.website}
                  </a>
                )}
              </div>
            </div>

            <button
              onClick={onEdit}
              className="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2"
            >
              <Edit2 className="w-4 h-4" />
              Edit Client
            </button>
          </div>

          {/* Quick Stats */}
          <div className="grid grid-cols-4 gap-4 mt-6">
            <QuickStat label="Active Jobs" value={client.active_jobs} icon={Briefcase} />
            <QuickStat label="Total Jobs" value={client.total_jobs} icon={FileText} />
            <QuickStat label="Placements" value={client.total_placements} icon={CheckCircle} />
            <QuickStat 
              label="Revenue" 
              value={client.total_revenue ? `€${(client.total_revenue / 1000).toFixed(0)}K` : '€0'} 
              icon={DollarSign} 
            />
          </div>

          {/* Tabs */}
          <div className="flex gap-6 mt-6 border-b border-gray-200">
            <TabButton
              active={activeTab === 'overview'}
              onClick={() => setActiveTab('overview')}
              label="Overview"
            />
            <TabButton
              active={activeTab === 'contacts'}
              onClick={() => setActiveTab('contacts')}
              label="Contacts"
              badge={client.additional_contacts?.length || 1}
            />
            <TabButton
              active={activeTab === 'jobs'}
              onClick={() => setActiveTab('jobs')}
              label="Jobs"
              badge={client.total_jobs}
            />
            <TabButton
              active={activeTab === 'activity'}
              onClick={() => setActiveTab('activity')}
              label="Activity"
            />
          </div>
        </div>
      </div>

      {/* Tab Content */}
      <div className="max-w-7xl mx-auto p-6">
        {activeTab === 'overview' && <OverviewTab client={client} />}
        {activeTab === 'contacts' && <ContactsTab client={client} />}
        {activeTab === 'jobs' && <JobsTab client={client} />}
        {activeTab === 'activity' && <ActivityTab client={client} />}
      </div>
    </div>
  );
}

// ============================================================================
// OVERVIEW TAB
// ============================================================================
function OverviewTab({ client }: any) {
  return (
    <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
      {/* Main Info */}
      <div className="lg:col-span-2 space-y-6">
        {/* Primary Contact */}
        <div className="bg-white rounded-lg border border-gray-200 p-6">
          <h3 className="text-lg font-semibold text-gray-900 mb-4">Primary Contact</h3>
          <div className="space-y-3">
            <InfoRow icon={User} label="Name" value={client.primary_contact_name} />
            {client.primary_contact_title && (
              <InfoRow icon={Briefcase} label="Title" value={client.primary_contact_title} />
            )}
            <InfoRow icon={Mail} label="Email" value={client.primary_contact_email} />
            {client.primary_contact_phone && (
              <InfoRow icon={Phone} label="Phone" value={client.primary_contact_phone} />
            )}
          </div>
        </div>

        {/* Company Info */}
        <div className="bg-white rounded-lg border border-gray-200 p-6">
          <h3 className="text-lg font-semibold text-gray-900 mb-4">Company Information</h3>
          <div className="space-y-3">
            {client.industry && <InfoRow icon={Tag} label="Industry" value={client.industry} />}
            {client.company_size && <InfoRow icon={Users} label="Company Size" value={client.company_size} />}
            {client.website && (
              <InfoRow 
                icon={Globe} 
                label="Website" 
                value={
                  <a href={client.website} target="_blank" className="text-blue-600 hover:text-blue-700">
                    {client.website}
                  </a>
                } 
              />
            )}
            {client.address && <InfoRow icon={MapPin} label="Address" value={client.address} />}
            {client.city && (
              <InfoRow icon={MapPin} label="Location" value={`${client.city}, ${client.country}`} />
            )}
          </div>
        </div>

        {/* Notes */}
        {client.notes && (
          <div className="bg-white rounded-lg border border-gray-200 p-6">
            <h3 className="text-lg font-semibold text-gray-900 mb-4">Notes</h3>
            <p className="text-gray-700 whitespace-pre-wrap">{client.notes}</p>
          </div>
        )}
      </div>

      {/* Sidebar */}
      <div className="space-y-6">
        {/* Relationship Health */}
        <div className="bg-white rounded-lg border border-gray-200 p-6">
          <h3 className="text-lg font-semibold text-gray-900 mb-4">Relationship Health</h3>
          <div className="space-y-4">
            <div>
              <div className="flex justify-between text-sm mb-1">
                <span className="text-gray-600">Activity Score</span>
                <span className="font-semibold text-green-600">85%</span>
              </div>
              <div className="w-full bg-gray-200 rounded-full h-2">
                <div className="bg-green-600 h-2 rounded-full" style={{ width: '85%' }}></div>
              </div>
            </div>
            <div className="pt-3 border-t border-gray-100 space-y-2">
              <div className="flex justify-between text-sm">
                <span className="text-gray-600">Last Contact</span>
                <span className="text-gray-900 font-medium">2 days ago</span>
              </div>
              <div className="flex justify-between text-sm">
                <span className="text-gray-600">Client Since</span>
                <span className="text-gray-900 font-medium">
                  {new Date(client.created_at).toLocaleDateString('en-US', { 
                    month: 'short', 
                    year: 'numeric' 
                  })}
                </span>
              </div>
            </div>
          </div>
        </div>

        {/* Tags */}
        {client.tags && client.tags.length > 0 && (
          <div className="bg-white rounded-lg border border-gray-200 p-6">
            <h3 className="text-lg font-semibold text-gray-900 mb-4">Tags</h3>
            <div className="flex flex-wrap gap-2">
              {client.tags.map((tag: string, idx: number) => (
                <span key={idx} className="px-3 py-1 bg-blue-50 text-blue-700 rounded-full text-sm border border-blue-200">
                  {tag}
                </span>
              ))}
            </div>
          </div>
        )}

        {/* Quick Actions */}
        <div className="bg-white rounded-lg border border-gray-200 p-6">
          <h3 className="text-lg font-semibold text-gray-900 mb-4">Quick Actions</h3>
          <div className="space-y-2">
            <button className="w-full px-4 py-2 text-left text-sm hover:bg-gray-50 rounded-lg flex items-center gap-2">
              <Plus className="w-4 h-4" />
              Add New Job
            </button>
            <button className="w-full px-4 py-2 text-left text-sm hover:bg-gray-50 rounded-lg flex items-center gap-2">
              <Mail className="w-4 h-4" />
              Send Email
            </button>
            <button className="w-full px-4 py-2 text-left text-sm hover:bg-gray-50 rounded-lg flex items-center gap-2">
              <FileText className="w-4 h-4" />
              Generate Report
            </button>
          </div>
        </div>
      </div>
    </div>
  );
}

// ============================================================================
// CONTACTS TAB
// ============================================================================
function ContactsTab({ client }: any) {
  const allContacts = [
    {
      id: '1',
      name: client.primary_contact_name,
      title: client.primary_contact_title || 'Primary Contact',
      email: client.primary_contact_email,
      phone: client.primary_contact_phone,
      is_primary: true
    },
    ...(client.additional_contacts || [])
  ];

  return (
    <div className="bg-white rounded-lg border border-gray-200">
      <div className="p-6 border-b border-gray-200 flex items-center justify-between">
        <h3 className="text-lg font-semibold text-gray-900">All Contacts</h3>
        <button className="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2 text-sm">
          <Plus className="w-4 h-4" />
          Add Contact
        </button>
      </div>
      <div className="divide-y divide-gray-200">
        {allContacts.map((contact) => (
          <div key={contact.id} className="p-6 hover:bg-gray-50">
            <div className="flex items-start justify-between">
              <div className="flex items-start gap-4">
                <div className="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center">
                  <User className="w-6 h-6 text-blue-600" />
                </div>
                <div>
                  <div className="flex items-center gap-2 mb-1">
                    <h4 className="font-semibold text-gray-900">{contact.name}</h4>
                    {contact.is_primary && (
                      <span className="px-2 py-0.5 bg-blue-100 text-blue-700 rounded-full text-xs font-medium border border-blue-200">
                        Primary
                      </span>
                    )}
                  </div>
                  {contact.title && (
                    <p className="text-sm text-gray-600 mb-2">{contact.title}</p>
                  )}
                  <div className="space-y-1">
                    <div className="flex items-center gap-2 text-sm text-gray-600">
                      <Mail className="w-4 h-4" />
                      <a href={`mailto:${contact.email}`} className="hover:text-blue-600">
                        {contact.email}
                      </a>
                    </div>
                    {contact.phone && (
                      <div className="flex items-center gap-2 text-sm text-gray-600">
                        <Phone className="w-4 h-4" />
                        <a href={`tel:${contact.phone}`} className="hover:text-blue-600">
                          {contact.phone}
                        </a>
                      </div>
                    )}
                  </div>
                </div>
              </div>
              <button className="p-2 hover:bg-gray-100 rounded-lg">
                <Edit2 className="w-4 h-4 text-gray-600" />
              </button>
            </div>
          </div>
        ))}
      </div>
    </div>
  );
}

// ============================================================================
// JOBS TAB (Linked Jobs)
// ============================================================================
function JobsTab({ client }: any) {
  const linkedJobs = mockJobs.filter(job => job.client_id === client.id);

  return (
    <div className="space-y-4">
      <div className="bg-white rounded-lg border border-gray-200 p-6 flex items-center justify-between">
        <div>
          <h3 className="text-lg font-semibold text-gray-900">Jobs from {client.name}</h3>
          <p className="text-sm text-gray-500 mt-1">
            {linkedJobs.filter(j => j.status === 'active').length} active • {linkedJobs.length} total
          </p>
        </div>
        <button className="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2">
          <Plus className="w-4 h-4" />
          Add Job for {client.name}
        </button>
      </div>

      {linkedJobs.length === 0 ? (
        <div className="bg-white rounded-lg border border-gray-200 p-12 text-center">
          <Briefcase className="w-12 h-12 text-gray-300 mx-auto mb-3" />
          <p className="text-gray-500 mb-4">No jobs yet for this client</p>
          <button className="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
            Create First Job
          </button>
        </div>
      ) : (
        <div className="grid grid-cols-1 gap-4">
          {linkedJobs.map((job) => (
            <LinkedJobCard key={job.id} job={job} client={client} />
          ))}
        </div>
      )}
    </div>
  );
}

function LinkedJobCard({ job, client }: any) {
  const statusColors = {
    active: 'bg-green-100 text-green-800 border-green-200',
    closed: 'bg-gray-100 text-gray-800 border-gray-200',
    on_hold: 'bg-yellow-100 text-yellow-800 border-yellow-200'
  };

  return (
    <div className="bg-white rounded-lg border border-gray-200 p-5 hover:shadow-sm transition-shadow">
      <div className="flex items-start justify-between">
        <div className="flex-1">
          <div className="flex items-center gap-2 mb-2">
            <h4 className="font-semibold text-gray-900">{job.title}</h4>
            <span className={`px-2 py-0.5 rounded-full text-xs font-medium border ${statusColors[job.status]}`}>
              {job.status.replace('_', ' ')}
            </span>
          </div>
          
          <div className="flex items-center gap-4 text-sm text-gray-600 mb-3">
            <div className="flex items-center gap-1">
              <Calendar className="w-4 h-4" />
              <span>Posted {new Date(job.created_at).toLocaleDateString()}</span>
            </div>
            <div className="flex items-center gap-1">
              <Users className="w-4 h-4" />
              <span>{job.filled}/{job.positions} positions filled</span>
            </div>
          </div>

          {/* Progress Bar */}
          <div className="mb-2">
            <div className="w-full bg-gray-200 rounded-full h-2">
              <div 
                className="bg-blue-600 h-2 rounded-full" 
                style={{ width: `${(job.filled / job.positions) * 100}%` }}
              ></div>
            </div>
          </div>

          <div className="flex items-center gap-2 text-xs text-gray-500">
            <span>ID: {job.id}</span>
            <span>•</span>
            <span>{job.positions - job.filled} positions remaining</span>
          </div>
        </div>

        <div className="flex items-center gap-2 ml-4">
          <button className="p-2 hover:bg-gray-100 rounded-lg">
            <Eye className="w-5 h-5 text-gray-600" />
          </button>
          <button className="p-2 hover:bg-gray-100 rounded-lg">
            <ExternalLink className="w-5 h-5 text-gray-600" />
          </button>
        </div>
      </div>
    </div>
  );
}

// ============================================================================
// ACTIVITY TAB
// ============================================================================
function ActivityTab({ client }: any) {
  const activities = [
    {
      id: '1',
      type: 'job_created',
      description: 'New job "Senior Full Stack Developer" created',
      timestamp: '2025-01-10T14:30:00Z',
      user: 'Sarah Johnson'
    },
    {
      id: '2',
      type: 'email_sent',
      description: 'Email sent to primary contact',
      timestamp: '2025-01-08T09:15:00Z',
      user: 'Mike Thompson'
    },
    {
      id: '3',
      type: 'placement',
      description: 'Candidate placed for "DevOps Engineer" role',
      timestamp: '2025-01-05T16:45:00Z',
      user: 'Anna Williams'
    }
  ];

  const activityIcons = {
    job_created: Briefcase,
    email_sent: Mail,
    placement: CheckCircle,
    note_added: FileText,
    contact_updated: User
  };

  return (
    <div className="bg-white rounded-lg border border-gray-200">
      <div className="p-6 border-b border-gray-200">
        <h3 className="text-lg font-semibold text-gray-900">Recent Activity</h3>
      </div>
      <div className="divide-y divide-gray-200">
        {activities.map((activity) => {
          const Icon = activityIcons[activity.type as keyof typeof activityIcons] || Activity;
          return (
            <div key={activity.id} className="p-6">
              <div className="flex gap-4">
                <div className="p-2 bg-blue-50 rounded-lg h-fit">
                  <Icon className="w-5 h-5 text-blue-600" />
                </div>
                <div className="flex-1">
                  <p className="text-gray-900 mb-1">{activity.description}</p>
                  <div className="flex items-center gap-2 text-sm text-gray-500">
                    <span>{activity.user}</span>
                    <span>•</span>
                    <span>{new Date(activity.timestamp).toLocaleString()}</span>
                  </div>
                </div>
              </div>
            </div>
          );
        })}
      </div>
    </div>
  );
}

// ============================================================================
// CLIENT FORM (Add/Edit)
// ============================================================================
function ClientForm({ client, onBack, onSave }: any) {
  const [formData, setFormData] = useState<Partial<Client>>(
    client || {
      name: '',
      type: 'direct',
      status: 'active',
      primary_contact_name: '',
      primary_contact_email: '',
      primary_contact_phone: '',
      primary_contact_title: '',
      industry: '',
      company_size: '',
      website: '',
      address: '',
      city: '',
      country: '',
      notes: '',
      tags: []
    }
  );

  const [saving, setSaving] = useState(false);

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    setSaving(true);
    await new Promise(resolve => setTimeout(resolve, 1000));
    onSave({
      ...formData,
      id: client?.id || Date.now().toString(),
      total_jobs: client?.total_jobs || 0,
      active_jobs: client?.active_jobs || 0,
      total_placements: client?.total_placements || 0,
      created_at: client?.created_at || new Date().toISOString()
    });
  };

  return (
    <div className="max-w-4xl mx-auto p-6">
      <div className="bg-white rounded-xl shadow-sm border border-gray-200">
        {/* Header */}
        <div className="p-6 border-b border-gray-200">
          <button
            onClick={onBack}
            className="flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4"
          >
            <ArrowLeft className="w-5 h-5" />
            Back
          </button>
          <h2 className="text-2xl font-bold text-gray-900">
            {client ? 'Edit Client' : 'Add New Client'}
          </h2>
        </div>

        <form onSubmit={handleSubmit}>
          <div className="p-6 space-y-6">
            {/* Basic Info */}
            <section>
              <h3 className="text-lg font-semibold text-gray-900 mb-4">Basic Information</h3>
              <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div className="md:col-span-2">
                  <label className="block text-sm font-medium text-gray-700 mb-2">
                    Company Name <span className="text-red-500">*</span>
                  </label>
                  <input
                    type="text"
                    required
                    value={formData.name}
                    onChange={(e) => setFormData({ ...formData, name: e.target.value })}
                    className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                    placeholder="e.g., TechCorp Solutions"
                  />
                </div>

                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-2">
                    Client Type <span className="text-red-500">*</span>
                  </label>
                  <select
                    required
                    value={formData.type}
                    onChange={(e) => setFormData({ ...formData, type: e.target.value as any })}
                    className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                  >
                    <option value="direct">Direct Client</option>
                    <option value="agency">Agency/Consultancy</option>
                  </select>
                </div>

                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-2">
                    Status <span className="text-red-500">*</span>
                  </label>
                  <select
                    required
                    value={formData.status}
                    onChange={(e) => setFormData({ ...formData, status: e.target.value as any })}
                    className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                  >
                    <option value="active">Active</option>
                    <option value="inactive">Inactive</option>
                    <option value="prospect">Prospect</option>
                  </select>
                </div>

                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-2">Industry</label>
                  <input
                    type="text"
                    value={formData.industry}
                    onChange={(e) => setFormData({ ...formData, industry: e.target.value })}
                    className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                    placeholder="e.g., Technology, Finance"
                  />
                </div>

                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-2">Company Size</label>
                  <select
                    value={formData.company_size}
                    onChange={(e) => setFormData({ ...formData, company_size: e.target.value })}
                    className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                  >
                    <option value="">Select size</option>
                    <option value="1-10">1-10 employees</option>
                    <option value="11-50">11-50 employees</option>
                    <option value="51-200">51-200 employees</option>
                    <option value="201-500">201-500 employees</option>
                    <option value="501+">501+ employees</option>
                  </select>
                </div>
              </div>
            </section>

            {/* Primary Contact */}
            <section className="border-t pt-6">
              <h3 className="text-lg font-semibold text-gray-900 mb-4">Primary Contact</h3>
              <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-2">
                    Contact Name <span className="text-red-500">*</span>
                  </label>
                  <input
                    type="text"
                    required
                    value={formData.primary_contact_name}
                    onChange={(e) => setFormData({ ...formData, primary_contact_name: e.target.value })}
                    className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                    placeholder="e.g., John Smith"
                  />
                </div>

                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-2">Title/Position</label>
                  <input
                    type="text"
                    value={formData.primary_contact_title}
                    onChange={(e) => setFormData({ ...formData, primary_contact_title: e.target.value })}
                    className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                    placeholder="e.g., HR Manager"
                  />
                </div>

                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-2">
                    Email <span className="text-red-500">*</span>
                  </label>
                  <input
                    type="email"
                    required
                    value={formData.primary_contact_email}
                    onChange={(e) => setFormData({ ...formData, primary_contact_email: e.target.value })}
                    className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                    placeholder="john@company.com"
                  />
                </div>

                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-2">Phone</label>
                  <input
                    type="tel"
                    value={formData.primary_contact_phone}
                    onChange={(e) => setFormData({ ...formData, primary_contact_phone: e.target.value })}
                    className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                    placeholder="+32 2 123 4567"
                  />
                </div>
              </div>
            </section>

            {/* Company Details */}
            <section className="border-t pt-6">
              <h3 className="text-lg font-semibold text-gray-900 mb-4">Company Details</h3>
              <div className="grid grid-cols-1 gap-4">
                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-2">Website</label>
                  <input
                    type="url"
                    value={formData.website}
                    onChange={(e) => setFormData({ ...formData, website: e.target.value })}
                    className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                    placeholder="https://company.com"
                  />
                </div>

                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-2">Address</label>
                  <input
                    type="text"
                    value={formData.address}
                    onChange={(e) => setFormData({ ...formData, address: e.target.value })}
                    className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                    placeholder="Street address"
                  />
                </div>

                <div className="grid grid-cols-2 gap-4">
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-2">City</label>
                    <input
                      type="text"
                      value={formData.city}
                      onChange={(e) => setFormData({ ...formData, city: e.target.value })}
                      className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                      placeholder="Brussels"
                    />
                  </div>

                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-2">Country</label>
                    <input
                      type="text"
                      value={formData.country}
                      onChange={(e) => setFormData({ ...formData, country: e.target.value })}
                      className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                      placeholder="Belgium"
                    />
                  </div>
                </div>

                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-2">Notes</label>
                  <textarea
                    value={formData.notes}
                    onChange={(e) => setFormData({ ...formData, notes: e.target.value })}
                    className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                    rows={4}
                    placeholder="Any additional notes about this client..."
                  />
                </div>
              </div>
            </section>
          </div>

          {/* Actions */}
          <div className="p-6 border-t border-gray-200 bg-gray-50 flex gap-3">
            <button
              type="button"
              onClick={onBack}
              className="px-5 py-2.5 border border-gray-300 rounded-lg hover:bg-white font-medium"
            >
              Cancel
            </button>
            <button
              type="submit"
              disabled={saving}
              className="flex-1 px-6 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 font-medium"
            >
              {saving ? 'Saving...' : client ? 'Update Client' : 'Add Client'}
            </button>
          </div>
        </form>
      </div>
    </div>
  );
}

// ============================================================================
// HELPER COMPONENTS
// ============================================================================
function StatCard({ icon: Icon, label, value, color }: any) {
  const colorClasses = {
    blue: 'bg-blue-50 text-blue-600',
    green: 'bg-green-50 text-green-600',
    purple: 'bg-purple-50 text-purple-600',
    orange: 'bg-orange-50 text-orange-600'
  };

  return (
    <div className="bg-white rounded-lg border border-gray-200 p-4">
      <div className="flex items-center gap-3">
        <div className={`p-2 rounded-lg ${colorClasses[color]}`}>
          <Icon className="w-5 h-5" />
        </div>
        <div>
          <p className="text-sm text-gray-600">{label}</p>
          <p className="text-2xl font-bold text-gray-900">{value}</p>
        </div>
      </div>
    </div>
  );
}

function StatusBadge({ status }: any) {
  const statusConfig = {
    active: { label: 'Active', color: 'bg-green-100 text-green-800 border-green-200' },
    inactive: { label: 'Inactive', color: 'bg-gray-100 text-gray-800 border-gray-200' },
    prospect: { label: 'Prospect', color: 'bg-blue-100 text-blue-800 border-blue-200' }
  };

  const config = statusConfig[status as keyof typeof statusConfig];

  return (
    <span className={`px-3 py-1 rounded-full text-sm font-medium border ${config.color}`}>
      {config.label}
    </span>
  );
}

function QuickStat({ label, value, icon: Icon }: any) {
  return (
    <div className="bg-white rounded-lg border border-gray-200 p-4 text-center">
      <Icon className="w-6 h-6 text-gray-400 mx-auto mb-2" />
      <p className="text-2xl font-bold text-gray-900">{value}</p>
      <p className="text-sm text-gray-600">{label}</p>
    </div>
  );
}

function TabButton({ active, onClick, label, badge }: any) {
  return (
    <button
      onClick={onClick}
      className={`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${
        active
          ? 'border-blue-600 text-blue-600'
          : 'border-transparent text-gray-600 hover:text-gray-900'
      }`}
    >
      {label}
      {badge !== undefined && (
        <span className="ml-2 px-2 py-0.5 bg-gray-100 text-gray-600 rounded-full text-xs">
          {badge}
        </span>
      )}
    </button>
  );
}

function InfoRow({ icon: Icon, label, value }: any) {
  return (
    <div className="flex items-start gap-3">
      <Icon className="w-5 h-5 text-gray-400 mt-0.5" />
      <div className="flex-1">
        <p className="text-sm text-gray-600">{label}</p>
        <p className="text-sm text-gray-900 font-medium">{typeof value === 'string' ? value : value}</p>
      </div>
    </div>
  );
}

// ============================================================================
// MOCK DATA
// ============================================================================
const mockClients: Client[] = [
  {
    id: '1',
    name: 'TechCorp Solutions',
    type: 'direct',
    status: 'active',
    primary_contact_name: 'John Smith',
    primary_contact_email: 'john@techcorp.com',
    primary_contact_phone: '+32 2 123 4567',
    primary_contact_title: 'HR Director',
    industry: 'Technology',
    company_size: '201-500',
    website: 'https://techcorp.com',
    city: 'Brussels',
    country: 'Belgium',
    total_jobs: 15,
    active_jobs: 5,
    total_placements: 8,
    total_revenue: 125000,
    created_at: '2024-03-15T10:00:00Z',
    tags: ['Key Account', 'IT Sector', 'High Priority']
  },
  {
    id: '2',
    name: 'DataFlow Inc',
    type: 'direct',
    status: 'active',
    primary_contact_name: 'Sarah Lee',
    primary_contact_email: 'sarah@dataflow.com',
    primary_contact_phone: '+31 20 345 6789',
    primary_contact_title: 'Talent Manager',
    industry: 'Data Analytics',
    company_size: '51-200',
    website: 'https://dataflow.com',
    city: 'Amsterdam',
    country: 'Netherlands',
    total_jobs: 8,
    active_jobs: 3,
    total_placements: 5,
    total_revenue: 78000,
    created_at: '2024-06-20T14:30:00Z',
    tags: ['Data Science', 'Growth Client']
  },
  {
    id: '3',
    name: 'Randstad Belgium',
    type: 'agency',
    status: 'active',
    primary_contact_name: 'Anna Wilson',
    primary_contact_email: 'anna@randstad.be',
    primary_contact_phone: '+32 2 987 6543',
    industry: 'Staffing & Recruiting',
    company_size: '501+',
    city: 'Antwerp',
    country: 'Belgium',
    total_jobs: 22,
    active_jobs: 8,
    total_placements: 12,
    total_revenue: 95000,
    created_at: '2024-01-10T09:00:00Z',
    tags: ['Agency Partner', 'Volume']
  }
];

const mockJobs = [
  {
    id: 'JOB-001',
    client_id: '1',
    title: 'Senior Full Stack Developer',
    status: 'active',
    created_at: '2025-01-10T10:00:00Z',
    positions: 2,
    filled: 0
  },
  {
    id: 'JOB-002',
    client_id: '1',
    title: 'DevOps Engineer',
    status: 'active',
    created_at: '2025-01-05T14:30:00Z',
    positions: 1,
    filled: 1
  },
  {
    id: 'JOB-003',
    client_id: '1',
    title: 'React Developer',
    status: 'closed',
    created_at: '2024-12-15T09:00:00Z',
    positions: 3,
    filled: 3
  }
];
-----------------------------

File: src/app/settings/page.tsx
Content:
// src/app/settings/page.tsx - USER-FRIENDLY VERSION (NO DEV JARGON)
'use client';
import { useState, useEffect } from 'react';
import { Save, Check, AlertCircle, Key, CheckCircle, XCircle, Loader2 } from 'lucide-react';

interface Settings {
  name: string;
  company: string;
  email: string;
  minScore: number;
  exportFields: string[];
  notifications: boolean;
}

interface APIStatus {
  apollo: { configured: boolean; valid: boolean; };
  openai: { configured: boolean; };
  supabase: { configured: boolean; };
}

const defaultSettings: Settings = {
  name: '',
  company: '',
  email: '',
  minScore: 70,
  exportFields: ['name', 'email', 'skills', 'experience', 'score'],
  notifications: true
};

export default function SettingsPage() {
  const [settings, setSettings] = useState<Settings>(defaultSettings);
  const [saved, setSaved] = useState(false);
  const [loading, setLoading] = useState(true);
  const [saving, setSaving] = useState(false);
  const [apiStatus, setApiStatus] = useState<APIStatus>({
    apollo: { configured: false, valid: false },
    openai: { configured: false },
    supabase: { configured: false }
  });
  const [checkingApis, setCheckingApis] = useState(false);

  useEffect(() => {
    loadSettings();
    checkAPIStatus();
  }, []);

  async function loadSettings() {
    try {
      setLoading(true);
      const res = await fetch('/api/settings');
      const { data } = await res.json();
      
      if (data && Object.keys(data).length > 0) {
        setSettings({ ...defaultSettings, ...data });
      }
    } catch (err) {
      console.error('Failed to load settings:', err);
    } finally {
      setLoading(false);
    }
  }

  async function checkAPIStatus() {
    try {
      setCheckingApis(true);
      
      // Check AI service
      setApiStatus(prev => ({
        ...prev,
        openai: { configured: true } // Assume configured if app loads
      }));

      // Check database
      const dbRes = await fetch('/api/candidates?limit=1');
      setApiStatus(prev => ({
        ...prev,
        supabase: { configured: dbRes.ok }
      }));

      // Check external search
      const apolloRes = await fetch('/api/external-search');
      if (apolloRes.ok) {
        const apolloData = await apolloRes.json();
        setApiStatus(prev => ({
          ...prev,
          apollo: {
            configured: apolloData.configured || false,
            valid: apolloData.valid || false
          }
        }));
      }

    } catch (err) {
      console.error('Failed to check services:', err);
    } finally {
      setCheckingApis(false);
    }
  }

  async function handleSave() {
    try {
      setSaving(true);
      
      const res = await fetch('/api/settings', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(settings)
      });

      if (res.ok) {
        setSaved(true);
        setTimeout(() => setSaved(false), 3000);
      } else {
        const error = await res.json();
        alert(error.error || 'Failed to save settings');
      }
    } catch (err) {
      alert('Failed to save settings. Please try again.');
      console.error(err);
    } finally {
      setSaving(false);
    }
  }

  if (loading) {
    return (
      <div className="min-h-screen flex items-center justify-center bg-gray-50">
        <div className="text-center">
          <Loader2 className="w-12 h-12 text-blue-600 animate-spin mx-auto mb-4" />
          <p className="text-gray-600">Loading settings...</p>
        </div>
      </div>
    );
  }

  return (
    <div className="min-h-screen bg-gray-50 p-4 md:p-8 pb-24 md:pb-8">
      <div className="max-w-4xl mx-auto">
        {/* Header */}
        <div className="mb-8">
          <h1 className="text-3xl font-bold text-gray-900">Settings</h1>
          <p className="text-gray-600 mt-1">
            Manage your profile and preferences
          </p>
        </div>

        {/* Success Message */}
        {saved && (
          <div className="mb-6 p-4 bg-green-50 border border-green-200 rounded-lg flex items-center text-green-700">
            <Check className="w-5 h-5 mr-2 flex-shrink-0" />
            <span className="font-medium">Settings saved successfully!</span>
          </div>
        )}

        {/* System Status */}
        <div className="bg-white rounded-xl shadow-sm p-6 mb-6">
          <div className="flex items-center justify-between mb-4">
            <h2 className="text-lg font-semibold flex items-center gap-2">
              <Key className="w-5 h-5 text-blue-600" />
              System Status
            </h2>
            <button
              onClick={checkAPIStatus}
              disabled={checkingApis}
              className="text-sm text-blue-600 hover:text-blue-700 font-medium disabled:opacity-50"
            >
              {checkingApis ? (
                <>
                  <Loader2 className="w-4 h-4 inline mr-1 animate-spin" />
                  Checking...
                </>
              ) : (
                'Refresh'
              )}
            </button>
          </div>

          <div className="space-y-3">
            {/* AI Service */}
            <div className="flex items-center justify-between p-3 border rounded-lg">
              <div className="flex items-center gap-3">
                {apiStatus.openai.configured ? (
                  <CheckCircle className="w-5 h-5 text-green-600" />
                ) : (
                  <XCircle className="w-5 h-5 text-red-600" />
                )}
                <div>
                  <p className="font-medium">AI Resume Parser</p>
                  <p className="text-xs text-gray-600">Extracts candidate information</p>
                </div>
              </div>
              <span className={`px-3 py-1 rounded-full text-xs font-medium ${
                apiStatus.openai.configured 
                  ? 'bg-green-100 text-green-700' 
                  : 'bg-red-100 text-red-700'
              }`}>
                {apiStatus.openai.configured ? 'Working' : 'Offline'}
              </span>
            </div>

            {/* Database */}
            <div className="flex items-center justify-between p-3 border rounded-lg">
              <div className="flex items-center gap-3">
                {apiStatus.supabase.configured ? (
                  <CheckCircle className="w-5 h-5 text-green-600" />
                ) : (
                  <XCircle className="w-5 h-5 text-red-600" />
                )}
                <div>
                  <p className="font-medium">Candidate Database</p>
                  <p className="text-xs text-gray-600">Stores all candidate data</p>
                </div>
              </div>
              <span className={`px-3 py-1 rounded-full text-xs font-medium ${
                apiStatus.supabase.configured 
                  ? 'bg-green-100 text-green-700' 
                  : 'bg-red-100 text-red-700'
              }`}>
                {apiStatus.supabase.configured ? 'Connected' : 'Offline'}
              </span>
            </div>

            {/* External Search */}
            <div className="flex items-center justify-between p-3 border rounded-lg">
              <div className="flex items-center gap-3">
                {apiStatus.apollo.configured && apiStatus.apollo.valid ? (
                  <CheckCircle className="w-5 h-5 text-green-600" />
                ) : apiStatus.apollo.configured ? (
                  <AlertCircle className="w-5 h-5 text-yellow-600" />
                ) : (
                  <XCircle className="w-5 h-5 text-gray-400" />
                )}
                <div>
                  <p className="font-medium">External Talent Search</p>
                  <p className="text-xs text-gray-600">Search beyond your database (optional)</p>
                </div>
              </div>
              <span className={`px-3 py-1 rounded-full text-xs font-medium ${
                apiStatus.apollo.configured && apiStatus.apollo.valid
                  ? 'bg-green-100 text-green-700'
                  : apiStatus.apollo.configured
                  ? 'bg-yellow-100 text-yellow-700'
                  : 'bg-gray-100 text-gray-700'
              }`}>
                {apiStatus.apollo.configured && apiStatus.apollo.valid
                  ? 'Connected'
                  : apiStatus.apollo.configured
                  ? 'Check Setup'
                  : 'Not Set Up'}
              </span>
            </div>
          </div>

          {(!apiStatus.openai.configured || !apiStatus.supabase.configured) && (
            <div className="mt-4 p-4 bg-red-50 border border-red-200 rounded-lg">
              <p className="text-sm text-red-800">
                <strong>⚠️ Action Required:</strong> Some core services are offline. 
                Contact your administrator or check system setup.
              </p>
            </div>
          )}
        </div>

        {/* Your Information */}
        <div className="bg-white rounded-xl shadow-sm p-6 mb-6">
          <h2 className="text-lg font-semibold mb-4">Your Information</h2>
          <p className="text-sm text-gray-600 mb-4">
            This appears on exported reports and documents
          </p>
          
          <div className="space-y-4">
            <div>
              <label className="block text-sm font-medium text-gray-700 mb-1">
                Your Name
              </label>
              <input
                type="text"
                value={settings.name}
                onChange={e => setSettings({ ...settings, name: e.target.value })}
                className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                placeholder="John Doe"
              />
            </div>

            <div>
              <label className="block text-sm font-medium text-gray-700 mb-1">
                Company Name
              </label>
              <input
                type="text"
                value={settings.company}
                onChange={e => setSettings({ ...settings, company: e.target.value })}
                className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                placeholder="Acme Corp"
              />
            </div>

            <div>
              <label className="block text-sm font-medium text-gray-700 mb-1">
                Email Address
              </label>
              <input
                type="email"
                value={settings.email}
                onChange={e => setSettings({ ...settings, email: e.target.value })}
                className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                placeholder="john@acme.com"
              />
            </div>
          </div>
        </div>

        {/* Matching Preferences */}
        <div className="bg-white rounded-xl shadow-sm p-6 mb-6">
          <h2 className="text-lg font-semibold mb-4">Matching Quality</h2>
          <p className="text-sm text-gray-600 mb-4">
            Set minimum quality threshold for candidate matches
          </p>
          
          <div>
            <label className="block text-sm font-medium text-gray-700 mb-2">
              Show candidates scoring at least: <span className="text-blue-600 font-bold">{settings.minScore}%</span>
            </label>
            <input
              type="range"
              min="40"
              max="90"
              step="5"
              value={settings.minScore}
              onChange={e => setSettings({ ...settings, minScore: +e.target.value })}
              className="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-600"
            />
            <div className="flex justify-between text-xs text-gray-500 mt-1">
              <span>40% (All Matches)</span>
              <span>70% (Good Matches)</span>
              <span>90% (Perfect Matches)</span>
            </div>
            <p className="text-xs text-gray-600 mt-2">
              💡 Recommended: 70% - Shows candidates who are genuinely strong fits
            </p>
          </div>
        </div>

        {/* Export Options */}
        <div className="bg-white rounded-xl shadow-sm p-6 mb-6">
          <h2 className="text-lg font-semibold mb-4">Export Settings</h2>
          <p className="text-sm text-gray-600 mb-4">
            Choose what information to include when exporting candidates
          </p>
          
          <div className="space-y-2">
            {[
              { id: 'name', label: 'Candidate Name', required: true },
              { id: 'email', label: 'Email Address' },
              { id: 'phone', label: 'Phone Number' },
              { id: 'skills', label: 'Skills & Technologies' },
              { id: 'experience', label: 'Years of Experience' },
              { id: 'score', label: 'Match Score', required: true },
              { id: 'education', label: 'Education Background' },
              { id: 'location', label: 'Location' },
            ].map(field => (
              <label 
                key={field.id} 
                className="flex items-center p-3 border rounded-lg hover:bg-gray-50 cursor-pointer"
              >
                <input
                  type="checkbox"
                  checked={settings.exportFields.includes(field.id)}
                  disabled={field.required}
                  onChange={e => {
                    const checked = e.target.checked;
                    setSettings({
                      ...settings,
                      exportFields: checked
                        ? [...settings.exportFields, field.id]
                        : settings.exportFields.filter(f => f !== field.id)
                    });
                  }}
                  className="mr-3 w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"
                />
                <span className="flex-1">{field.label}</span>
                {field.required && (
                  <span className="text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded">
                    Always Included
                  </span>
                )}
              </label>
            ))}
          </div>
        </div>

        {/* Notifications */}
        <div className="bg-white rounded-xl shadow-sm p-6 mb-6">
          <h2 className="text-lg font-semibold mb-4">Notifications</h2>
          
          <label className="flex items-center p-3 border rounded-lg hover:bg-gray-50 cursor-pointer">
            <input
              type="checkbox"
              checked={settings.notifications}
              onChange={e => setSettings({ ...settings, notifications: e.target.checked })}
              className="mr-3 w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"
            />
            <div>
              <p className="font-medium">Email Notifications</p>
              <p className="text-xs text-gray-600">
                Get notified when new candidates match your jobs
              </p>
            </div>
          </label>
        </div>

        {/* Save Button */}
        <button
          onClick={handleSave}
          disabled={saving}
          className="w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 rounded-lg font-semibold hover:from-blue-700 hover:to-purple-700 disabled:opacity-50 flex items-center justify-center gap-2 shadow-lg"
        >
          {saving ? (
            <>
              <Loader2 className="w-5 h-5 animate-spin" />
              Saving...
            </>
          ) : (
            <>
              <Save className="w-5 h-5" />
              Save Settings
            </>
          )}
        </button>
      </div>
    </div>
  );
}
-----------------------------

File: src/app/.DS_Store
Content:
   Bud1            %                       a p idsclbool                      clbool                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                @                                              @                                                @                                                @                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   E   %                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       DSDB                             `                                                     @                                                @                                                @                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
-----------------------------

File: src/app/match/history/page.tsx
Content:
// src/app/match/history/page.tsx
'use client';

import { useState, useEffect } from 'react';
import { useRouter } from 'next/navigation';
import { Clock, Eye, Trash2, Search, Calendar, Users, Target } from 'lucide-react';

interface MatchHistory {
  id: string;
  job_title: string;
  job_description: string;
  match_count: number;
  top_matches: string[]; // candidate IDs
  created_at: string;
}

export default function MatchHistoryPage() {
  const router = useRouter();
  const [history, setHistory] = useState<MatchHistory[]>([]);
  const [loading, setLoading] = useState(true);
  const [searchTerm, setSearchTerm] = useState('');

  useEffect(() => {
    loadHistory();
  }, []);

  async function loadHistory() {
    try {
      // Try to load from localStorage first (fallback)
      const stored = localStorage.getItem('talentplus_match_history');
      if (stored) {
        setHistory(JSON.parse(stored));
      }

      // Then try to load from API (if database is set up)
      const res = await fetch('/api/match/history');
      if (res.ok) {
        const data = await res.json();
        if (data.success && data.data) {
          setHistory(data.data);
        }
      }
    } catch (error) {
      console.error('Failed to load history', error);
    } finally {
      setLoading(false);
    }
  }

  async function deleteMatch(id: string) {
    if (!confirm('Delete this match history?')) return;

    try {
      // Remove from localStorage
      const stored = localStorage.getItem('talentplus_match_history');
      if (stored) {
        const parsed = JSON.parse(stored);
        const filtered = parsed.filter((m: any) => m.id !== id);
        localStorage.setItem('talentplus_match_history', JSON.stringify(filtered));
      }

      // Remove from API (if available)
      await fetch(`/api/match/history/${id}`, { method: 'DELETE' });

      setHistory(prev => prev.filter(m => m.id !== id));
    } catch (error) {
      console.error('Failed to delete', error);
    }
  }

  const filteredHistory = history.filter(match =>
    match.job_title.toLowerCase().includes(searchTerm.toLowerCase())
  );

  if (loading) {
    return (
      <div className="min-h-screen flex items-center justify-center">
        <div className="text-center">
          <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"></div>
          <p className="text-gray-600">Loading match history...</p>
        </div>
      </div>
    );
  }

  return (
    <div className="min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 p-4 md:p-8">
      <div className="max-w-7xl mx-auto">
        {/* Header */}
        <div className="mb-8">
          <h1 className="text-3xl md:text-4xl font-bold text-gray-900 mb-2">Match History</h1>
          <p className="text-gray-600">View and re-run your previous job matches</p>
        </div>

        {/* Search */}
        <div className="bg-white rounded-2xl shadow-lg border p-6 mb-6">
          <div className="relative">
            <Search className="absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5" />
            <input
              type="text"
              placeholder="Search by job title..."
              value={searchTerm}
              onChange={(e) => setSearchTerm(e.target.value)}
              className="w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500"
            />
          </div>
        </div>

        {/* History List */}
        {filteredHistory.length === 0 ? (
          <div className="bg-white rounded-2xl shadow-lg border p-16 text-center">
            <Clock className="w-16 h-16 text-gray-400 mx-auto mb-4" />
            <h2 className="text-2xl font-bold text-gray-900 mb-2">
              {history.length === 0 ? 'No match history yet' : 'No matches found'}
            </h2>
            <p className="text-gray-600 mb-6">
              {history.length === 0
                ? 'Start by creating your first match'
                : 'Try a different search term'}
            </p>
            {history.length === 0 && (
              <button
                onClick={() => router.push('/match')}
                className="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700"
              >
                Create First Match
              </button>
            )}
          </div>
        ) : (
          <div className="space-y-4">
            {filteredHistory.map(match => (
              <div
                key={match.id}
                className="bg-white rounded-xl shadow-sm border p-6 hover:shadow-lg transition"
              >
                <div className="flex flex-col md:flex-row md:items-start md:justify-between gap-4">
                  <div className="flex-1">
                    <div className="flex items-start gap-3 mb-3">
                      <div className="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center">
                        <Target className="w-6 h-6 text-blue-600" />
                      </div>
                      <div className="flex-1">
                        <h3 className="text-xl font-bold text-gray-900 mb-1">
                          {match.job_title}
                        </h3>
                        <div className="flex items-center gap-4 text-sm text-gray-600">
                          <div className="flex items-center">
                            <Users className="w-4 h-4 mr-1" />
                            {match.match_count} matches
                          </div>
                          <div className="flex items-center">
                            <Calendar className="w-4 h-4 mr-1" />
                            {new Date(match.created_at).toLocaleDateString()}
                          </div>
                        </div>
                      </div>
                    </div>

                    <p className="text-gray-700 text-sm line-clamp-2">
                      {match.job_description.substring(0, 200)}...
                    </p>
                  </div>

                  <div className="flex md:flex-col gap-2">
                    <button
                      onClick={() => {
                        // Navigate to match page with pre-filled data
                        sessionStorage.setItem('prefilled_job', match.job_description);
                        router.push('/match');
                      }}
                      className="flex-1 md:flex-initial px-4 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 flex items-center justify-center"
                    >
                      <Eye className="w-4 h-4 md:mr-2" />
                      <span className="hidden md:inline">View Results</span>
                    </button>
                    <button
                      onClick={() => deleteMatch(match.id)}
                      className="flex-1 md:flex-initial px-4 py-2 border border-red-300 text-red-600 rounded-lg hover:bg-red-50 flex items-center justify-center"
                    >
                      <Trash2 className="w-4 h-4 md:mr-2" />
                      <span className="hidden md:inline">Delete</span>
                    </button>
                  </div>
                </div>
              </div>
            ))}
          </div>
        )}
      </div>
    </div>
  );
}

-----------------------------

File: src/app/match/page.tsx
Content:
// src/app/match/page.tsx - PRODUCTION READY
'use client';
import { useState, useEffect } from 'react';
import { Target, Loader2, AlertCircle, Search, CheckCircle, Sparkles } from 'lucide-react';

interface MatchCandidate {
  candidate: any;
  overall_score: number;
  tier: string;
  matched_skills: string[];
  missing_skills: string[];
  explanation: string;
}
// Add proper tier colors type
const tierColors: Record<string, string> = {
  A: 'bg-green-100 text-green-800 border-green-300',
  B: 'bg-blue-100 text-blue-800 border-blue-300',
  C: 'bg-yellow-100 text-yellow-800 border-yellow-300',
  D: 'bg-gray-100 text-gray-800 border-gray-300'
};
interface MatchResult {
  candidate: any;
  overall_score: number;
  tier: string;
  matched_skills: string[];
  missing_skills: string[];
  explanation: string;
}

export default function MatchPage() {
  const [jobDescription, setJobDescription] = useState('');
  const [loading, setLoading] = useState(false);
  const [results, setResults] = useState<any>(null);
  const [error, setError] = useState('');
  const [showExternal, setShowExternal] = useState(false);
  const [extLoading, setExtLoading] = useState(false);
  const [progress, setProgress] = useState(0);
  const [progressStage, setProgressStage] = useState('');
  
  // External search state
  const [extLocation, setExtLocation] = useState('');
  const [extLimit, setExtLimit] = useState(10);

  async function handleMatch() {
    if (!jobDescription.trim() || jobDescription.length < 100) {
      setError('Please enter a detailed job description (minimum 100 characters)');
      return;
    }

    setLoading(true);
    setError('');
    setProgress(0);
    setProgressStage('Initializing...');

    try {
      // Stage 1: Analyzing job
      setProgress(25);
      setProgressStage('Analyzing job requirements with AI...');
      
      const res = await fetch('/api/match', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ jobDescription })
      });

      // Stage 2: Matching candidates
      setProgress(50);
      setProgressStage('Searching candidate database...');
      
      await new Promise(resolve => setTimeout(resolve, 500));
      
      // Stage 3: Scoring
      setProgress(75);
      setProgressStage('Scoring and ranking matches...');
      
      const data = await res.json();
      
      // Stage 4: Complete
      setProgress(100);
      setProgressStage('Complete!');

      if (data.success) {
        setResults(data.data);
        
        // Save to history
        const history = JSON.parse(localStorage.getItem('talentplus_match_history') || '[]');
        history.unshift({
          id: Date.now().toString(),
          job_title: data.data.jobAnalysis?.title || 'Untitled Position',
          job_description: jobDescription,
          match_count: data.data.matches?.length || 0,
          top_matches: data.data.matches?.slice(0, 5).map((m: any) => m.candidate_id) || [],
          created_at: new Date().toISOString()
        });
        localStorage.setItem('talentplus_match_history', JSON.stringify(history.slice(0, 20)));
      } else {
        setError(data.error || 'Matching failed. Please try again.');
      }
    } catch (err: any) {
      setError('Network error. Please check your connection and try again.');
      console.error('Match error:', err);
    } finally {
      setLoading(false);
      setProgress(0);
    }
  }

  async function handleExternalSearch() {
    if (!extLocation.trim()) {
      alert('Please enter a location');
      return;
    }

    setExtLoading(true);
    
    try {
      // Extract skills from job description first
      const skillsRes = await fetch('/api/jobs/analyze', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ description: jobDescription })
      });
      
      const skillsData = await skillsRes.json();
      
      if (!skillsData.success) {
        throw new Error('Failed to analyze job for external search');
      }

      // Search external sources (Apollo)
      const searchRes = await fetch('/api/external-search', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          jobTitle: skillsData.data.title,
          skills: skillsData.data.required_skills,
          location: extLocation,
          limit: extLimit
        })
      });

      const searchData = await searchRes.json();
      
      if (searchData.success) {
        alert(`Successfully added ${searchData.data.added} candidates from external sources!`);
        setShowExternal(false);
        
        // Optionally re-run match with new candidates
        setTimeout(() => handleMatch(), 500);
      } else {
        throw new Error(searchData.error || 'External search failed');
      }
    } catch (err: any) {
      alert(`External search failed: ${err.message}`);
      console.error('External search error:', err);
    } finally {
      setExtLoading(false);
    }
  }

  return (
    <div className="min-h-screen bg-gradient-to-br from-purple-50 via-white to-blue-50 p-4 md:p-8">
      <div className="max-w-7xl mx-auto">
        <div className="text-center mb-8">
          <h1 className="text-3xl md:text-4xl font-bold text-gray-900 mb-2 flex items-center justify-center gap-2">
            <Target className="w-8 h-8 text-purple-600" />
            AI-Powered Candidate Matching
          </h1>
          <p className="text-gray-600">Paste a job description to find your top matches instantly</p>
        </div>

        {!results ? (
          <div className="bg-white rounded-2xl shadow-xl p-6 md:p-8">
            <label className="block text-sm font-medium text-gray-700 mb-3">
              Job Description <span className="text-red-500">*</span>
            </label>
            <textarea
              value={jobDescription}
              onChange={(e) => setJobDescription(e.target.value)}
              placeholder="Paste the complete job description here...

Example:
We're looking for a Senior Full-Stack Developer with 5+ years experience in React, Node.js, and PostgreSQL. Must have experience with AWS, Docker, and CI/CD pipelines. Strong communication skills required. Remote position available."
              className="w-full h-80 md:h-96 p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 resize-none text-gray-900 font-mono text-sm"
            />

            <div className="flex flex-col md:flex-row justify-between items-center mt-6 gap-4">
              <div className="flex items-center gap-2 text-sm">
                <span className={`${jobDescription.length >= 100 ? 'text-green-600' : 'text-gray-500'}`}>
                  {jobDescription.length} characters
                </span>
                {jobDescription.length >= 100 && (
                  <CheckCircle className="w-4 h-4 text-green-600" />
                )}
              </div>
              
              <div className="flex gap-3 w-full md:w-auto">
                <button
                  onClick={() => setShowExternal(true)}
                  disabled={!jobDescription || jobDescription.length < 100}
                  className="flex-1 md:flex-initial px-4 py-3 border-2 border-blue-300 bg-blue-50 text-blue-700 rounded-lg hover:bg-blue-100 disabled:opacity-50 flex items-center justify-center gap-2 font-medium"
                >
                  <Search className="w-5 h-5" />
                  Find External Candidates
                </button>
                
                <button
                  onClick={handleMatch}
                  disabled={loading || jobDescription.length < 100}
                  className="flex-1 md:flex-initial px-6 py-3 bg-gradient-to-r from-purple-600 to-blue-600 text-white font-semibold rounded-lg hover:from-purple-700 hover:to-blue-700 disabled:opacity-50 flex items-center justify-center gap-2 shadow-lg"
                >
                  {loading ? (
                    <>
                      <Loader2 className="w-5 h-5 animate-spin" />
                      Matching...
                    </>
                  ) : (
                    <>
                      <Sparkles className="w-5 h-5" />
                      Match Candidates
                    </>
                  )}
                </button>
              </div>
            </div>

            {/* Progress Indicator */}
            {loading && (
              <div className="mt-8 p-6 bg-gradient-to-br from-blue-50 to-purple-50 rounded-xl border border-blue-200">
                <div className="flex items-center gap-3 mb-4">
                  <div className="relative">
                    <div className="w-12 h-12 border-4 border-blue-200 rounded-full"></div>
                    <div className="absolute top-0 left-0 w-12 h-12 border-4 border-purple-600 rounded-full border-t-transparent animate-spin"></div>
                  </div>
                  <div>
                    <h3 className="font-semibold text-lg text-gray-900">Processing Your Match</h3>
                    <p className="text-sm text-gray-600">{progressStage}</p>
                  </div>
                </div>
                
                <div className="space-y-3 mb-4">
                  <div className="flex items-center gap-2 text-sm">
                    <div className={`w-2 h-2 rounded-full ${progress >= 25 ? 'bg-green-500' : 'bg-gray-300'}`} />
                    <span className={progress >= 25 ? 'text-green-700 font-medium' : 'text-gray-500'}>
                      Analyzing Job Description
                    </span>
                  </div>
                  <div className="flex items-center gap-2 text-sm">
                    <div className={`w-2 h-2 rounded-full ${progress >= 50 ? 'bg-green-500' : 'bg-gray-300'}`} />
                    <span className={progress >= 50 ? 'text-green-700 font-medium' : 'text-gray-500'}>
                      Searching Candidates
                    </span>
                  </div>
                  <div className="flex items-center gap-2 text-sm">
                    <div className={`w-2 h-2 rounded-full ${progress >= 75 ? 'bg-green-500' : 'bg-gray-300'}`} />
                    <span className={progress >= 75 ? 'text-green-700 font-medium' : 'text-gray-500'}>
                      Scoring & Ranking
                    </span>
                  </div>
                  <div className="flex items-center gap-2 text-sm">
                    <div className={`w-2 h-2 rounded-full ${progress >= 100 ? 'bg-green-500' : 'bg-gray-300'}`} />
                    <span className={progress >= 100 ? 'text-green-700 font-medium' : 'text-gray-500'}>
                      Complete
                    </span>
                  </div>
                </div>

                <div className="w-full bg-gray-200 rounded-full h-3">
                  <div 
                    className="bg-gradient-to-r from-blue-500 to-purple-600 h-3 rounded-full transition-all duration-500"
                    style={{ width: `${progress}%` }}
                  />
                </div>
                <p className="text-center text-sm text-gray-600 mt-2">{Math.round(progress)}% Complete</p>
              </div>
            )}

            {error && (
              <div className="mt-6 p-4 bg-red-50 text-red-800 border border-red-200 rounded-lg flex items-start gap-3">
                <AlertCircle className="w-5 h-5 flex-shrink-0 mt-0.5" />
                <div>
                  <p className="font-medium">Error</p>
                  <p className="text-sm">{error}</p>
                </div>
              </div>
            )}
          </div>
        ) : (
          <ResultsView results={results} onNewSearch={() => setResults(null)} />
        )}

        {/* External Search Modal */}
        {showExternal && (
          <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4">
            <div className="bg-white rounded-2xl p-6 max-w-md w-full max-h-[80vh] overflow-y-auto">
              <h3 className="text-xl font-bold mb-4 flex items-center gap-2">
                <Search className="w-6 h-6 text-blue-600" />
                Search External Talent Databases
              </h3>
              
              <p className="text-sm text-gray-600 mb-4">
                Connect to Apollo.io and other sources to find candidates beyond your database
              </p>
              
              <div className="space-y-4">
                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-2">
                    Location <span className="text-red-500">*</span>
                  </label>
                  <input
                    placeholder="e.g., London, Remote, Belgium"
                    value={extLocation}
                    onChange={e => setExtLocation(e.target.value)}
                    className="w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500"
                  />
                </div>
                
                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-2">
                    Maximum Results
                  </label>
                  <select
                    value={extLimit}
                    onChange={e => setExtLimit(Number(e.target.value))}
                    className="w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500"
                  >
                    <option value={5}>5 candidates</option>
                    <option value={10}>10 candidates</option>
                    <option value={20}>20 candidates</option>
                    <option value={50}>50 candidates</option>
                  </select>
                </div>
                
                <button
                  onClick={handleExternalSearch}
                  disabled={extLoading || !extLocation.trim()}
                  className="w-full bg-gradient-to-r from-green-500 to-blue-600 text-white p-3 rounded-lg font-semibold hover:from-green-600 hover:to-blue-700 disabled:opacity-50 flex items-center justify-center gap-2"
                >
                  {extLoading ? (
                    <>
                      <Loader2 className="w-5 h-5 animate-spin" />
                      Searching...
                    </>
                  ) : (
                    <>
                      <Search className="w-5 h-5" />
                      Find {extLimit} Candidates
                    </>
                  )}
                </button>
              </div>
              
              <button 
                onClick={() => setShowExternal(false)} 
                className="mt-4 text-gray-500 hover:text-gray-700 underline w-full text-center"
              >
                Cancel
              </button>
            </div>
          </div>
        )}
      </div>
    </div>
  );
}

function ResultsView({ results, onNewSearch }: any) {
  return (
    <div>
      <div className="flex justify-between items-center mb-6">
        <h2 className="text-2xl font-bold text-gray-900">
          {results.matches?.length || 0} Matches Found
        </h2>
        <button
          onClick={onNewSearch}
          className="px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 font-medium"
        >
          New Search
        </button>
      </div>

      {results.jobAnalysis && (
        <div className="bg-white rounded-xl shadow-sm p-6 mb-6 border">
          <h3 className="font-bold text-gray-900 mb-3 flex items-center gap-2">
            <CheckCircle className="w-5 h-5 text-green-600" />
            Job Requirements Identified
          </h3>
          <div className="grid grid-cols-2 md:grid-cols-4 gap-4 text-sm">
            <div>
              <span className="text-gray-600">Experience Required:</span>
              <p className="font-medium">{results.jobAnalysis.min_experience}+ years</p>
            </div>
            <div>
              <span className="text-gray-600">Seniority:</span>
              <p className="font-medium capitalize">{results.jobAnalysis.seniority_level}</p>
            </div>
            <div>
              <span className="text-gray-600">Skills Needed:</span>
              <p className="font-medium">{results.jobAnalysis.required_skills?.length || 0}</p>
            </div>
            <div>
              <span className="text-gray-600">Work Type:</span>
              <p className="font-medium capitalize">{results.jobAnalysis.location_type}</p>
            </div>
          </div>
        </div>
      )}

      <div className="space-y-4">
        {results.matches?.map((match: MatchCandidate, index: number) => (
          <div key={index} className="bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-lg transition-shadow">
            <div className="flex justify-between items-start mb-4">
              <div className="flex items-center gap-4">
                <div className="w-10 h-10 bg-purple-100 text-purple-700 rounded-full flex items-center justify-center font-bold">
                  #{index + 1}
                </div>
                <div>
                  <h3 className="text-lg font-bold text-gray-900">{match.candidate?.name || 'Unknown'}</h3>
                  <p className="text-gray-600">{match.candidate?.title}</p>
                </div>
              </div>
              <div className="text-right">
                <div className="text-3xl font-bold text-purple-600 mb-1">{match.overall_score}%</div>
                <span className={`px-3 py-1 rounded-full text-xs font-bold border ${
                  tierColors[match.tier] || tierColors.D
                }`}>
                  Tier {match.tier}
                </span>
              </div>
            </div>

            <p className="text-gray-700 mb-4">{match.explanation}</p>

            {match.matched_skills?.length > 0 && (
              <div className="mb-3">
                <p className="text-sm font-medium text-gray-700 mb-2">✓ Matched Skills:</p>
                <div className="flex flex-wrap gap-1">
                  {match.matched_skills.map((skill: string, i: number) => (
                    <span key={i} className="px-2 py-1 bg-green-50 text-green-700 text-xs rounded-full border border-green-200">
                      {skill}
                    </span>
                  ))}
                </div>
              </div>
            )}

            {match.missing_skills?.length > 0 && (
              <div>
                <p className="text-sm font-medium text-gray-700 mb-2">✗ Missing Skills:</p>
                <div className="flex flex-wrap gap-1">
                  {match.missing_skills.map((skill: string, i: number) => (
                    <span key={i} className="px-2 py-1 bg-red-50 text-red-700 text-xs rounded-full border border-red-200">
                      {skill}
                    </span>
                  ))}
                </div>
              </div>
            )}
          </div>
        ))}
      </div>
    </div>
  );
}
-----------------------------

File: src/app/library/page.tsx
Content:
// src/app/library/page.tsx - FINAL PRODUCTION VERSION
'use client';

import { useState, useEffect, useMemo } from 'react';
import Link from 'next/link';
import { useRouter, useSearchParams } from 'next/navigation';
import {
  Upload, Search, Filter, Users, RefreshCw, Download,
  Eye, Trash2, MapPin, Clock, Star, CheckCircle,
  AlertCircle, Loader2, X, ChevronDown, ChevronUp, Shield, AlertTriangle
} from 'lucide-react';
import { Candidate } from '@/lib/types';

// Upload Modal Component
function UploadModal({ onClose, onUploadSuccess }: { onClose: () => void; onUploadSuccess: () => void }) {
  const [uploading, setUploading] = useState(false);
  const [message, setMessage] = useState<{ type: 'success' | 'error'; text: string } | null>(null);

  async function handleFileUpload(file: File | null) {
    if (!file) return;
    
    if (file.size > 10 * 1024 * 1024) {
      setMessage({ type: 'error', text: 'File too large (max 10MB)' });
      return;
    }
    
    const validTypes = [
      'application/pdf',
      'application/vnd.openxmlformats-officedocument.wordprocessingml.document',
      'text/plain'
    ];
    
    if (!validTypes.includes(file.type)) {
      setMessage({ type: 'error', text: 'Invalid file type. Use PDF, DOCX, or TXT' });
      return;
    }

    setUploading(true);
    setMessage(null);
    
    const formData = new FormData();
    formData.append('file', file);

    try {
      const res = await fetch('/api/parse', { method: 'POST', body: formData });
      const data = await res.json();
      
      if (data.success) {
        setMessage({ type: 'success', text: `✓ ${data.data.name} added successfully!` });
        setTimeout(() => {
          onUploadSuccess();
          onClose();
        }, 1500);
      } else {
        setMessage({ type: 'error', text: data.error || 'Upload failed' });
      }
    } catch (err) {
      setMessage({ type: 'error', text: 'Network error. Please try again.' });
    } finally {
      setUploading(false);
    }
  }

  function handleDrop(e: React.DragEvent) {
    e.preventDefault();
    const file = e.dataTransfer.files[0];
    if (file) handleFileUpload(file);
  }

  return (
    <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
      <div className="bg-white rounded-2xl shadow-xl w-full max-w-md">
        <div className="flex justify-between items-center p-6 border-b">
          <h3 className="text-xl font-bold">Upload Candidate Resume</h3>
          <button onClick={onClose} className="text-gray-500 hover:text-gray-700">
            <X className="w-5 h-5" />
          </button>
        </div>

        <div
          onDrop={handleDrop}
          onDragOver={(e) => e.preventDefault()}
          className="border-2 border-dashed border-gray-300 rounded-xl p-12 text-center m-6 hover:border-blue-500 transition-colors"
        >
          {uploading ? (
            <div className="space-y-4">
              <Loader2 className="w-12 h-12 text-blue-600 animate-spin mx-auto" />
              <p className="text-gray-700 font-medium">Processing with AI...</p>
              <p className="text-sm text-gray-500">Extracting candidate information</p>
              <div className="w-full bg-gray-200 rounded-full h-2 mt-4">
                <div className="bg-blue-600 h-2 rounded-full animate-pulse" style={{ width: '70%' }}></div>
              </div>
            </div>
          ) : (
            <>
              <Upload className="w-12 h-12 text-gray-400 mx-auto mb-4" />
              <p className="text-gray-700 mb-2 font-medium">Drop candidate resume here</p>
              <p className="text-sm text-gray-500 mb-4">or click to browse</p>
              <p className="text-xs text-gray-400 mb-4">PDF, DOCX, or TXT (max 10MB)</p>
              <input
                type="file"
                accept=".pdf,.docx,.txt"
                onChange={(e) => handleFileUpload(e.target.files?.[0] || null)}
                className="hidden"
                id="modal-file"
              />
              <label
                htmlFor="modal-file"
                className="px-6 py-3 bg-blue-600 text-white rounded-lg cursor-pointer hover:bg-blue-700 inline-block transition"
              >
                Choose File
              </label>
            </>
          )}
        </div>

        {message && (
          <div className={`mx-6 mb-6 p-4 rounded-lg ${
            message.type === 'success' 
              ? 'bg-green-50 text-green-800 border border-green-200' 
              : 'bg-red-50 text-red-800 border border-red-200'
          }`}>
            <div className="flex items-center">
              {message.type === 'success' ? (
                <CheckCircle className="w-5 h-5 mr-2" />
              ) : (
                <AlertCircle className="w-5 h-5 mr-2" />
              )}
              <p className="font-medium">{message.text}</p>
            </div>
          </div>
        )}
      </div>
    </div>
  );
}

export default function LibraryPage() {
  const router = useRouter();
  const searchParams = useSearchParams();
  const filterParam = searchParams.get('filter');
  
  const [uploading, setUploading] = useState(false);
  const [candidates, setCandidates] = useState<Candidate[]>([]);
  const [loading, setLoading] = useState(true);
  const [searchTerm, setSearchTerm] = useState('');
  const [selectedSkills, setSelectedSkills] = useState<string[]>([]);
  const [statusFilter, setStatusFilter] = useState<string>('all');
  const [authenticityFilter, setAuthenticityFilter] = useState<string>('all');
  const [sortBy, setSortBy] = useState<string>('created_at');
  const [sortDirection, setSortDirection] = useState<'asc' | 'desc'>('desc');
  const [selectedCandidates, setSelectedCandidates] = useState<string[]>([]);
  const [showUploadModal, setShowUploadModal] = useState(false);
  const [showFilters, setShowFilters] = useState(false);

  useEffect(() => {
    loadCandidates();
    
    if (filterParam === 'suspicious') {
      setAuthenticityFilter('suspicious');
      setShowFilters(true);
    }
  }, [filterParam]);

  async function loadCandidates() {
    try {
      setLoading(true);
      const response = await fetch('/api/candidates');
      if (response.ok) {
        const data = await response.json();
        setCandidates(data.data || data.candidates || []);
      }
    } catch (error) {
      console.error('Load error:', error);
    } finally {
      setLoading(false);
    }
  }

  async function handleBulkUpload(e: React.ChangeEvent<HTMLInputElement>) {
    const files = Array.from(e.target.files || []);
    if (files.length === 0) return;
    if (files.length > 50) {
      alert('Maximum 50 files allowed');
      return;
    }
    
    setUploading(true);
    const formData = new FormData();
    files.forEach(file => formData.append('files', file));
  
    try {
      const res = await fetch('/api/bulk', { method: 'POST', body: formData });
      const data = await res.json();
      if (data.success) {
        alert(`Successfully uploaded ${data.data.succeeded} of ${data.data.total} files`);
        loadCandidates();
      } else {
        alert('Bulk upload failed: ' + data.error);
      }
    } catch (err) {
      alert('Network error during bulk upload');
    } finally {
      setUploading(false);
    }
  }

  const allSkills = useMemo(() => {
    const skills = new Set<string>();
    candidates.forEach(c => {
      c.skills?.forEach(skill => skills.add(skill));
    });
    return Array.from(skills).sort();
  }, [candidates]);

  const filteredCandidates = useMemo(() => {
    let filtered = candidates.filter(candidate => {
      if (searchTerm) {
        const term = searchTerm.toLowerCase();
        const matchesSearch = 
          candidate.name.toLowerCase().includes(term) ||
          candidate.title?.toLowerCase().includes(term) ||
          candidate.email?.toLowerCase().includes(term) ||
          candidate.skills.some(s => s.toLowerCase().includes(term));
        
        if (!matchesSearch) return false;
      }

      if (selectedSkills.length > 0) {
        const hasAllSkills = selectedSkills.every(skill =>
          candidate.skills.some(s => s.toLowerCase() === skill.toLowerCase())
        );
        if (!hasAllSkills) return false;
      }

      if (statusFilter !== 'all' && candidate.parse_status !== statusFilter) {
        return false;
      }

      if (authenticityFilter !== 'all') {
        const score = candidate.authenticity_score ?? null;
        if (authenticityFilter === 'high' && (score === null || score < 75)) return false;
        if (authenticityFilter === 'medium' && (score === null || score < 50 || score >= 75)) return false;
        if (authenticityFilter === 'suspicious' && (score === null || score >= 50)) return false;
        if (authenticityFilter === 'unchecked' && score !== null) return false;
      }

      return true;
    });

    filtered.sort((a, b) => {
      let comparison = 0;
      
      switch (sortBy) {
        case 'name':
          comparison = a.name.localeCompare(b.name);
          break;
        case 'confidence':
          comparison = a.parse_confidence - b.parse_confidence;
          break;
        case 'experience':
          comparison = a.years_of_experience - b.years_of_experience;
          break;
        case 'authenticity':
          comparison = (a.authenticity_score || 0) - (b.authenticity_score || 0);
          break;
        case 'created_at':
        default:
          comparison = new Date(a.created_at).getTime() - new Date(b.created_at).getTime();
      }
      
      return sortDirection === 'asc' ? comparison : -comparison;
    });

    return filtered;
  }, [candidates, searchTerm, selectedSkills, statusFilter, authenticityFilter, sortBy, sortDirection]);

  const stats = useMemo(() => ({
    total: candidates.length,
    filtered: filteredCandidates.length,
    highQuality: candidates.filter(c => c.parse_confidence >= 80).length,
    needsReview: candidates.filter(c => c.parse_status === 'needs_review').length,
    avgConfidence: candidates.length > 0
      ? Math.round(candidates.reduce((sum, c) => sum + c.parse_confidence, 0) / candidates.length)
      : 0,
    highAuthenticity: candidates.filter(c => (c.authenticity_score || 0) >= 75).length,
    suspicious: candidates.filter(c => c.authenticity_score && c.authenticity_score < 50).length
  }), [candidates, filteredCandidates]);

  async function handleExport() {
    if (selectedCandidates.length === 0) {
      alert('Please select candidates to export');
      return;
    }

    try {
      const response = await fetch('/api/candidates/export', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ ids: selectedCandidates, format: 'csv' })
      });

      if (response.ok) {
        const blob = await response.blob();
        const url = window.URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `candidates_export_${Date.now()}.csv`;
        document.body.appendChild(a);
        a.click();
        window.URL.revokeObjectURL(url);
        document.body.removeChild(a);
        setSelectedCandidates([]);
      }
    } catch (error) {
      alert('Export failed. Please try again.');
    }
  }

  const toggleCandidateSelection = (id: string) => {
    setSelectedCandidates(prev =>
      prev.includes(id) ? prev.filter(cid => cid !== id) : [...prev, id]
    );
  };

  const toggleSkillFilter = (skill: string) => {
    setSelectedSkills(prev =>
      prev.includes(skill) ? prev.filter(s => s !== skill) : [...prev, skill]
    );
  };

  const clearAllFilters = () => {
    setSearchTerm('');
    setSelectedSkills([]);
    setStatusFilter('all');
    setAuthenticityFilter('all');
  };

  if (loading) {
    return (
      <div className="min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50">
        <div className="text-center">
          <Loader2 className="w-12 h-12 text-blue-600 animate-spin mx-auto mb-4" />
          <p className="text-gray-600">Loading candidate library...</p>
        </div>
      </div>
    );
  }

  return (
    <div className="min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50">
      <div className="max-w-8xl mx-auto px-4 py-8 pb-24 md:pb-8">
        {/* Header */}
        <div className="mb-8">
          <div className="flex flex-col md:flex-row md:items-center md:justify-between mb-6 gap-4">
            <div>
              <h1 className="text-3xl md:text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent">
                Candidate Library
              </h1>
              <p className="text-gray-600 mt-2">
                {stats.filtered} of {stats.total} candidates
                {searchTerm || selectedSkills.length > 0 || authenticityFilter !== 'all' ? ' (filtered)' : ''}
              </p>
            </div>
            <div className="flex flex-wrap gap-3">
              <button
                onClick={() => document.getElementById('bulk-upload')?.click()}
                disabled={uploading}
                className="inline-flex items-center px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition disabled:opacity-50"
              >
                <Upload className="w-4 h-4 mr-2" />
                {uploading ? 'Uploading...' : 'Bulk Upload'}
              </button>
              <input
                id="bulk-upload"
                type="file"
                multiple
                accept=".pdf,.docx,.txt"
                onChange={handleBulkUpload}
                className="hidden"
              />
              <button
                onClick={loadCandidates}
                className="inline-flex items-center px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition"
              >
                <RefreshCw className="w-4 h-4 mr-2" />
                Refresh
              </button>
              <button
                onClick={() => setShowUploadModal(true)}
                className="inline-flex items-center px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:from-blue-700 hover:to-purple-700 shadow-md transition"
              >
                <Upload className="w-4 h-4 mr-2" />
                Add Candidate
              </button>
            </div>
          </div>

          {/* Stats Cards */}
          <div className="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-4 mb-6">
            <div className="bg-white rounded-xl p-4 shadow-sm border">
              <div className="text-sm text-gray-600">Total</div>
              <div className="text-2xl font-bold text-blue-600">{stats.total}</div>
            </div>
            <div className="bg-white rounded-xl p-4 shadow-sm border">
              <div className="text-sm text-gray-600">High Quality</div>
              <div className="text-2xl font-bold text-green-600">{stats.highQuality}</div>
            </div>
            <div className="bg-white rounded-xl p-4 shadow-sm border">
              <div className="text-sm text-gray-600">Avg Quality</div>
              <div className="text-2xl font-bold text-purple-600">{stats.avgConfidence}%</div>
            </div>
            <div className="bg-white rounded-xl p-4 shadow-sm border">
              <div className="text-sm text-gray-600">Needs Review</div>
              <div className="text-2xl font-bold text-orange-600">{stats.needsReview}</div>
            </div>
            <div className="bg-white rounded-xl p-4 shadow-sm border cursor-pointer hover:shadow-md transition"
              onClick={() => {
                setAuthenticityFilter('high');
                setShowFilters(true);
              }}>
              <div className="text-sm text-gray-600 flex items-center gap-1">
                <Shield className="w-3 h-3" />
                Verified
              </div>
              <div className="text-2xl font-bold text-green-600">{stats.highAuthenticity}</div>
            </div>
            <div className="bg-white rounded-xl p-4 shadow-sm border cursor-pointer hover:shadow-md transition"
              onClick={() => {
                setAuthenticityFilter('suspicious');
                setShowFilters(true);
              }}>
              <div className="text-sm text-gray-600 flex items-center gap-1">
                <AlertTriangle className="w-3 h-3" />
                Flagged
              </div>
              <div className="text-2xl font-bold text-red-600">{stats.suspicious}</div>
            </div>
            <div className="bg-white rounded-xl p-4 shadow-sm border">
              <div className="text-sm text-gray-600">Showing</div>
              <div className="text-2xl font-bold text-indigo-600">{stats.filtered}</div>
            </div>
          </div>
        </div>

        {/* Controls */}
        <div className="bg-white rounded-2xl shadow-lg border p-6 mb-6">
          <div className="flex flex-col md:flex-row md:items-center gap-4">
            <div className="flex-1">
              <div className="relative">
                <Search className="absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5" />
                <input
                  type="text"
                  placeholder="Search by name, skills, or title..."
                  value={searchTerm}
                  onChange={(e) => setSearchTerm(e.target.value)}
                  className="w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                />
              </div>
            </div>

            <select
              value={sortBy}
              onChange={(e) => setSortBy(e.target.value)}
              className="px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500"
            >
              <option value="created_at">Most Recent</option>
              <option value="name">Name A-Z</option>
              <option value="confidence">Parse Quality</option>
              <option value="authenticity">Authenticity</option>
              <option value="experience">Experience</option>
            </select>

            <button
              onClick={() => setSortDirection(prev => prev === 'asc' ? 'desc' : 'asc')}
              className="p-3 border rounded-lg hover:bg-gray-50 transition"
            >
              {sortDirection === 'asc' ? <ChevronUp className="w-5 h-5" /> : <ChevronDown className="w-5 h-5" />}
            </button>

            <button
              onClick={() => setShowFilters(!showFilters)}
              className="inline-flex items-center px-4 py-3 border rounded-lg hover:bg-gray-50 transition"
            >
              <Filter className="w-5 h-5 mr-2" />
              Filters
              {(selectedSkills.length > 0 || statusFilter !== 'all' || authenticityFilter !== 'all') && (
                <span className="ml-2 px-2 py-0.5 bg-blue-100 text-blue-800 text-xs rounded-full">
                  {selectedSkills.length + (statusFilter !== 'all' ? 1 : 0) + (authenticityFilter !== 'all' ? 1 : 0)}
                </span>
              )}
            </button>
          </div>

          {/* Advanced Filters */}
          {showFilters && (
            <div className="mt-4 pt-4 border-t space-y-4">
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">Filter by Skills</label>
                <div className="flex flex-wrap gap-2">
                  {allSkills.slice(0, 15).map(skill => (
                    <button
                      key={skill}
                      onClick={() => toggleSkillFilter(skill)}
                      className={`px-3 py-1 rounded-full text-sm transition ${
                        selectedSkills.includes(skill)
                          ? 'bg-blue-600 text-white'
                          : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                      }`}
                    >
                      {skill}
                    </button>
                  ))}
                  {allSkills.length > 15 && (
                    <span className="px-3 py-1 text-sm text-gray-500">
                      +{allSkills.length - 15} more
                    </span>
                  )}
                </div>
              </div>

              <div className="flex items-center gap-4 flex-wrap">
                <div>
                  <label className="block text-xs text-gray-600 mb-1">Parse Status</label>
                  <select
                    value={statusFilter}
                    onChange={(e) => setStatusFilter(e.target.value)}
                    className="px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 text-sm"
                  >
                    <option value="all">All Statuses</option>
                    <option value="completed">Completed</option>
                    <option value="needs_review">Needs Review</option>
                    <option value="processing">Processing</option>
                  </select>
                </div>

                <div>
                  <label className="block text-xs text-gray-600 mb-1">Resume Authenticity</label>
                  <select
                    value={authenticityFilter}
                    onChange={(e) => setAuthenticityFilter(e.target.value)}
                    className="px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 text-sm"
                  >
                    <option value="all">All Levels</option>
                    <option value="high">High (75%+)</option>
                    <option value="medium">Medium (50-75%)</option>
                    <option value="suspicious">Suspicious (&lt;50%)</option>
                    <option value="unchecked">Not Checked</option>
                  </select>
                </div>

                <div className="flex items-end">
                  <button
                    onClick={clearAllFilters}
                    className="text-sm text-blue-600 hover:text-blue-700 font-medium px-4 py-2"
                  >
                    Clear All Filters
                  </button>
                </div>
              </div>
            </div>
          )}

          {/* Selected Actions */}
          {selectedCandidates.length > 0 && (
            <div className="mt-4 pt-4 border-t flex flex-col md:flex-row md:items-center justify-between gap-4">
              <div className="text-sm text-gray-600">
                <strong>{selectedCandidates.length}</strong> candidate{selectedCandidates.length !== 1 ? 's' : ''} selected
              </div>
              <div className="flex gap-2">
                <button
                  onClick={handleExport}
                  className="inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition"
                >
                  <Download className="w-4 h-4 mr-2" />
                  Export to CSV
                </button>
                <button
                  onClick={() => setSelectedCandidates([])}
                  className="px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition"
                >
                  Clear Selection
                </button>
              </div>
            </div>
          )}
        </div>

        {/* Candidates Grid */}
        {filteredCandidates.length === 0 ? (
          <div className="bg-white rounded-2xl shadow-lg border p-16 text-center">
            <Users className="w-16 h-16 text-gray-400 mx-auto mb-4" />
            <h3 className="text-2xl font-bold text-gray-900 mb-2">
              {candidates.length === 0 ? 'No candidates yet' : 'No matches found'}
            </h3>
            <p className="text-gray-600 mb-6">
              {candidates.length === 0
                ? 'Upload candidate resumes to build your talent library'
                : 'Try adjusting your filters or search terms'}
            </p>
            <div className="flex justify-center gap-4">
              {candidates.length === 0 ? (
                <button
                  onClick={() => setShowUploadModal(true)}
                  className="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2"
                >
                  <Upload className="w-5 h-5" />
                  Upload First Resume
                </button>
              ) : (
                <button
                  onClick={clearAllFilters}
                  className="px-6 py-3 border border-gray-300 rounded-lg hover:bg-gray-50"
                >
                  Clear Filters
                </button>
              )}
            </div>
          </div>
        ) : (
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            {filteredCandidates.map(candidate => (
              <div
                key={candidate.id}
                className={`bg-white rounded-2xl shadow-lg border p-6 hover:shadow-xl transition-all ${
                  selectedCandidates.includes(candidate.id) ? 'ring-2 ring-blue-500' : ''
                }`}
              >
                <div className="flex items-start justify-between mb-4">
                  <input
                    type="checkbox"
                    checked={selectedCandidates.includes(candidate.id)}
                    onChange={(e) => {
                      e.stopPropagation();
                      toggleCandidateSelection(candidate.id);
                    }}
                    className="mt-1 w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"
                  />
                  <div className="flex-1 mx-3">
                    <h3 className="font-bold text-lg text-gray-900 mb-1">{candidate.name}</h3>
                    <p className="text-sm text-gray-600">{candidate.title || 'No title specified'}</p>
                  </div>
                  <div className="text-right">
                    <div className="text-2xl font-bold text-purple-600">{candidate.parse_confidence}%</div>
                    <span className={`px-2 py-1 rounded-full text-xs font-medium ${
                      candidate.parse_confidence >= 80
                        ? 'bg-green-100 text-green-800'
                        : candidate.parse_confidence >= 60
                        ? 'bg-yellow-100 text-yellow-800'
                        : 'bg-red-100 text-red-800'
                    }`}>
                      {candidate.parse_confidence >= 80 ? 'A' : candidate.parse_confidence >= 60 ? 'B' : 'C'}
                    </span>
                  </div>
                </div>

                {candidate.location && (
                  <div className="flex items-center text-sm text-gray-600 mb-3">
                    <MapPin className="w-4 h-4 mr-1" />
                    {candidate.location}
                  </div>
                )}

                {/* Authenticity Badge */}
                {candidate.authenticity_score !== null && candidate.authenticity_score !== undefined && (
                  <div className="mb-3 p-2 bg-gray-50 rounded-lg">
                    <div className="flex items-center justify-between">
                      <div className="flex items-center gap-2">
                        <Shield className={`w-4 h-4 ${
                          candidate.authenticity_score >= 75 ? 'text-green-600' :
                          candidate.authenticity_score >= 50 ? 'text-yellow-600' :
                          'text-red-600'
                        }`} />
                        <span className="text-xs font-medium text-gray-700">
                          Authenticity: {candidate.authenticity_score}%
                        </span>
                      </div>
                      <Link 
                        href={`/candidate/${candidate.id}/authenticity`}
                        className="text-xs text-blue-600 hover:underline"
                        onClick={(e) => e.stopPropagation()}
                      >
                        Report →
                      </Link>
                    </div>
                  </div>
                )}

                <div className="mb-4">
                  <div className="text-xs font-medium text-gray-700 mb-2">Skills</div>
                  <div className="flex flex-wrap gap-1">
                    {candidate.skills.slice(0, 5).map(skill => (
                      <span key={skill} className="px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded">
                        {skill}
                      </span>
                    ))}
                    {candidate.skills.length > 5 && (
                      <span className="px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded">
                        +{candidate.skills.length - 5}
                      </span>
                    )}
                  </div>
                </div>

                <div className="flex items-center justify-between pt-4 border-t">
                  <div className="flex items-center text-xs text-gray-500">
                    <Clock className="w-3 h-3 mr-1" />
                    {new Date(candidate.created_at).toLocaleDateString()}
                  </div>
                  <div className="flex space-x-2">
                    <button
                      onClick={() => router.push(`/candidate/${candidate.id}`)}
                      className="p-2 hover:bg-blue-50 rounded-lg transition"
                      title="View Full Profile"
                    >
                      <Eye className="w-4 h-4 text-blue-600" />
                    </button>
                  </div>
                </div>
              </div>
            ))}
          </div>
        )}
      </div>

      {showUploadModal && (
        <UploadModal
          onClose={() => setShowUploadModal(false)}
          onUploadSuccess={loadCandidates}
        />
      )}
    </div>
  );
}
-----------------------------

File: src/app/dashboard/owner/page.tsx
Content:

-----------------------------

File: src/app/dashboard/recruiter/page.tsx
Content:
import React, { useState } from 'react';
import {
  Briefcase, Users, DollarSign, TrendingUp, Clock, Target, Calendar,
  CheckCircle, AlertCircle, Phone, Mail, Video, Send, Eye, Edit2,
  Filter, Search, Plus, MoreVertical, Flag, Star, MessageSquare,
  FileText, Download, Bell, Settings, ChevronRight, Activity,
  BarChart3, PieChart, Award, Zap, RefreshCw, ArrowUp, ArrowDown,
  UserCheck, ClipboardCheck, PhoneCall, MapPin, DollarSignIcon,
  Globe, Building2, PlayCircle, PauseCircle, XCircle, Circle
} from 'lucide-react';

// ============================================================================
// ROLE-BASED DASHBOARD ROUTER
// ============================================================================
export default function DashboardRouter({ userRole }: { userRole: 'recruiter' | 'team_lead' | 'owner' }) {
  switch (userRole) {
    case 'recruiter':
      return <RecruiterDashboard />;
    case 'team_lead':
      return <TeamLeadDashboard />;
    case 'owner':
      return <OwnerDashboard />;
    default:
      return <RecruiterDashboard />;
  }
}

// ============================================================================
// RECRUITER DASHBOARD
// ============================================================================
function RecruiterDashboard() {
  const recruiterData = {
    name: "Sarah Johnson",
    metrics: {
      active_jobs: 8,
      submissions_this_week: 12,
      interviews_scheduled: 2,
      pending_followups: 5,
      screening_calls_today: 3,
      awaiting_review: 4
    },
    activeJobs: [
      {
        id: 'JOB-045',
        title: 'Senior Java Developer',
        client: 'TechCorp Solutions',
        priority: 'high',
        submissions: 3,
        interviews: 1,
        last_action: '2 hours ago',
        status: 'active',
        health_score: 85,
        deadline: '2025-01-20',
        pipeline: { sourced: 8, screening: 3, submitted: 3, interview: 1, offer: 0 }
      },
      {
        id: 'JOB-038',
        title: 'Senior DevOps Engineer',
        client: 'DataFlow Inc',
        priority: 'medium',
        submissions: 0,
        interviews: 0,
        last_action: '3 days ago',
        status: 'active',
        health_score: 45,
        deadline: '2025-01-25',
        pipeline: { sourced: 2, screening: 0, submitted: 0, interview: 0, offer: 0 }
      }
    ],
    todayTasks: [
      { id: '1', type: 'call', candidate: 'Mike Chen', action: 'Rate confirmation', priority: 'high', time: '10:00 AM', done: false },
      { id: '2', type: 'email', candidate: 'Jane Doe', action: 'Interview feedback follow-up', priority: 'medium', time: '2:00 PM', done: false },
      { id: '3', type: 'submit', candidate: 'Tom Wilson', action: 'Submit to Acme Corp', priority: 'high', time: '4:00 PM', done: false },
      { id: '4', type: 'screen', candidate: 'Lisa Park', action: 'Initial phone screen', priority: 'medium', time: '11:00 AM', done: true }
    ],
    upcomingInterviews: [
      { id: '1', date: 'Mon 11/18', time: '2:00 PM', candidate: 'John Doe', job: 'Java Developer', client: 'TechCorp' },
      { id: '2', date: 'Tue 11/19', time: '10:00 AM', candidate: 'Jane Smith', job: 'DevOps Engineer', client: 'DataFlow' }
    ],
    pendingReviews: [
      { id: '1', candidate: 'Mike Chen', job: 'Java Developer', submitted: '2 hours ago', status: 'pending_team_review' }
    ]
  };

  return (
    <div className="min-h-screen bg-gray-50">
      {/* Header */}
      <div className="bg-white border-b border-gray-200">
        <div className="p-6 max-w-[1920px] mx-auto">
          <div className="flex items-center justify-between mb-6">
            <div>
              <h1 className="text-2xl font-bold text-gray-900">My Dashboard</h1>
              <p className="text-sm text-gray-500 mt-1">Welcome back, {recruiterData.name}</p>
            </div>
            <div className="flex items-center gap-3">
              <button className="p-2 hover:bg-gray-100 rounded-lg relative">
                <Bell className="w-5 h-5 text-gray-600" />
                <span className="absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center">
                  3
                </span>
              </button>
              <button className="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2 font-medium">
                <Plus className="w-5 h-5" />
                Quick Match
              </button>
            </div>
          </div>

          {/* Quick Metrics */}
          <div className="grid grid-cols-2 md:grid-cols-6 gap-4">
            <MetricCard
              icon={Briefcase}
              label="Active Jobs"
              value={recruiterData.metrics.active_jobs}
              color="blue"
            />
            <MetricCard
              icon={Send}
              label="Submissions"
              value={recruiterData.metrics.submissions_this_week}
              color="green"
              subtitle="this week"
            />
            <MetricCard
              icon={Video}
              label="Interviews"
              value={recruiterData.metrics.interviews_scheduled}
              color="purple"
              subtitle="scheduled"
            />
            <MetricCard
              icon={Clock}
              label="Follow-ups"
              value={recruiterData.metrics.pending_followups}
              color="orange"
              alert={recruiterData.metrics.pending_followups > 3}
            />
            <MetricCard
              icon={PhoneCall}
              label="Screens Today"
              value={recruiterData.metrics.screening_calls_today}
              color="teal"
            />
            <MetricCard
              icon={AlertCircle}
              label="Awaiting Review"
              value={recruiterData.metrics.awaiting_review}
              color="yellow"
              alert={recruiterData.metrics.awaiting_review > 0}
            />
          </div>
        </div>
      </div>

      {/* Main Content */}
      <div className="p-6 max-w-[1920px] mx-auto">
        <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
          {/* Left Column - Jobs & Tasks */}
          <div className="lg:col-span-2 space-y-6">
            {/* Active Jobs */}
            <div className="bg-white rounded-lg border border-gray-200">
              <div className="p-4 border-b border-gray-200 flex items-center justify-between">
                <h2 className="text-lg font-semibold text-gray-900 flex items-center gap-2">
                  <Briefcase className="w-5 h-5 text-blue-600" />
                  My Active Jobs
                </h2>
                <button className="text-sm text-blue-600 hover:text-blue-700 font-medium">
                  View All →
                </button>
              </div>
              <div className="divide-y divide-gray-200">
                {recruiterData.activeJobs.map(job => (
                  <RecruiterJobCard key={job.id} job={job} />
                ))}
              </div>
            </div>

            {/* Today's Tasks */}
            <div className="bg-white rounded-lg border border-gray-200">
              <div className="p-4 border-b border-gray-200 flex items-center justify-between">
                <h2 className="text-lg font-semibold text-gray-900 flex items-center gap-2">
                  <CheckCircle className="w-5 h-5 text-green-600" />
                  Today's Follow-Ups
                </h2>
                <span className="text-sm text-gray-500">
                  {recruiterData.todayTasks.filter(t => !t.done).length} pending
                </span>
              </div>
              <div className="p-4 space-y-3">
                {recruiterData.todayTasks.map(task => (
                  <TaskItem key={task.id} task={task} />
                ))}
              </div>
            </div>
          </div>

          {/* Right Column - Interviews & Pending */}
          <div className="space-y-6">
            {/* Upcoming Interviews */}
            <div className="bg-white rounded-lg border border-gray-200">
              <div className="p-4 border-b border-gray-200">
                <h2 className="text-lg font-semibold text-gray-900 flex items-center gap-2">
                  <Calendar className="w-5 h-5 text-purple-600" />
                  Upcoming Interviews
                </h2>
              </div>
              <div className="p-4 space-y-3">
                {recruiterData.upcomingInterviews.map(interview => (
                  <InterviewCard key={interview.id} interview={interview} />
                ))}
              </div>
            </div>

            {/* Pending Reviews */}
            <div className="bg-white rounded-lg border border-gray-200">
              <div className="p-4 border-b border-gray-200">
                <h2 className="text-lg font-semibold text-gray-900 flex items-center gap-2">
                  <AlertCircle className="w-5 h-5 text-yellow-600" />
                  Pending Reviews
                </h2>
              </div>
              <div className="p-4 space-y-3">
                {recruiterData.pendingReviews.map(review => (
                  <PendingReviewCard key={review.id} review={review} />
                ))}
              </div>
            </div>

            {/* Quick Actions */}
            <div className="bg-gradient-to-br from-blue-600 to-purple-600 rounded-lg p-6 text-white">
              <h3 className="text-lg font-semibold mb-4">Quick Actions</h3>
              <div className="space-y-2">
                <button className="w-full px-4 py-3 bg-white bg-opacity-20 hover:bg-opacity-30 rounded-lg text-left font-medium transition-colors">
                  📋 Match Candidates to Jobs
                </button>
                <button className="w-full px-4 py-3 bg-white bg-opacity-20 hover:bg-opacity-30 rounded-lg text-left font-medium transition-colors">
                  📊 My Weekly Report
                </button>
                <button className="w-full px-4 py-3 bg-white bg-opacity-20 hover:bg-opacity-30 rounded-lg text-left font-medium transition-colors">
                  📞 Schedule Screening Call
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
}

// ============================================================================
// TEAM LEAD DASHBOARD
// ============================================================================
function TeamLeadDashboard() {
  const teamData = {
    name: "Mike Thompson",
    team_name: "IT Recruitment Team",
    metrics: {
      team_jobs: 24,
      team_submissions: 45,
      pending_reviews: 8,
      team_placements: 5,
      avg_time_to_fill: 18,
      team_revenue: 125000
    },
    teamMembers: [
      { id: '1', name: 'Sarah Johnson', jobs: 8, submissions: 12, placements: 3, trend: 'up' },
      { id: '2', name: 'Tom Wilson', jobs: 6, submissions: 8, placements: 2, trend: 'down' },
      { id: '3', name: 'Lisa Chen', jobs: 10, submissions: 15, placements: 4, trend: 'up' }
    ],
    pendingApprovals: [
      {
        id: '1',
        recruiter: 'Sarah Johnson',
        candidate: 'Mike Chen',
        job: 'Java Developer',
        client: 'TechCorp',
        submitted: '2 hours ago',
        screening_complete: true,
        rate_confirmed: true,
        availability_ok: true
      },
      {
        id: '2',
        recruiter: 'Tom Wilson',
        candidate: 'Jane Doe',
        job: 'DevOps Engineer',
        client: 'DataFlow',
        submitted: '5 hours ago',
        screening_complete: false,
        rate_confirmed: true,
        availability_ok: true
      }
    ],
    jobsNeedingAttention: [
      { id: 'JOB-045', title: 'Java Developer', days_open: 15, submissions: 0, assigned_to: 'Sarah Johnson' },
      { id: 'JOB-038', title: 'Product Manager', days_open: 3, submissions: 5, assigned_to: 'Team A' }
    ]
  };

  return (
    <div className="min-h-screen bg-gray-50">
      {/* Header */}
      <div className="bg-white border-b border-gray-200">
        <div className="p-6 max-w-[1920px] mx-auto">
          <div className="flex items-center justify-between mb-6">
            <div>
              <h1 className="text-2xl font-bold text-gray-900">Team Lead Dashboard</h1>
              <p className="text-sm text-gray-500 mt-1">{teamData.team_name} • {teamData.name}</p>
            </div>
            <div className="flex items-center gap-3">
              <button className="p-2 hover:bg-gray-100 rounded-lg relative">
                <Bell className="w-5 h-5 text-gray-600" />
                <span className="absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center">
                  {teamData.metrics.pending_reviews}
                </span>
              </button>
              <button className="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2 font-medium">
                <Download className="w-5 h-5" />
                Team Report
              </button>
            </div>
          </div>

          {/* Team Metrics */}
          <div className="grid grid-cols-2 md:grid-cols-6 gap-4">
            <MetricCard
              icon={Briefcase}
              label="Team Jobs"
              value={teamData.metrics.team_jobs}
              color="blue"
            />
            <MetricCard
              icon={Send}
              label="Submissions"
              value={teamData.metrics.team_submissions}
              color="green"
              subtitle="last 30 days"
            />
            <MetricCard
              icon={AlertCircle}
              label="Pending Reviews"
              value={teamData.metrics.pending_reviews}
              color="yellow"
              alert={true}
            />
            <MetricCard
              icon={Award}
              label="Placements"
              value={teamData.metrics.team_placements}
              color="purple"
              subtitle="this month"
            />
            <MetricCard
              icon={Clock}
              label="Avg Time to Fill"
              value={`${teamData.metrics.avg_time_to_fill}d`}
              color="orange"
            />
            <MetricCard
              icon={DollarSign}
              label="Revenue"
              value={`$${(teamData.metrics.team_revenue / 1000).toFixed(0)}K`}
              color="green"
            />
          </div>
        </div>
      </div>

      {/* Main Content */}
      <div className="p-6 max-w-[1920px] mx-auto">
        <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
          {/* Left Column */}
          <div className="lg:col-span-2 space-y-6">
            {/* Pending Approvals */}
            <div className="bg-white rounded-lg border border-gray-200">
              <div className="p-4 border-b border-gray-200 flex items-center justify-between">
                <h2 className="text-lg font-semibold text-gray-900 flex items-center gap-2">
                  <ClipboardCheck className="w-5 h-5 text-yellow-600" />
                  Pending Submission Approvals ({teamData.metrics.pending_reviews})
                </h2>
              </div>
              <div className="divide-y divide-gray-200">
                {teamData.pendingApprovals.map(approval => (
                  <SubmissionApprovalCard key={approval.id} approval={approval} />
                ))}
              </div>
            </div>

            {/* Team Performance */}
            <div className="bg-white rounded-lg border border-gray-200">
              <div className="p-4 border-b border-gray-200">
                <h2 className="text-lg font-semibold text-gray-900 flex items-center gap-2">
                  <Users className="w-5 h-5 text-blue-600" />
                  Team Performance
                </h2>
              </div>
              <div className="p-4">
                <table className="w-full">
                  <thead>
                    <tr className="text-left text-xs font-semibold text-gray-600 uppercase">
                      <th className="pb-3">Recruiter</th>
                      <th className="pb-3">Jobs</th>
                      <th className="pb-3">Submissions</th>
                      <th className="pb-3">Placements</th>
                      <th className="pb-3">Trend</th>
                    </tr>
                  </thead>
                  <tbody className="divide-y divide-gray-100">
                    {teamData.teamMembers.map(member => (
                      <tr key={member.id} className="hover:bg-gray-50">
                        <td className="py-3 font-medium text-gray-900">{member.name}</td>
                        <td className="py-3 text-gray-600">{member.jobs}</td>
                        <td className="py-3 text-gray-600">{member.submissions}</td>
                        <td className="py-3 text-gray-600">{member.placements}</td>
                        <td className="py-3">
                          {member.trend === 'up' ? (
                            <span className="text-green-600 flex items-center gap-1">
                              <ArrowUp className="w-4 h-4" />
                              <span className="text-xs font-medium">Up</span>
                            </span>
                          ) : (
                            <span className="text-red-600 flex items-center gap-1">
                              <ArrowDown className="w-4 h-4" />
                              <span className="text-xs font-medium">Down</span>
                            </span>
                          )}
                        </td>
                      </tr>
                    ))}
                  </tbody>
                </table>
              </div>
            </div>
          </div>

          {/* Right Column */}
          <div className="space-y-6">
            {/* Jobs Needing Attention */}
            <div className="bg-white rounded-lg border border-gray-200">
              <div className="p-4 border-b border-gray-200">
                <h2 className="text-lg font-semibold text-gray-900 flex items-center gap-2">
                  <Flag className="w-5 h-5 text-red-600" />
                  Needs Attention
                </h2>
              </div>
              <div className="p-4 space-y-3">
                {teamData.jobsNeedingAttention.map(job => (
                  <AlertJobCard key={job.id} job={job} />
                ))}
              </div>
            </div>

            {/* Quick Actions */}
            <div className="bg-gradient-to-br from-purple-600 to-blue-600 rounded-lg p-6 text-white">
              <h3 className="text-lg font-semibold mb-4">Team Actions</h3>
              <div className="space-y-2">
                <button className="w-full px-4 py-3 bg-white bg-opacity-20 hover:bg-opacity-30 rounded-lg text-left font-medium transition-colors">
                  📊 Generate Team Report
                </button>
                <button className="w-full px-4 py-3 bg-white bg-opacity-20 hover:bg-opacity-30 rounded-lg text-left font-medium transition-colors">
                  👥 Assign Jobs to Team
                </button>
                <button className="w-full px-4 py-3 bg-white bg-opacity-20 hover:bg-opacity-30 rounded-lg text-left font-medium transition-colors">
                  📈 View Analytics
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
}

// ============================================================================
// OWNER/ADMIN DASHBOARD
// ============================================================================
function OwnerDashboard() {
  const ownerData = {
    name: "John Anderson",
    metrics: {
      total_jobs: 45,
      total_submissions: 127,
      placements_this_month: 23,
      monthly_revenue: 125000,
      active_recruiters: 12,
      avg_time_to_fill: 21
    },
    topPerformers: [
      { name: 'Lisa Chen', placements: 8, revenue: 45000 },
      { name: 'Sarah Johnson', placements: 6, revenue: 32000 },
      { name: 'Tom Wilson', placements: 5, revenue: 28000 }
    ],
    clientMetrics: [
      { name: 'TechCorp Solutions', jobs: 12, placements: 5, revenue: 62000, status: 'excellent' },
      { name: 'DataFlow Inc', jobs: 8, placements: 3, revenue: 28000, status: 'good' },
      { name: 'StartupX', jobs: 5, placements: 2, revenue: 18000, status: 'fair' }
    ],
    revenueByMonth: [
      { month: 'Jul', revenue: 95000 },
      { month: 'Aug', revenue: 110000 },
      { month: 'Sep', revenue: 105000 },
      { month: 'Oct', revenue: 120000 },
      { month: 'Nov', revenue: 125000 }
    ]
  };

  return (
    <div className="min-h-screen bg-gray-50">
      {/* Header */}
      <div className="bg-gradient-to-r from-blue-600 to-purple-600 text-white">
        <div className="p-6 max-w-[1920px] mx-auto">
          <div className="flex items-center justify-between mb-6">
            <div>
              <h1 className="text-2xl font-bold">Executive Dashboard</h1>
              <p className="text-blue-100 mt-1">Company Overview • {ownerData.name}</p>
            </div>
            <div className="flex items-center gap-3">
              <button className="px-4 py-2 bg-white bg-opacity-20 hover:bg-opacity-30 rounded-lg flex items-center gap-2 font-medium transition-colors">
                <Download className="w-5 h-5" />
                Export Report
              </button>
              <button className="px-4 py-2 bg-white text-blue-600 rounded-lg hover:bg-blue-50 flex items-center gap-2 font-medium">
                <Settings className="w-5 h-5" />
                Settings
              </button>
            </div>
          </div>

          {/* Key Metrics */}
          <div className="grid grid-cols-2 md:grid-cols-6 gap-4">
            <ExecutiveMetricCard
              icon={Briefcase}
              label="Open Jobs"
              value={ownerData.metrics.total_jobs}
              subtitle="Last 30 days"
            />
            <ExecutiveMetricCard
              icon={Send}
              label="Submissions"
              value={ownerData.metrics.total_submissions}
              subtitle="Last 30 days"
            />
            <ExecutiveMetricCard
              icon={Award}
              label="Placements"
              value={ownerData.metrics.placements_this_month}
              subtitle="This month"
            />
            <ExecutiveMetricCard
              icon={DollarSign}
              label="Revenue"
              value={`$${(ownerData.metrics.monthly_revenue / 1000).toFixed(0)}K`}
              subtitle="This month"
            />
            <ExecutiveMetricCard
              icon={Users}
              label="Active Recruiters"
              value={ownerData.metrics.active_recruiters}
              subtitle="Team size"
            />
            <ExecutiveMetricCard
              icon={Clock}
              label="Avg Fill Time"
              value={`${ownerData.metrics.avg_time_to_fill}d`}
              subtitle="Time to fill"
            />
          </div>
        </div>
      </div>

      {/* Main Content */}
      <div className="p-6 max-w-[1920px] mx-auto">
        <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
          {/* Left Column */}
          <div className="lg:col-span-2 space-y-6">
            {/* Revenue Chart */}
            <div className="bg-white rounded-lg border border-gray-200 p-6">
              <h2 className="text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2">
                <TrendingUp className="w-5 h-5 text-green-600" />
                Revenue Trend (Last 5 Months)
              </h2>
              <RevenueChart data={ownerData.revenueByMonth} />
            </div>

            {/* Top Clients */}
            <div className="bg-white rounded-lg border border-gray-200">
              <div className="p-4 border-b border-gray-200">
                <h2 className="text-lg font-semibold text-gray-900 flex items-center gap-2">
                  <Building2 className="w-5 h-5 text-blue-600" />
                  Top Clients Performance
                </h2>
              </div>
              <div className="p-4">
                <table className="w-full">
                  <thead>
                    <tr className="text-left text-xs font-semibold text-gray-600 uppercase">
                      <th className="pb-3">Client</th>
                      <th className="pb-3">Jobs</th>
                      <th className="pb-3">Placements</th>
                      <th className="pb-3">Revenue</th>
                      <th className="pb-3">Status</th>
                    </tr>
                  </thead>
                  <tbody className="divide-y divide-gray-100">
                    {ownerData.clientMetrics.map((client, idx) => (
                      <tr key={idx} className="hover:bg-gray-50">
                        <td className="py-3 font-medium text-gray-900">{client.name}</td>
                        <td className="py-3 text-gray-600">{client.jobs}</td>
                        <td className="py-3 text-gray-600">{client.placements}</td>
                        <td className="py-3 text-gray-900 font-semibold">
                          ${(client.revenue / 1000).toFixed(0)}K
                        </td>
                        <td className="py-3">
                          <ClientHealthBadge status={client.status} />
                        </td>
                      </tr>
                    ))}
                  </tbody>
                </table>
              </div>
            </div>
          </div>

          {/* Right Column */}
          <div className="space-y-6">
            {/* Top Performers */}
            <div className="bg-white rounded-lg border border-gray-200">
              <div className="p-4 border-b border-gray-200">
                <h2 className="text-lg font-semibold text-gray-900 flex items-center gap-2">
                  <Award className="w-5 h-5 text-yellow-600" />
                  Top Performers
                </h2>
              </div>
              <div className="p-4 space-y-3">
                {ownerData.topPerformers.map((performer, idx) => (
                  <div key={idx} className="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                    <div className="flex items-center gap-3">
                      <div className={`w-8 h-8 rounded-full flex items-center justify-center font-bold text-white ${
                        idx === 0 ? 'bg-yellow-500' : idx === 1 ? 'bg-gray-400' : 'bg-orange-600'
                      }`}>
                        {idx + 1}
                      </div>
                      <div>
                        <div className="font-medium text-gray-900">{performer.name}</div>
                        <div className="text-xs text-gray-500">{performer.placements} placements</div>
                      </div>
                    </div>
                    <div className="text-right">
                      <div className="font-semibold text-gray-900">
                        ${(performer.revenue / 1000).toFixed(0)}K
                      </div>
                    </div>
                  </div>
                ))}
              </div>
            </div>

            {/* Quick Stats */}
            <div className="bg-gradient-to-br from-green-600 to-teal-600 rounded-lg p-6 text-white">
              <h3 className="text-lg font-semibold mb-4">This Month</h3>
              <div className="space-y-3">
                <div className="flex justify-between items-center">
                  <span className="text-green-100">Total Jobs</span>
                  <span className="text-2xl font-bold">45</span>
                </div>
                <div className="flex justify-between items-center">
                  <span className="text-green-100">Placements</span>
                  <span className="text-2xl font-bold">23</span>
                </div>
                <div className="flex justify-between items-center">
                  <span className="text-green-100">Success Rate</span>
                  <span className="text-2xl font-bold">51%</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
}

// ============================================================================
// SCREENING CHECKLIST MODAL
// ============================================================================
function ScreeningChecklistModal({ candidate, job, onClose, onSubmit }: any) {
  const [checklist, setChecklist] = useState({
    // Pre-screening
    phone_screen_done: false,
    phone_screen_date: '',
    phone_screen_notes: '',
    
    // Rate & Availability
    rate_discussed: false,
    candidate_rate: '',
    rate_matches_budget: false,
    
    // RTR (Right to Represent)
    rtr_confirmed: false,
    rtr_expiry_date: '',
    exclusive_with_us: false,
    
    // Other Submissions
    other_submissions_checked: false,
    no_conflicts: false,
    conflict_details: '',
    
    // Availability
    availability_confirmed: false,
    available_date: '',
    notice_period: '',
    
    // Visa/Legal
    visa_status_checked: false,
    work_authorized: false,
    visa_type: '',
    visa_expiry: '',
    
    // Technical
    skills_verified: false,
    experience_verified: false,
    references_available: false,
    
    // Additional
    location_acceptable: false,
    commute_discussed: false,
    additional_notes: ''
  });

  const isComplete = () => {
    return checklist.phone_screen_done &&
           checklist.rate_discussed &&
           checklist.rtr_confirmed &&
           checklist.other_submissions_checked &&
           checklist.availability_confirmed &&
           checklist.visa_status_checked;
  };

  return (
    <div className="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
      <div className="bg-white rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col">
        {/* Header */}
        <div className="p-6 border-b border-gray-200 bg-gradient-to-r from-blue-600 to-purple-600 text-white">
          <h2 className="text-2xl font-bold mb-2">Pre-Submission Screening Checklist</h2>
          <p className="text-blue-100">
            Candidate: <span className="font-semibold">{candidate.name}</span> for{' '}
            <span className="font-semibold">{job.title}</span>
          </p>
        </div>

        {/* Checklist Content */}
        <div className="flex-1 overflow-y-auto p-6">
          <div className="space-y-6">
            {/* Phone Screen */}
            <ChecklistSection
              title="📞 Phone Screening (Mandatory)"
              required
            >
              <div className="space-y-3">
                <CheckboxItem
                  label="Phone screen completed"
                  checked={checklist.phone_screen_done}
                  onChange={(val) => setChecklist({...checklist, phone_screen_done: val})}
                />
                {checklist.phone_screen_done && (
                  <>
                    <InputField
                      label="Screen Date"
                      type="date"
                      value={checklist.phone_screen_date}
                      onChange={(val) => setChecklist({...checklist, phone_screen_date: val})}
                    />
                    <TextAreaField
                      label="Screening Notes"
                      value={checklist.phone_screen_notes}
                      onChange={(val) => setChecklist({...checklist, phone_screen_notes: val})}
                      placeholder="Key discussion points, candidate impressions..."
                    />
                  </>
                )}
              </div>
            </ChecklistSection>

            {/* Rate & Budget */}
            <ChecklistSection
              title="💰 Rate & Budget Alignment (Mandatory)"
              required
            >
              <div className="space-y-3">
                <CheckboxItem
                  label="Rate discussed with candidate"
                  checked={checklist.rate_discussed}
                  onChange={(val) => setChecklist({...checklist, rate_discussed: val})}
                />
                {checklist.rate_discussed && (
                  <>
                    <InputField
                      label="Candidate's Rate Expectation"
                      placeholder="e.g., €650/day"
                      value={checklist.candidate_rate}
                      onChange={(val) => setChecklist({...checklist, candidate_rate: val})}
                    />
                    <CheckboxItem
                      label={`Rate matches budget (${job.rate_range})`}
                      checked={checklist.rate_matches_budget}
                      onChange={(val) => setChecklist({...checklist, rate_matches_budget: val})}
                    />
                  </>
                )}
              </div>
            </ChecklistSection>

            {/* RTR */}
            <ChecklistSection
              title="✍️ Right to Represent (Mandatory)"
              required
            >
              <div className="space-y-3">
                <CheckboxItem
                  label="RTR confirmed with candidate"
                  checked={checklist.rtr_confirmed}
                  onChange={(val) => setChecklist({...checklist, rtr_confirmed: val})}
                />
                {checklist.rtr_confirmed && (
                  <>
                    <InputField
                      label="RTR Expiry Date"
                      type="date"
                      value={checklist.rtr_expiry_date}
                      onChange={(val) => setChecklist({...checklist, rtr_expiry_date: val})}
                    />
                    <CheckboxItem
                      label="Exclusive representation (no other agencies)"
                      checked={checklist.exclusive_with_us}
                      onChange={(val) => setChecklist({...checklist, exclusive_with_us: val})}
                    />
                  </>
                )}
              </div>
            </ChecklistSection>

            {/* Other Submissions */}
            <ChecklistSection
              title="🔍 Other Submissions Check (Mandatory)"
              required
            >
              <div className="space-y-3">
                <CheckboxItem
                  label="Checked for other submissions to this client"
                  checked={checklist.other_submissions_checked}
                  onChange={(val) => setChecklist({...checklist, other_submissions_checked: val})}
                />
                <CheckboxItem
                  label="No conflicts found"
                  checked={checklist.no_conflicts}
                  onChange={(val) => setChecklist({...checklist, no_conflicts: val})}
                />
                {!checklist.no_conflicts && checklist.other_submissions_checked && (
                  <TextAreaField
                    label="Conflict Details"
                    value={checklist.conflict_details}
                    onChange={(val) => setChecklist({...checklist, conflict_details: val})}
                    placeholder="Describe the conflict..."
                  />
                )}
              </div>
            </ChecklistSection>

            {/* Availability */}
            <ChecklistSection
              title="📅 Availability (Mandatory)"
              required
            >
              <div className="space-y-3">
                <CheckboxItem
                  label="Availability confirmed"
                  checked={checklist.availability_confirmed}
                  onChange={(val) => setChecklist({...checklist, availability_confirmed: val})}
                />
                {checklist.availability_confirmed && (
                  <>
                    <InputField
                      label="Available Start Date"
                      type="date"
                      value={checklist.available_date}
                      onChange={(val) => setChecklist({...checklist, available_date: val})}
                    />
                    <InputField
                      label="Notice Period"
                      placeholder="e.g., Immediately, 2 weeks, 1 month"
                      value={checklist.notice_period}
                      onChange={(val) => setChecklist({...checklist, notice_period: val})}
                    />
                  </>
                )}
              </div>
            </ChecklistSection>

            {/* Visa/Legal */}
            <ChecklistSection
              title="🛂 Visa & Work Authorization (Mandatory)"
              required
            >
              <div className="space-y-3">
                <CheckboxItem
                  label="Visa status checked"
                  checked={checklist.visa_status_checked}
                  onChange={(val) => setChecklist({...checklist, visa_status_checked: val})}
                />
                <CheckboxItem
                  label="Authorized to work in {job.location}"
                  checked={checklist.work_authorized}
                  onChange={(val) => setChecklist({...checklist, work_authorized: val})}
                />
                {checklist.visa_status_checked && (
                  <>
                    <InputField
                      label="Visa Type"
                      placeholder="e.g., EU Citizen, Work Permit, Blue Card"
                      value={checklist.visa_type}
                      onChange={(val) => setChecklist({...checklist, visa_type: val})}
                    />
                    {checklist.visa_type && checklist.visa_type !== 'EU Citizen' && (
                      <InputField
                        label="Visa Expiry Date"
                        type="date"
                        value={checklist.visa_expiry}
                        onChange={(val) => setChecklist({...checklist, visa_expiry: val})}
                      />
                    )}
                  </>
                )}
              </div>
            </ChecklistSection>

            {/* Optional Checks */}
            <ChecklistSection
              title="📋 Additional Verification (Optional)"
              required={false}
            >
              <div className="space-y-3">
                <CheckboxItem
                  label="Technical skills verified"
                  checked={checklist.skills_verified}
                  onChange={(val) => setChecklist({...checklist, skills_verified: val})}
                />
                <CheckboxItem
                  label="Experience level verified"
                  checked={checklist.experience_verified}
                  onChange={(val) => setChecklist({...checklist, experience_verified: val})}
                />
                <CheckboxItem
                  label="References available"
                  checked={checklist.references_available}
                  onChange={(val) => setChecklist({...checklist, references_available: val})}
                />
                <CheckboxItem
                  label="Location/commute discussed"
                  checked={checklist.commute_discussed}
                  onChange={(val) => setChecklist({...checklist, commute_discussed: val})}
                />
              </div>
            </ChecklistSection>

            {/* Additional Notes */}
            <div>
              <label className="block text-sm font-medium text-gray-700 mb-2">
                Additional Notes
              </label>
              <textarea
                value={checklist.additional_notes}
                onChange={(e) => setChecklist({...checklist, additional_notes: e.target.value})}
                className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                rows={4}
                placeholder="Any other relevant information..."
              />
            </div>
          </div>
        </div>

        {/* Footer */}
        <div className="p-6 border-t border-gray-200 bg-gray-50 flex items-center justify-between">
          <div>
            {!isComplete() && (
              <p className="text-sm text-red-600 flex items-center gap-2">
                <AlertCircle className="w-4 h-4" />
                Please complete all mandatory checks
              </p>
            )}
            {isComplete() && (
              <p className="text-sm text-green-600 flex items-center gap-2">
                <CheckCircle className="w-4 h-4" />
                All mandatory checks completed
              </p>
            )}
          </div>
          <div className="flex gap-3">
            <button
              onClick={onClose}
              className="px-5 py-2.5 border border-gray-300 rounded-lg hover:bg-white font-medium"
            >
              Cancel
            </button>
            <button
              onClick={() => onSubmit(checklist)}
              disabled={!isComplete()}
              className="px-5 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed font-medium"
            >
              Submit for Team Review
            </button>
          </div>
        </div>
      </div>
    </div>
  );
}

// ============================================================================
// HELPER COMPONENTS
// ============================================================================
function MetricCard({ icon: Icon, label, value, color, subtitle, alert }: any) {
  const colors = {
    blue: 'bg-blue-50 text-blue-600 border-blue-200',
    green: 'bg-green-50 text-green-600 border-green-200',
    purple: 'bg-purple-50 text-purple-600 border-purple-200',
    orange: 'bg-orange-50 text-orange-600 border-orange-200',
    teal: 'bg-teal-50 text-teal-600 border-teal-200',
    yellow: 'bg-yellow-50 text-yellow-600 border-yellow-200'
  };

  return (
    <div className={`rounded-lg border p-4 ${alert ? 'border-red-300 bg-red-50' : 'border-gray-200 bg-white'}`}>
      <div className="flex items-center gap-3 mb-2">
        <div className={`p-2 rounded-lg ${colors[color]}`}>
          <Icon className="w-4 h-4" />
        </div>
        {alert && <AlertCircle className="w-4 h-4 text-red-600" />}
      </div>
      <div className="text-2xl font-bold text-gray-900">{value}</div>
      <div className="text-xs text-gray-600 mt-1">{label}</div>
      {subtitle && <div className="text-xs text-gray-500">{subtitle}</div>}
    </div>
  );
}

function ExecutiveMetricCard({ icon: Icon, label, value, subtitle }: any) {
  return (
    <div className="bg-white bg-opacity-20 rounded-lg p-4 backdrop-blur-sm">
      <div className="flex items-center gap-2 mb-2 opacity-90">
        <Icon className="w-4 h-4" />
      </div>
      <div className="text-3xl font-bold mb-1">{value}</div>
      <div className="text-sm opacity-90">{label}</div>
      <div className="text-xs opacity-75">{subtitle}</div>
    </div>
  );
}

function RecruiterJobCard({ job }: any) {
  return (
    <div className="p-4 hover:bg-gray-50 transition-colors">
      <div className="flex items-start justify-between mb-3">
        <div className="flex-1">
          <div className="flex items-center gap-2 mb-1">
            <span className="font-semibold text-gray-900">{job.id}</span>
            <span className="text-gray-400">•</span>
            <h3 className="font-semibold text-gray-900">{job.title}</h3>
            {job.priority === 'high' && (
              <span className="px-2 py-0.5 bg-red-100 text-red-700 rounded-full text-xs font-medium">
                High Priority
              </span>
            )}
          </div>
          <p className="text-sm text-gray-600">{job.client}</p>
        </div>
        <div className="flex items-center gap-1">
          <TrendingUp className={`w-5 h-5 ${
            job.health_score >= 70 ? 'text-green-600' :
            job.health_score >= 40 ? 'text-yellow-600' : 'text-red-600'
          }`} />
          <span className="text-sm font-semibold text-gray-900">{job.health_score}%</span>
        </div>
      </div>

      {/* Pipeline Mini */}
      <div className="mb-3">
        <div className="flex gap-1 mb-1">
          {Object.entries(job.pipeline).map(([stage, count]: any) => (
            <div
              key={stage}
              className="flex-1 h-2 rounded bg-blue-600"
              style={{ opacity: count > 0 ? 1 : 0.2 }}
              title={`${stage}: ${count}`}
            />
          ))}
        </div>
        <div className="text-xs text-gray-600">
          {job.submissions} submissions • {job.interviews} interviews • Last: {job.last_action}
        </div>
      </div>

      <div className="flex gap-2">
        <button className="flex-1 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm font-medium">
          Match Candidates
        </button>
        <button className="px-3 py-2 border border-gray-300 rounded-lg hover:bg-white text-sm font-medium">
          View Details
        </button>
      </div>
    </div>
  );
}

function TaskItem({ task }: any) {
  const icons = {
    call: PhoneCall,
    email: Mail,
    submit: Send,
    screen: UserCheck
  };
  const Icon = icons[task.type as keyof typeof icons];

  return (
    <div className="flex items-center gap-3 p-3 border border-gray-200 rounded-lg">
      <input
        type="checkbox"
        checked={task.done}
        className="w-5 h-5 text-blue-600 rounded"
      />
      <div className={`p-2 rounded-lg ${task.done ? 'bg-gray-100' : 'bg-blue-50'}`}>
        <Icon className={`w-4 h-4 ${task.done ? 'text-gray-400' : 'text-blue-600'}`} />
      </div>
      <div className="flex-1">
        <div className={`font-medium ${task.done ? 'text-gray-400 line-through' : 'text-gray-900'}`}>
          {task.action}
        </div>
        <div className="text-xs text-gray-500">{task.candidate} • {task.time}</div>
      </div>
      {task.priority === 'high' && !task.done && (
        <Flag className="w-4 h-4 text-red-600" />
      )}
    </div>
  );
}

function InterviewCard({ interview }: any) {
  return (
    <div className="p-3 border border-gray-200 rounded-lg hover:border-purple-300 transition-colors">
      <div className="flex items-center gap-3 mb-2">
        <div className="p-2 bg-purple-50 rounded-lg">
          <Video className="w-4 h-4 text-purple-600" />
        </div>
        <div className="flex-1">
          <div className="font-medium text-gray-900">{interview.candidate}</div>
          <div className="text-xs text-gray-500">{interview.job}</div>
        </div>
      </div>
      <div className="text-sm text-gray-600">
        {interview.date} • {interview.time}
      </div>
      <div className="text-xs text-gray-500 mt-1">Client: {interview.client}</div>
    </div>
  );
}

function PendingReviewCard({ review }: any) {
  return (
    <div className="p-3 border border-yellow-200 bg-yellow-50 rounded-lg">
      <div className="font-medium text-gray-900 mb-1">{review.candidate}</div>
      <div className="text-sm text-gray-600 mb-2">{review.job}</div>
      <div className="text-xs text-gray-500 mb-2">Submitted {review.submitted}</div>
      <div className="flex gap-2">
        <button className="flex-1 px-3 py-1 bg-green-600 text-white rounded text-xs font-medium">
          View
        </button>
      </div>
    </div>
  );
}

function SubmissionApprovalCard({ approval }: any) {
  return (
    <div className="p-4 hover:bg-gray-50">
      <div className="flex items-start justify-between mb-3">
        <div>
          <div className="font-semibold text-gray-900 mb-1">
            {approval.candidate} → {approval.job}
          </div>
          <div className="text-sm text-gray-600">
            Client: {approval.client} • Submitted by: {approval.recruiter}
          </div>
          <div className="text-xs text-gray-500 mt-1">
            {approval.submitted}
          </div>
        </div>
      </div>

      {/* Checklist Status */}
      <div className="grid grid-cols-3 gap-2 mb-3">
        <CheckStatus label="Screening" complete={approval.screening_complete} />
        <CheckStatus label="Rate OK" complete={approval.rate_confirmed} />
        <CheckStatus label="Available" complete={approval.availability_ok} />
      </div>

      <div className="flex gap-2">
        <button className="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 text-sm font-medium flex items-center gap-2">
          <CheckCircle className="w-4 h-4" />
          Approve
        </button>
        <button className="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 text-sm font-medium flex items-center gap-2">
          <XCircle className="w-4 h-4" />
          Reject
        </button>
        <button className="px-4 py-2 border border-gray-300 rounded-lg hover:bg-white text-sm font-medium">
          View Details
        </button>
      </div>
    </div>
  );
}

function AlertJobCard({ job }: any) {
  return (
    <div className="p-3 border border-red-200 bg-red-50 rounded-lg">
      <div className="flex items-center gap-2 mb-2">
        <AlertCircle className="w-4 h-4 text-red-600" />
        <span className="font-medium text-red-900">{job.id}</span>
      </div>
      <div className="text-sm text-gray-900 font-medium mb-1">{job.title}</div>
      <div className="text-xs text-gray-600 mb-2">
        {job.days_open} days open • {job.submissions} submissions
      </div>
      <div className="text-xs text-gray-500">
        Assigned: {job.assigned_to}
      </div>
    </div>
  );
}

function CheckStatus({ label, complete }: any) {
  return (
    <div className={`p-2 rounded text-center text-xs font-medium ${
      complete ? 'bg-green-100 text-green-700' : 'bg-gray-100 text-gray-500'
    }`}>
      {complete ? '✓' : '○'} {label}
    </div>
  );
}

function ClientHealthBadge({ status }: any) {
  const config = {
    excellent: { label: 'Excellent', color: 'bg-green-100 text-green-700' },
    good: { label: 'Good', color: 'bg-blue-100 text-blue-700' },
    fair: { label: 'Fair', color: 'bg-yellow-100 text-yellow-700' },
    poor: { label: 'Poor', color: 'bg-red-100 text-red-700' }
  };
  const { label, color } = config[status as keyof typeof config];
  return (
    <span className={`px-2 py-1 rounded-full text-xs font-medium ${color}`}>
      {label}
    </span>
  );
}

function RevenueChart({ data }: any) {
  const maxRevenue = Math.max(...data.map((d: any) => d.revenue));
  
  return (
    <div className="flex items-end justify-between gap-2 h-48">
      {data.map((item: any, idx: number) => (
        <div key={idx} className="flex-1 flex flex-col items-center gap-2">
          <div className="w-full bg-blue-600 rounded-t hover:bg-blue-700 transition-colors relative group"
               style={{ height: `${(item.revenue / maxRevenue) * 100}%` }}>
            <div className="absolute -top-8 left-1/2 -translate-x-1/2 opacity-0 group-hover:opacity-100 bg-gray-900 text-white text-xs px-2 py-1 rounded whitespace-nowrap">
              ${(item.revenue / 1000).toFixed(0)}K
            </div>
          </div>
          <div className="text-xs text-gray-600 font-medium">{item.month}</div>
        </div>
      ))}
    </div>
  );
}

function ChecklistSection({ title, required, children }: any) {
  return (
    <div className="border border-gray-200 rounded-lg p-4">
      <h3 className="font-semibold text-gray-900 mb-3 flex items-center gap-2">
        {title}
        {required && <span className="text-xs text-red-600">(Required)</span>}
      </h3>
      {children}
    </div>
  );
}

function CheckboxItem({ label, checked, onChange }: any) {
  return (
    <label className="flex items-center gap-3 cursor-pointer">
      <input
        type="checkbox"
        checked={checked}
        onChange={(e) => onChange(e.target.checked)}
        className="w-5 h-5 text-blue-600 rounded border-gray-300 focus:ring-2 focus:ring-blue-500"
      />
      <span className="text-sm text-gray-700">{label}</span>
    </label>
  );
}

function InputField({ label, type = 'text', value, onChange, placeholder, min }: any) {
  return (
    <div>
      <label className="block text-sm font-medium text-gray-700 mb-1">{label}</label>
      <input
        type={type}
        value={value}
        onChange={(e) => onChange(e.target.value)}
        placeholder={placeholder}
        min={min}
        className="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
      />
    </div>
  );
}

function TextAreaField({ label, value, onChange, placeholder }: any) {
  return (
    <div>
      <label className="block text-sm font-medium text-gray-700 mb-1">{label}</label>
      <textarea
        value={value}
        onChange={(e) => onChange(e.target.value)}
        placeholder={placeholder}
        className="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
        rows={3}
      />
    </div>
  );
}

// Export all components
export {
  RecruiterDashboard,
  TeamLeadDashboard,
  OwnerDashboard,
  ScreeningChecklistModal
};
-----------------------------

File: src/app/dashboard/admin/page.tsx
Content:

-----------------------------

File: src/app/dashboard/page.tsx
Content:
// src/app/dashboard/page.tsx - PRODUCTION READY
'use client';
import { useState, useEffect } from 'react';
import { useRouter } from 'next/navigation';
import { 
  Target, Upload, Users, BarChart3, TrendingUp, 
  Clock, AlertCircle, CheckCircle, Sparkles, Database 
} from 'lucide-react';

interface Stats {
  total: number;
  recentWeek: number;
  highQuality: number;
  avgConfidence: number;
  externalCandidates?: number;
}

interface MatchHistory {
  id: string;
  job_title: string;
  match_count: number;
  created_at: string;
}

interface SystemHealth {
  parseAccuracy: number;
  tierABRate: number;
  topSource: string;
  hasRealData: boolean;
}

export default function DashboardPage() {
  const router = useRouter();
  const [stats, setStats] = useState<Stats>({ 
    total: 0, 
    recentWeek: 0, 
    highQuality: 0, 
    avgConfidence: 0,
    externalCandidates: 0
  });
  const [recentMatches, setRecentMatches] = useState<MatchHistory[]>([]);
  const [health, setHealth] = useState<SystemHealth>({
    parseAccuracy: 0,
    tierABRate: 0,
    topSource: 'upload',
    hasRealData: false
  });
  const [loading, setLoading] = useState(true);
  const [dragActive, setDragActive] = useState(false);

  useEffect(() => {
    loadDashboardData();
  }, []);

  async function loadDashboardData() {
    try {
      setLoading(true);
      
      // Load stats
      try {
        const statsRes = await fetch('/api/stats');
        if (statsRes.ok) {
          const statsData = await statsRes.json();
          setStats(statsData.data || statsData);
        }
      } catch (err) {
        console.log('Stats API not available during build');
      }

      // Load recent matches
      try{
        const historyRes = await fetch('/api/match/history');
        if (historyRes.ok) {
          const historyData = await historyRes.json();
          setRecentMatches(historyData.data?.slice(0, 5) || []);
        }
      }catch (err) {
        console.log('Reent Match API not available during build');
      }


      // Load system health
      const healthRes = await fetch('/api/dashboard/performance');
      if (healthRes.ok) {
        const healthData = await healthRes.json();
        setHealth(healthData);
      }
    } catch (err) {
      console.error('Dashboard load error:', err);
    } finally {
      setLoading(false);
    }
  }

  const handleDrag = (e: React.DragEvent) => {
    e.preventDefault();
    e.stopPropagation();
    if (e.type === "dragenter" || e.type === "dragover") {
      setDragActive(true);
    } else if (e.type === "dragleave") {
      setDragActive(false);
    }
  };

  const handleDrop = async (e: React.DragEvent) => {
    e.preventDefault();
    e.stopPropagation();
    setDragActive(false);
    
    const file = e.dataTransfer.files?.[0];
    if (file) {
      // Upload file
      const formData = new FormData();
      formData.append('file', file);
      
      try {
        const res = await fetch('/api/parse', {
          method: 'POST',
          body: formData
        });
        
        if (res.ok) {
          alert('Resume uploaded successfully!');
          loadDashboardData(); // Refresh stats
        }
      } catch (err) {
        alert('Upload failed. Please try again.');
      }
    }
  };

  function formatDate(dateStr: string): string {
    const date = new Date(dateStr);
    const now = new Date();
    const diffMs = now.getTime() - date.getTime();
    const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));
    
    if (diffDays === 0) return 'Today';
    if (diffDays === 1) return 'Yesterday';
    if (diffDays < 7) return `${diffDays} days ago`;
    
    return date.toLocaleDateString('en-US', { 
      month: 'short', 
      day: 'numeric', 
      year: date.getFullYear() !== now.getFullYear() ? 'numeric' : undefined 
    });
  }

  if (loading) {
    return (
      <div className="min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-white to-purple-50">
        <div className="text-center">
          <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"></div>
          <p className="text-gray-600">Loading dashboard...</p>
        </div>
      </div>
    );
  }

  return (
    <div className="min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 p-4 md:p-6 pb-24 md:pb-6">
      {/* Header */}
      <div className="max-w-7xl mx-auto mb-8">
        <div className="flex items-center justify-between">
          <div>
            <h1 className="text-3xl font-bold text-gray-900 flex items-center gap-3">
              <Sparkles className="w-8 h-8 text-purple-600" />
              Welcome to TalentPlus
            </h1>
            <p className="text-gray-600 mt-1">
              Your AI-powered recruitment dashboard
            </p>
          </div>
          <button
            onClick={() => router.push('/match')}
            className="hidden md:flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg font-semibold hover:from-blue-700 hover:to-purple-700 shadow-lg"
          >
            <Target className="w-5 h-5" />
            New Match
          </button>
        </div>
      </div>

      <div className="max-w-7xl mx-auto space-y-6">
        {/* Key Metrics */}
        <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
          <div className="bg-white rounded-xl p-5 border shadow-sm hover:shadow-md transition">
            <div className="flex items-center justify-between mb-2">
              <Database className="w-8 h-8 text-blue-600 opacity-70" />
              <div className={`px-2 py-1 rounded-full text-xs font-medium ${
                stats.total > 0 ? 'bg-green-100 text-green-700' : 'bg-gray-100 text-gray-600'
              }`}>
                {stats.total > 0 ? 'Active' : 'Empty'}
              </div>
            </div>
            <p className="text-2xl font-bold text-gray-900">{stats.total}</p>
            <p className="text-sm text-gray-600">Total Candidates</p>
          </div>

          <div className="bg-white rounded-xl p-5 border shadow-sm hover:shadow-md transition">
            <div className="flex items-center justify-between mb-2">
              <TrendingUp className="w-8 h-8 text-green-600 opacity-70" />
              <div className="px-2 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-medium">
                This Week
              </div>
            </div>
            <p className="text-2xl font-bold text-gray-900">{stats.recentWeek}</p>
            <p className="text-sm text-gray-600">New Additions</p>
          </div>

          <div className="bg-white rounded-xl p-5 border shadow-sm hover:shadow-md transition">
            <div className="flex items-center justify-between mb-2">
              <CheckCircle className="w-8 h-8 text-purple-600 opacity-70" />
              <div className="px-2 py-1 bg-purple-100 text-purple-700 rounded-full text-xs font-medium">
                Quality
              </div>
            </div>
            <p className="text-2xl font-bold text-gray-900">{stats.highQuality}</p>
            <p className="text-sm text-gray-600">High Confidence</p>
          </div>

          <div className="bg-white rounded-xl p-5 border shadow-sm hover:shadow-md transition">
            <div className="flex items-center justify-between mb-2">
              <BarChart3 className="w-8 h-8 text-orange-600 opacity-70" />
              <div className={`px-2 py-1 rounded-full text-xs font-medium ${
                stats.avgConfidence >= 80 ? 'bg-green-100 text-green-700' :
                stats.avgConfidence >= 70 ? 'bg-yellow-100 text-yellow-700' :
                'bg-red-100 text-red-700'
              }`}>
                {stats.avgConfidence >= 80 ? 'Excellent' : stats.avgConfidence >= 70 ? 'Good' : 'Review'}
              </div>
            </div>
            <p className="text-2xl font-bold text-gray-900">{stats.avgConfidence}%</p>
            <p className="text-sm text-gray-600">Avg Confidence</p>
          </div>
        </div>

        {/* System Health */}
        {health.hasRealData && (
          <div className="bg-white rounded-xl border shadow-sm p-6">
            <h2 className="text-lg font-bold mb-4 flex items-center gap-2">
              <BarChart3 className="w-5 h-5 text-blue-600" />
              System Performance
            </h2>
            <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
              <div className="p-4 bg-blue-50 rounded-lg">
                <div className="text-2xl font-bold text-blue-900">{health.parseAccuracy}%</div>
                <p className="text-sm text-blue-700">Parsing Accuracy</p>
                <p className="text-xs text-blue-600 mt-1">AI extraction precision</p>
              </div>
              <div className="p-4 bg-green-50 rounded-lg">
                <div className="text-2xl font-bold text-green-900">{health.tierABRate}%</div>
                <p className="text-sm text-green-700">Tier A+B Matches</p>
                <p className="text-xs text-green-600 mt-1">High-quality match rate</p>
              </div>
              <div className="p-4 bg-purple-50 rounded-lg">
                <div className="text-lg font-bold text-purple-900 capitalize">{health.topSource}</div>
                <p className="text-sm text-purple-700">Top Candidate Source</p>
                <p className="text-xs text-purple-600 mt-1">Most effective channel</p>
              </div>
            </div>
          </div>
        )}

        {/* External Source Stats */}
        {stats.externalCandidates && stats.externalCandidates > 0 && (
          <div className="bg-gradient-to-r from-teal-500 to-blue-600 rounded-xl p-6 text-white">
            <div className="flex items-center justify-between">
              <div>
                <h3 className="text-lg font-semibold mb-1">External Candidates</h3>
                <p className="text-sm opacity-90">Sourced from Apollo and other platforms</p>
              </div>
              <div className="text-4xl font-bold">{stats.externalCandidates}</div>
            </div>
          </div>
        )}

        {/* Quick Upload */}
        <div 
          className={`bg-white rounded-xl border-2 p-6 transition-all ${
            dragActive ? 'border-blue-500 bg-blue-50 shadow-lg' : 'border-dashed border-gray-300 hover:border-blue-400 hover:bg-blue-50/50'
          }`}
          onDragEnter={handleDrag}
          onDragLeave={handleDrag}
          onDragOver={handleDrag}
          onDrop={handleDrop}
        >
          <div className="text-center">
            <Upload className="w-12 h-12 mx-auto mb-3 text-gray-400" />
            <h3 className="font-semibold text-gray-900 mb-2">Quick Resume Upload</h3>
            <p className="text-sm text-gray-600 mb-4">
              Drag & drop a resume here or{' '}
              <button 
                onClick={() => router.push('/library')} 
                className="text-blue-600 hover:underline font-medium"
              >
                browse from Library
              </button>
            </p>
            <div className="flex flex-col sm:flex-row gap-3 justify-center">
              <button
                onClick={() => router.push('/library')}
                className="px-6 py-2 border border-blue-600 text-blue-600 rounded-lg hover:bg-blue-50 font-medium"
              >
                <Users className="w-4 h-4 inline mr-2" />
                Go to Library
              </button>
              <button
                onClick={() => router.push('/match')}
                className="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium"
              >
                <Target className="w-4 h-4 inline mr-2" />
                Start Matching
              </button>
            </div>
          </div>
        </div>

        {/* Recent Matches */}
        <section className="bg-white rounded-xl border p-6 shadow-sm">
          <div className="flex items-center justify-between mb-4">
            <h2 className="text-lg font-bold flex items-center gap-2">
              <Clock className="w-5 h-5 text-purple-600" />
              Recent Matches
            </h2>
            <button
              onClick={() => router.push('/match/history')}
              className="text-sm text-blue-600 hover:text-blue-700 font-medium"
            >
              View All →
            </button>
          </div>
          
          {recentMatches.length === 0 ? (
            <div className="text-center py-12">
              <Target className="w-16 h-16 mx-auto mb-4 text-gray-300" />
              <h3 className="text-lg font-semibold text-gray-900 mb-2">No matches yet</h3>
              <p className="text-gray-600 mb-4">
                Upload resumes and create your first job match
              </p>
              <div className="flex gap-3 justify-center">
                <button
                  onClick={() => router.push('/library')}
                  className="px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50"
                >
                  Upload Resumes
                </button>
                <button
                  onClick={() => router.push('/match')}
                  className="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"
                >
                  Create Match
                </button>
              </div>
            </div>
          ) : (
            <div className="space-y-3">
              {recentMatches.map(match => (
                <div 
                  key={match.id} 
                  className="flex justify-between items-center p-4 border rounded-lg hover:bg-gray-50 cursor-pointer transition"
                  onClick={() => router.push('/match/history')}
                >
                  <div className="flex-1">
                    <h3 className="font-semibold text-gray-900">{match.job_title}</h3>
                    <div className="flex items-center gap-4 mt-1">
                      <span className="text-sm text-gray-600">
                        <Users className="w-4 h-4 inline mr-1" />
                        {match.match_count} matches
                      </span>
                      <span className="text-sm text-gray-500">
                        {formatDate(match.created_at)}
                      </span>
                    </div>
                  </div>
                  <div className="px-4 py-2 bg-blue-100 text-blue-800 text-sm rounded-lg font-medium hover:bg-blue-200 transition">
                    View Results →
                  </div>
                </div>
              ))}
            </div>
          )}
        </section>

        {/* Quick Actions */}
        <div className="grid grid-cols-2 md:grid-cols-4 gap-3">
          <button 
            onClick={() => router.push('/match')} 
            className="bg-gradient-to-br from-blue-500 to-blue-600 text-white p-6 rounded-xl hover:shadow-lg transition flex flex-col items-center justify-center"
          >
            <Target className="w-8 h-8 mb-2" />
            <span className="text-sm font-medium">New Match</span>
          </button>
          <button 
            onClick={() => router.push('/library')} 
            className="bg-white border-2 border-gray-200 p-6 rounded-xl hover:shadow-lg hover:border-blue-300 transition flex flex-col items-center justify-center"
          >
            <Users className="w-8 h-8 mb-2 text-gray-700" />
            <span className="text-sm font-medium text-gray-700">Library</span>
          </button>
          <button 
            onClick={() => router.push('/match/history')} 
            className="bg-white border-2 border-gray-200 p-6 rounded-xl hover:shadow-lg hover:border-purple-300 transition flex flex-col items-center justify-center"
          >
            <Clock className="w-8 h-8 mb-2 text-gray-700" />
            <span className="text-sm font-medium text-gray-700">History</span>
          </button>
          <button 
            onClick={() => router.push('/help')} 
            className="bg-white border-2 border-gray-200 p-6 rounded-xl hover:shadow-lg hover:border-green-300 transition flex flex-col items-center justify-center"
          >
            <AlertCircle className="w-8 h-8 mb-2 text-gray-700" />
            <span className="text-sm font-medium text-gray-700">Help</span>
          </button>
        </div>

        {/* Getting Started Guide (for new users) */}
        {stats.total === 0 && (
          <div className="bg-gradient-to-r from-purple-50 to-blue-50 rounded-xl border-2 border-purple-200 p-6">
            <h3 className="text-lg font-bold text-purple-900 mb-4">
              🚀 Getting Started with TalentPlus
            </h3>
            <ol className="space-y-3 text-sm text-gray-700">
              <li className="flex gap-3">
                <span className="flex-shrink-0 w-6 h-6 bg-purple-600 text-white rounded-full flex items-center justify-center font-bold text-xs">1</span>
                <span><strong>Upload Resumes:</strong> Go to Library → Click "Add Candidate" → Upload PDF/DOCX files</span>
              </li>
              <li className="flex gap-3">
                <span className="flex-shrink-0 w-6 h-6 bg-purple-600 text-white rounded-full flex items-center justify-center font-bold text-xs">2</span>
                <span><strong>Create a Match:</strong> Go to Match → Paste your job description → Click "Match Candidates"</span>
              </li>
              <li className="flex gap-3">
                <span className="flex-shrink-0 w-6 h-6 bg-purple-600 text-white rounded-full flex items-center justify-center font-bold text-xs">3</span>
                <span><strong>Review Results:</strong> Get instant AI-ranked candidates with match scores and explanations</span>
              </li>
            </ol>
          </div>
        )}
      </div>
    </div>
  );
}
-----------------------------

File: src/app/dashboard/team-lead/page.tsx
Content:

-----------------------------

File: src/app/results/page.tsx
Content:
// src/app/results/page.tsx
'use client';
import { useState, useEffect } from 'react';
import { useRouter } from 'next/navigation';
import GlassCard from '@/components/GlassCard';
import MatchScore from '@/components/MatchScore';

export default function ResultsPage() {
  const router = useRouter();
  const [matches, setMatches] = useState<any[]>([]);

  useEffect(() => {
    const saved = sessionStorage.getItem('matchResults');
    if (saved) {
      try {
        setMatches(JSON.parse(saved));
      } catch (e) {
        console.error('Error parsing match results:', e);
        router.push('/match');
      }
    } else {
      router.push('/match');
    }
  }, [router]);

  if (matches.length === 0) {
    return (
      <div className="min-h-screen flex items-center justify-center">
        <div className="text-center">
          <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"></div>
          <p className="text-gray-600">Loading results...</p>
        </div>
      </div>
    );
  }

  return (
    <div className="min-h-screen bg-gradient-to-br from-green-50 via-white to-blue-50 py-8">
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div className="text-center mb-8">
          <h1 className="text-4xl font-bold text-gray-900 mb-2">Match Results</h1>
          <p className="text-lg text-gray-600">
            Found {matches.length} candidate{matches.length !== 1 ? 's' : ''} matching your job description
          </p>
        </div>

        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          {matches.map((match) => (
            <div key={match.candidateId} className="bg-white rounded-2xl shadow-lg p-6 border border-gray-100 hover:shadow-xl transition-shadow">
              <div className="flex justify-between items-start mb-4">
                <h3 className="text-xl font-bold text-gray-900">{match.candidateName || 'Unknown'}</h3>
                <MatchScore score={match.matchScore} tier={match.tier} />
              </div>
              
              <p className="text-gray-600 mb-4 text-sm">{match.explanation}</p>
              
              <div className="mb-4">
                <div className="text-sm font-medium text-gray-700 mb-2">Matched Skills</div>
                <div className="flex flex-wrap gap-1">
                  {(match.matchedSkills || []).slice(0, 5).map((s: string) => (
                    <span key={s} className="bg-green-100 text-green-800 text-xs px-2 py-1 rounded">
                      {s}
                    </span>
                  ))}
                </div>
              </div>

              {(match.missingSkills || []).length > 0 && (
                <div className="mb-4">
                  <div className="text-sm font-medium text-gray-700 mb-2">Missing Skills</div>
                  <div className="flex flex-wrap gap-1">
                    {match.missingSkills.slice(0, 3).map((s: string) => (
                      <span key={s} className="bg-red-100 text-red-800 text-xs px-2 py-1 rounded">
                        {s}
                      </span>
                    ))}
                  </div>
                </div>
              )}
            </div>
          ))}
        </div>
      </div>
    </div>
  );
}
-----------------------------

File: src/app/layout.tsx
Content:
import '../styles/globals.css';
import type { Metadata } from 'next';
import Navigation from '@/components/Navigation';

export const metadata: Metadata = {
  title: 'TalentPlus – AI Resume Matcher for Recruiters',
  description: 'Match resumes to job descriptions in seconds. AI-powered, export-ready, recruiter-first.',
};

export default function RootLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  return (
    <html lang="en" className="h-full">
      <body className="h-full bg-gradient-to-br from-blue-50 via-white to-purple-50">
        <Navigation />
        <main className="min-h-screen pt-16"> {/* Added padding for fixed nav */}
          {children}
        </main>
      </body>
    </html>
  );
}
-----------------------------

File: src/app/error.tsx
Content:
'use client';

export default function Error({
  error,
  reset,
}: {
  error: Error & { digest?: string };
  reset: () => void;
}) {
  return (
    <div className="min-h-screen flex items-center justify-center bg-gray-50">
      <div className="max-w-md w-full bg-white rounded-lg shadow-lg p-8 text-center">
        <div className="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4">
          <svg className="w-8 h-8 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
          </svg>
        </div>
        <h2 className="text-2xl font-bold text-gray-900 mb-2">Something went wrong!</h2>
        <p className="text-gray-600 mb-6">{error.message || 'An unexpected error occurred'}</p>
        <button
          onClick={reset}
          className="w-full px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 transition"
        >
          Try Again
        </button>
      </div>
    </div>
  );
}

-----------------------------

File: src/app/submissions/[id]/page.tsx
Content:
import React, { useState } from 'react';
import {
  Send, Calendar, MessageSquare, CheckCircle, XCircle, Clock,
  User, Building2, Phone, Mail, Video, FileText, Edit2, Save,
  AlertCircle, TrendingUp, ArrowLeft, Plus, Download, Eye,
  ThumbsUp, ThumbsDown, Flag, Star, History, Link2, ChevronRight,
  Paperclip, Award, Target, Activity, Bell, RefreshCw, Users
} from 'lucide-react';

// ============================================================================
// SUBMISSION DETAIL PAGE (Complete View)
// ============================================================================
export default function SubmissionDetailPage({ submissionId }: { submissionId: string }) {
  const [activeTab, setActiveTab] = useState<'overview' | 'interviews' | 'feedback' | 'timeline'>('overview');
  
  // Mock submission data
  const submission = {
    id: 'SUB-2024-0123',
    candidate: {
      id: 'C-001',
      name: 'John Doe',
      title: 'Senior Full Stack Developer',
      email: 'john.doe@email.com',
      phone: '+32 478 12 34 56',
      location: 'Brussels, Belgium',
      rate: '€650/day',
      availability: 'Available immediately',
      resume_url: '/files/john-doe-resume.pdf'
    },
    job: {
      id: 'JOB-045',
      title: 'Senior Java Developer',
      client: 'TechCorp Solutions',
      rate_range: '€600-700/day',
      location: 'Brussels',
      contract_type: 'Freelance'
    },
    submission_details: {
      submitted_by: 'Sarah Johnson',
      submitted_date: '2025-01-15T10:30:00Z',
      submission_method: 'Email',
      status: 'submitted', // submitted, shortlisted, interview, rejected, offered, accepted
      priority: 'high'
    },
    client_feedback: {
      status: 'shortlisted',
      feedback_date: '2025-01-16T14:00:00Z',
      feedback_by: 'Mike Anderson (Client)',
      comments: 'Strong technical background. Would like to schedule technical interview.',
      rating: 4
    },
    interviews: [
      {
        id: 'INT-001',
        round: 'Technical Interview',
        type: 'video',
        scheduled_date: '2025-01-20T14:00:00Z',
        duration: '60 minutes',
        interviewer: 'Mike Anderson',
        status: 'scheduled',
        meeting_link: 'https://meet.google.com/abc-defg-hij',
        notes: ''
      }
    ],
    screening_checklist: {
      phone_screen_done: true,
      rate_confirmed: true,
      rtr_confirmed: true,
      availability_ok: true,
      visa_ok: true,
      other_submissions_checked: true
    },
    timeline: [
      { id: '1', date: '2025-01-16T14:00:00Z', event: 'Client Feedback', description: 'Candidate shortlisted for interview', user: 'Mike Anderson' },
      { id: '2', date: '2025-01-15T15:30:00Z', event: 'Email Viewed', description: 'Client viewed submission email', user: 'System' },
      { id: '3', date: '2025-01-15T10:30:00Z', event: 'Submitted to Client', description: 'Candidate profile sent to TechCorp Solutions', user: 'Sarah Johnson' },
      { id: '4', date: '2025-01-15T09:00:00Z', event: 'Team Approved', description: 'Approved for client submission', user: 'Team Lead' },
      { id: '5', date: '2025-01-14T16:45:00Z', event: 'Screening Complete', description: 'All mandatory checks completed', user: 'Sarah Johnson' }
    ]
  };

  return (
    <div className="min-h-screen bg-gray-50">
      {/* Header */}
      <div className="bg-white border-b border-gray-200">
        <div className="p-6 max-w-7xl mx-auto">
          <button
            onClick={() => window.history.back()}
            className="flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4"
          >
            <ArrowLeft className="w-5 h-5" />
            Back to Submissions
          </button>

          <div className="flex items-start justify-between">
            <div className="flex-1">
              <div className="flex items-center gap-3 mb-2">
                <h1 className="text-2xl font-bold text-gray-900">{submission.candidate.name}</h1>
                <SubmissionStatusBadge status={submission.submission_details.status} />
                {submission.submission_details.priority === 'high' && (
                  <span className="px-3 py-1 bg-red-100 text-red-700 rounded-full text-sm font-medium flex items-center gap-1">
                    <Flag className="w-4 h-4" />
                    High Priority
                  </span>
                )}
              </div>
              <p className="text-gray-600 mb-1">{submission.candidate.title}</p>
              <p className="text-sm text-gray-500">
                For: <span className="font-semibold">{submission.job.title}</span> at{' '}
                <span className="font-semibold">{submission.job.client}</span>
              </p>
              <p className="text-xs text-gray-500 mt-2">
                Submission ID: {submission.id} • Submitted {new Date(submission.submission_details.submitted_date).toLocaleDateString()}
              </p>
            </div>

            {/* Quick Actions */}
            <div className="flex items-center gap-2">
              <button className="px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-2">
                <Download className="w-4 h-4" />
                Download
              </button>
              <button className="px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-2">
                <Mail className="w-4 h-4" />
                Email Client
              </button>
              <button className="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2">
                <Calendar className="w-4 h-4" />
                Schedule Interview
              </button>
            </div>
          </div>

          {/* Tabs */}
          <div className="flex gap-6 mt-6 border-b border-gray-200">
            <TabButton
              active={activeTab === 'overview'}
              onClick={() => setActiveTab('overview')}
              label="Overview"
            />
            <TabButton
              active={activeTab === 'interviews'}
              onClick={() => setActiveTab('interviews')}
              label="Interviews"
              badge={submission.interviews.length}
            />
            <TabButton
              active={activeTab === 'feedback'}
              onClick={() => setActiveTab('feedback')}
              label="Client Feedback"
            />
            <TabButton
              active={activeTab === 'timeline'}
              onClick={() => setActiveTab('timeline')}
              label="Timeline"
            />
          </div>
        </div>
      </div>

      {/* Content */}
      <div className="p-6 max-w-7xl mx-auto">
        {activeTab === 'overview' && <OverviewTab submission={submission} />}
        {activeTab === 'interviews' && <InterviewsTab submission={submission} />}
        {activeTab === 'feedback' && <FeedbackTab submission={submission} />}
        {activeTab === 'timeline' && <TimelineTab submission={submission} />}
      </div>
    </div>
  );
}

// ============================================================================
// OVERVIEW TAB
// ============================================================================
function OverviewTab({ submission }: any) {
  return (
    <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
      {/* Left Column - Candidate & Job Info */}
      <div className="lg:col-span-2 space-y-6">
        {/* Candidate Profile */}
        <div className="bg-white rounded-lg border border-gray-200 p-6">
          <div className="flex items-start justify-between mb-4">
            <h2 className="text-lg font-semibold text-gray-900">Candidate Profile</h2>
            <button className="text-sm text-blue-600 hover:text-blue-700 font-medium flex items-center gap-1">
              <Eye className="w-4 h-4" />
              View Full Profile
            </button>
          </div>

          <div className="grid grid-cols-2 gap-4 mb-4">
            <InfoRow icon={User} label="Name" value={submission.candidate.name} />
            <InfoRow icon={Building2} label="Current Title" value={submission.candidate.title} />
            <InfoRow icon={Mail} label="Email" value={submission.candidate.email} />
            <InfoRow icon={Phone} label="Phone" value={submission.candidate.phone} />
            <InfoRow icon={Clock} label="Availability" value={submission.candidate.availability} />
            <InfoRow icon={Target} label="Rate" value={submission.candidate.rate} />
          </div>

          <div className="pt-4 border-t border-gray-200">
            <button className="w-full px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center justify-center gap-2">
              <Paperclip className="w-4 h-4" />
              View Resume / CV
            </button>
          </div>
        </div>

        {/* Job Details */}
        <div className="bg-white rounded-lg border border-gray-200 p-6">
          <h2 className="text-lg font-semibold text-gray-900 mb-4">Job Details</h2>
          <div className="grid grid-cols-2 gap-4">
            <InfoRow label="Job ID" value={submission.job.id} />
            <InfoRow label="Client" value={submission.job.client} />
            <InfoRow label="Position" value={submission.job.title} />
            <InfoRow label="Location" value={submission.job.location} />
            <InfoRow label="Contract Type" value={submission.job.contract_type} />
            <InfoRow label="Rate Range" value={submission.job.rate_range} />
          </div>
        </div>

        {/* Screening Checklist Summary */}
        <div className="bg-white rounded-lg border border-gray-200 p-6">
          <h2 className="text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2">
            <CheckCircle className="w-5 h-5 text-green-600" />
            Pre-Screening Checklist
          </h2>
          <div className="grid grid-cols-2 md:grid-cols-3 gap-3">
            <ChecklistItem label="Phone Screen" checked={submission.screening_checklist.phone_screen_done} />
            <ChecklistItem label="Rate Confirmed" checked={submission.screening_checklist.rate_confirmed} />
            <ChecklistItem label="RTR Confirmed" checked={submission.screening_checklist.rtr_confirmed} />
            <ChecklistItem label="Availability OK" checked={submission.screening_checklist.availability_ok} />
            <ChecklistItem label="Visa Status OK" checked={submission.screening_checklist.visa_ok} />
            <ChecklistItem label="No Conflicts" checked={submission.screening_checklist.other_submissions_checked} />
          </div>
        </div>
      </div>

      {/* Right Column - Status & Actions */}
      <div className="space-y-6">
        {/* Submission Status */}
        <div className="bg-white rounded-lg border border-gray-200 p-6">
          <h3 className="text-lg font-semibold text-gray-900 mb-4">Submission Status</h3>
          <SubmissionProgressTracker status={submission.submission_details.status} />
        </div>

        {/* Latest Feedback */}
        {submission.client_feedback && (
          <div className="bg-white rounded-lg border border-gray-200 p-6">
            <h3 className="text-lg font-semibold text-gray-900 mb-4">Latest Client Feedback</h3>
            <div className="space-y-3">
              <div className="flex items-center justify-between">
                <span className="text-sm text-gray-600">Status</span>
                <SubmissionStatusBadge status={submission.client_feedback.status} />
              </div>
              <div className="flex items-center justify-between">
                <span className="text-sm text-gray-600">Rating</span>
                <StarRating rating={submission.client_feedback.rating} />
              </div>
              <div className="pt-3 border-t border-gray-200">
                <p className="text-sm text-gray-700">{submission.client_feedback.comments}</p>
                <p className="text-xs text-gray-500 mt-2">
                  {submission.client_feedback.feedback_by} • {new Date(submission.client_feedback.feedback_date).toLocaleDateString()}
                </p>
              </div>
            </div>
          </div>
        )}

        {/* Quick Actions */}
        <div className="bg-gradient-to-br from-blue-600 to-purple-600 rounded-lg p-6 text-white">
          <h3 className="text-lg font-semibold mb-4">Quick Actions</h3>
          <div className="space-y-2">
            <button className="w-full px-4 py-2 bg-white bg-opacity-20 hover:bg-opacity-30 rounded-lg text-left font-medium transition-colors">
              📅 Schedule Interview
            </button>
            <button className="w-full px-4 py-2 bg-white bg-opacity-20 hover:bg-opacity-30 rounded-lg text-left font-medium transition-colors">
              📧 Email Client Update
            </button>
            <button className="w-full px-4 py-2 bg-white bg-opacity-20 hover:bg-opacity-30 rounded-lg text-left font-medium transition-colors">
              📞 Call Candidate
            </button>
            <button className="w-full px-4 py-2 bg-white bg-opacity-20 hover:bg-opacity-30 rounded-lg text-left font-medium transition-colors">
              📝 Add Note
            </button>
          </div>
        </div>
      </div>
    </div>
  );
}

// ============================================================================
// INTERVIEWS TAB
// ============================================================================
function InterviewsTab({ submission }: any) {
  const [showScheduleModal, setShowScheduleModal] = useState(false);

  return (
    <div className="space-y-6">
      {/* Schedule New Interview */}
      <div className="bg-white rounded-lg border border-gray-200 p-6">
        <div className="flex items-center justify-between mb-4">
          <h2 className="text-lg font-semibold text-gray-900">Interview Schedule</h2>
          <button
            onClick={() => setShowScheduleModal(true)}
            className="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2"
          >
            <Plus className="w-4 h-4" />
            Schedule Interview
          </button>
        </div>

        {/* Interview List */}
        {submission.interviews.length === 0 ? (
          <div className="text-center py-8">
            <Calendar className="w-12 h-12 text-gray-300 mx-auto mb-3" />
            <p className="text-gray-500 mb-4">No interviews scheduled yet</p>
            <button
              onClick={() => setShowScheduleModal(true)}
              className="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"
            >
              Schedule First Interview
            </button>
          </div>
        ) : (
          <div className="space-y-4">
            {submission.interviews.map((interview: any) => (
              <InterviewCard key={interview.id} interview={interview} />
            ))}
          </div>
        )}
      </div>

      {/* Interview Preparation Checklist */}
      <div className="bg-white rounded-lg border border-gray-200 p-6">
        <h3 className="text-lg font-semibold text-gray-900 mb-4">Interview Preparation</h3>
        <div className="space-y-3">
          <CheckboxItem label="Send interview invite to candidate" />
          <CheckboxItem label="Share job description with candidate" />
          <CheckboxItem label="Brief candidate on company culture" />
          <CheckboxItem label="Confirm candidate availability" />
          <CheckboxItem label="Send reminder 24 hours before" />
          <CheckboxItem label="Prepare interview questions" />
        </div>
      </div>

      {/* Schedule Interview Modal */}
      {showScheduleModal && (
        <ScheduleInterviewModal
          submission={submission}
          onClose={() => setShowScheduleModal(false)}
        />
      )}
    </div>
  );
}

// ============================================================================
// FEEDBACK TAB
// ============================================================================
function FeedbackTab({ submission }: any) {
  const [newFeedback, setNewFeedback] = useState({
    status: 'shortlisted',
    rating: 0,
    comments: ''
  });

  return (
    <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
      {/* Add New Feedback */}
      <div className="bg-white rounded-lg border border-gray-200 p-6">
        <h2 className="text-lg font-semibold text-gray-900 mb-4">Record Client Feedback</h2>
        
        <div className="space-y-4">
          {/* Status */}
          <div>
            <label className="block text-sm font-medium text-gray-700 mb-2">
              Client Decision
            </label>
            <select
              value={newFeedback.status}
              onChange={(e) => setNewFeedback({...newFeedback, status: e.target.value})}
              className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
            >
              <option value="shortlisted">✅ Shortlisted</option>
              <option value="interview">📅 Schedule Interview</option>
              <option value="rejected">❌ Rejected</option>
              <option value="hold">⏸️ On Hold</option>
            </select>
          </div>

          {/* Rating */}
          <div>
            <label className="block text-sm font-medium text-gray-700 mb-2">
              Client Rating
            </label>
            <div className="flex gap-2">
              {[1, 2, 3, 4, 5].map((rating) => (
                <button
                  key={rating}
                  onClick={() => setNewFeedback({...newFeedback, rating})}
                  className={`w-10 h-10 rounded-lg border-2 transition-colors ${
                    newFeedback.rating >= rating
                      ? 'border-yellow-500 bg-yellow-50'
                      : 'border-gray-300 hover:border-gray-400'
                  }`}
                >
                  <Star className={`w-6 h-6 mx-auto ${
                    newFeedback.rating >= rating ? 'text-yellow-500 fill-yellow-500' : 'text-gray-300'
                  }`} />
                </button>
              ))}
            </div>
          </div>

          {/* Comments */}
          <div>
            <label className="block text-sm font-medium text-gray-700 mb-2">
              Feedback Comments
            </label>
            <textarea
              value={newFeedback.comments}
              onChange={(e) => setNewFeedback({...newFeedback, comments: e.target.value})}
              className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
              rows={6}
              placeholder="Enter client's feedback, concerns, questions..."
            />
          </div>

          {/* Save Button */}
          <button className="w-full px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium flex items-center justify-center gap-2">
            <Save className="w-5 h-5" />
            Save Feedback
          </button>
        </div>
      </div>

      {/* Feedback History */}
      <div className="bg-white rounded-lg border border-gray-200 p-6">
        <h2 className="text-lg font-semibold text-gray-900 mb-4">Feedback History</h2>
        
        {submission.client_feedback ? (
          <div className="space-y-4">
            <FeedbackHistoryItem feedback={submission.client_feedback} />
          </div>
        ) : (
          <div className="text-center py-8">
            <MessageSquare className="w-12 h-12 text-gray-300 mx-auto mb-3" />
            <p className="text-gray-500">No feedback recorded yet</p>
          </div>
        )}
      </div>
    </div>
  );
}

// ============================================================================
// TIMELINE TAB
// ============================================================================
function TimelineTab({ submission }: any) {
  return (
    <div className="bg-white rounded-lg border border-gray-200 p-6">
      <h2 className="text-lg font-semibold text-gray-900 mb-6">Submission Timeline</h2>
      
      <div className="relative">
        {/* Timeline Line */}
        <div className="absolute left-6 top-0 bottom-0 w-0.5 bg-gray-200"></div>

        {/* Timeline Items */}
        <div className="space-y-6">
          {submission.timeline.map((item: any, index: number) => (
            <TimelineItem key={item.id} item={item} isLast={index === submission.timeline.length - 1} />
          ))}
        </div>
      </div>
    </div>
  );
}

// ============================================================================
// SCHEDULE INTERVIEW MODAL
// ============================================================================
function ScheduleInterviewModal({ submission, onClose }: any) {
  const [interviewData, setInterviewData] = useState({
    round: 'Technical Interview',
    type: 'video',
    date: '',
    time: '',
    duration: '60',
    interviewer: '',
    location: '',
    meeting_link: '',
    notes: ''
  });

  return (
    <div className="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
      <div className="bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden">
        {/* Header */}
        <div className="p-6 border-b border-gray-200 bg-gradient-to-r from-blue-600 to-purple-600 text-white">
          <h2 className="text-2xl font-bold mb-2">Schedule Interview</h2>
          <p className="text-blue-100">
            {submission.candidate.name} for {submission.job.title}
          </p>
        </div>

        {/* Form */}
        <div className="p-6 overflow-y-auto max-h-[calc(90vh-200px)]">
          <div className="space-y-4">
            {/* Interview Round */}
            <div>
              <label className="block text-sm font-medium text-gray-700 mb-2">Interview Round</label>
              <select
                value={interviewData.round}
                onChange={(e) => setInterviewData({...interviewData, round: e.target.value})}
                className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
              >
                <option>Phone Screening</option>
                <option>Technical Interview</option>
                <option>Cultural Fit</option>
                <option>Final Interview</option>
                <option>Client Interview</option>
              </select>
            </div>

            {/* Interview Type */}
            <div>
              <label className="block text-sm font-medium text-gray-700 mb-2">Interview Type</label>
              <div className="grid grid-cols-3 gap-3">
                <button
                  onClick={() => setInterviewData({...interviewData, type: 'video'})}
                  className={`p-3 border-2 rounded-lg flex flex-col items-center gap-2 ${
                    interviewData.type === 'video' ? 'border-blue-500 bg-blue-50' : 'border-gray-300'
                  }`}
                >
                  <Video className="w-5 h-5" />
                  <span className="text-sm font-medium">Video</span>
                </button>
                <button
                  onClick={() => setInterviewData({...interviewData, type: 'phone'})}
                  className={`p-3 border-2 rounded-lg flex flex-col items-center gap-2 ${
                    interviewData.type === 'phone' ? 'border-blue-500 bg-blue-50' : 'border-gray-300'
                  }`}
                >
                  <Phone className="w-5 h-5" />
                  <span className="text-sm font-medium">Phone</span>
                </button>
                <button
                  onClick={() => setInterviewData({...interviewData, type: 'in-person'})}
                  className={`p-3 border-2 rounded-lg flex flex-col items-center gap-2 ${
                    interviewData.type === 'in-person' ? 'border-blue-500 bg-blue-50' : 'border-gray-300'
                  }`}
                >
                  <Users className="w-5 h-5" />
                  <span className="text-sm font-medium">In-Person</span>
                </button>
              </div>
            </div>

            {/* Date & Time */}
            <div className="grid grid-cols-2 gap-4">
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">Date</label>
                <input
                  type="date"
                  value={interviewData.date}
                  onChange={(e) => setInterviewData({...interviewData, date: e.target.value})}
                  className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                />
              </div>
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">Time</label>
                <input
                  type="time"
                  value={interviewData.time}
                  onChange={(e) => setInterviewData({...interviewData, time: e.target.value})}
                  className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                />
              </div>
            </div>

            {/* Duration & Interviewer */}
            <div className="grid grid-cols-2 gap-4">
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">Duration (minutes)</label>
                <select
                  value={interviewData.duration}
                  onChange={(e) => setInterviewData({...interviewData, duration: e.target.value})}
                  className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                >
                  <option value="30">30 minutes</option>
                  <option value="60">60 minutes</option>
                  <option value="90">90 minutes</option>
                  <option value="120">120 minutes</option>
                </select>
              </div>
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">Interviewer</label>
                <input
                  type="text"
                  value={interviewData.interviewer}
                  onChange={(e) => setInterviewData({...interviewData, interviewer: e.target.value})}
                  className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                  placeholder="Client contact name"
                />
              </div>
            </div>

            {/* Meeting Link (if video) */}
            {interviewData.type === 'video' && (
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">Meeting Link</label>
                <input
                  type="url"
                  value={interviewData.meeting_link}
                  onChange={(e) => setInterviewData({...interviewData, meeting_link: e.target.value})}
                  className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                  placeholder="https://meet.google.com/..."
                />
              </div>
            )}

            {/* Location (if in-person) */}
            {interviewData.type === 'in-person' && (
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">Location</label>
                <input
                  type="text"
                  value={interviewData.location}
                  onChange={(e) => setInterviewData({...interviewData, location: e.target.value})}
                  className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                  placeholder="Office address"
                />
              </div>
            )}

            {/* Notes */}
            <div>
              <label className="block text-sm font-medium text-gray-700 mb-2">Interview Notes</label>
              <textarea
                value={interviewData.notes}
                onChange={(e) => setInterviewData({...interviewData, notes: e.target.value})}
                className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                rows={3}
                placeholder="Any special instructions or topics to cover..."
              />
            </div>
          </div>
        </div>

        {/* Footer */}
        <div className="p-6 border-t border-gray-200 bg-gray-50 flex gap-3">
          <button
            onClick={onClose}
            className="flex-1 px-4 py-3 border border-gray-300 rounded-lg hover:bg-white font-medium"
          >
            Cancel
          </button>
          <button
            onClick={() => {
              // Save interview logic
              onClose();
            }}
            className="flex-1 px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium flex items-center justify-center gap-2"
          >
            <Calendar className="w-5 h-5" />
            Schedule Interview
          </button>
        </div>
      </div>
    </div>
  );
}

// ============================================================================
// HELPER COMPONENTS
// ============================================================================
function TabButton({ active, onClick, label, badge }: any) {
  return (
    <button
      onClick={onClick}
      className={`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${
        active
          ? 'border-blue-600 text-blue-600'
          : 'border-transparent text-gray-600 hover:text-gray-900'
      }`}
    >
      {label}
      {badge !== undefined && (
        <span className="ml-2 px-2 py-0.5 bg-gray-100 text-gray-600 rounded-full text-xs">
          {badge}
        </span>
      )}
    </button>
  );
}

function SubmissionStatusBadge({ status }: any) {
  const config = {
    submitted: { label: 'Submitted', color: 'bg-blue-100 text-blue-700 border-blue-300' },
    shortlisted: { label: 'Shortlisted', color: 'bg-green-100 text-green-700 border-green-300' },
    interview: { label: 'Interview', color: 'bg-purple-100 text-purple-700 border-purple-300' },
    rejected: { label: 'Rejected', color: 'bg-red-100 text-red-700 border-red-300' },
    offered: { label: 'Offered', color: 'bg-teal-100 text-teal-700 border-teal-300' },
    accepted: { label: 'Accepted', color: 'bg-green-100 text-green-700 border-green-300' }
  };

  const { label, color } = config[status as keyof typeof config] || config.submitted;

  return (
    <span className={`px-3 py-1 rounded-full text-sm font-medium border ${color}`}>
      {label}
    </span>
  );
}

function SubmissionProgressTracker({ status }: any) {
  const steps = [
    { key: 'submitted', label: 'Submitted', icon: Send },
    { key: 'shortlisted', label: 'Shortlisted', icon: CheckCircle },
    { key: 'interview', label: 'Interview', icon: Video },
    { key: 'offered', label: 'Offered', icon: Award },
    { key: 'accepted', label: 'Hired', icon: Star }
  ];

  const currentIndex = steps.findIndex(s => s.key === status);

  return (
    <div className="space-y-3">
      {steps.map((step, index) => {
        const Icon = step.icon;
        const isComplete = index <= currentIndex;
        const isCurrent = index === currentIndex;

        return (
          <div key={step.key} className="flex items-center gap-3">
            <div className={`w-10 h-10 rounded-full flex items-center justify-center ${
              isComplete ? 'bg-green-600 text-white' :
              isCurrent ? 'bg-blue-600 text-white' :
              'bg-gray-200 text-gray-400'
            }`}>
              <Icon className="w-5 h-5" />
            </div>
            <div className="flex-1">
              <div className={`font-medium ${isComplete || isCurrent ? 'text-gray-900' : 'text-gray-400'}`}>
                {step.label}
              </div>
            </div>
            {isComplete && <CheckCircle className="w-5 h-5 text-green-600" />}
          </div>
        );
      })}
    </div>
  );
}

function InfoRow({ icon: Icon, label, value }: any) {
  return (
    <div className="flex items-start gap-2">
      {Icon && <Icon className="w-4 h-4 text-gray-400 mt-0.5" />}
      <div className="flex-1 min-w-0">
        <div className="text-xs text-gray-500">{label}</div>
        <div className="text-sm text-gray-900 font-medium truncate">{value}</div>
      </div>
    </div>
  );
}

function ChecklistItem({ label, checked }: any) {
  return (
    <div className={`p-3 rounded-lg border ${
      checked ? 'bg-green-50 border-green-200' : 'bg-gray-50 border-gray-200'
    }`}>
      <div className="flex items-center gap-2">
        {checked ? (
          <CheckCircle className="w-4 h-4 text-green-600" />
        ) : (
          <XCircle className="w-4 h-4 text-gray-400" />
        )}
        <span className={`text-sm font-medium ${checked ? 'text-green-900' : 'text-gray-600'}`}>
          {label}
        </span>
      </div>
    </div>
  );
}

function StarRating({ rating }: any) {
  return (
    <div className="flex gap-1">
      {[1, 2, 3, 4, 5].map((star) => (
        <Star
          key={star}
          className={`w-4 h-4 ${
            star <= rating ? 'text-yellow-500 fill-yellow-500' : 'text-gray-300'
          }`}
        />
      ))}
    </div>
  );
}

function InterviewCard({ interview }: any) {
  const typeIcons = {
    video: Video,
    phone: Phone,
    'in-person': Users
  };
  const Icon = typeIcons[interview.type as keyof typeof typeIcons];

  return (
    <div className="border border-gray-200 rounded-lg p-4 hover:border-blue-300 transition-colors">
      <div className="flex items-start justify-between mb-3">
        <div className="flex items-center gap-3">
          <div className="p-2 bg-purple-50 rounded-lg">
            <Icon className="w-5 h-5 text-purple-600" />
          </div>
          <div>
            <h4 className="font-semibold text-gray-900">{interview.round}</h4>
            <p className="text-sm text-gray-600 capitalize">{interview.type} interview</p>
          </div>
        </div>
        <span className="px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs font-medium">
          {interview.status}
        </span>
      </div>

      <div className="grid grid-cols-2 gap-3 text-sm mb-3">
        <div className="flex items-center gap-2 text-gray-600">
          <Calendar className="w-4 h-4" />
          {new Date(interview.scheduled_date).toLocaleDateString()}
        </div>
        <div className="flex items-center gap-2 text-gray-600">
          <Clock className="w-4 h-4" />
          {new Date(interview.scheduled_date).toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}
        </div>
        <div className="flex items-center gap-2 text-gray-600">
          <User className="w-4 h-4" />
          {interview.interviewer}
        </div>
        <div className="flex items-center gap-2 text-gray-600">
          <Clock className="w-4 h-4" />
          {interview.duration}
        </div>
      </div>

      {interview.meeting_link && (
        <a
          href={interview.meeting_link}
          target="_blank"
          rel="noopener noreferrer"
          className="flex items-center gap-2 text-sm text-blue-600 hover:text-blue-700 font-medium"
        >
          <Link2 className="w-4 h-4" />
          Join Meeting
        </a>
      )}

      <div className="flex gap-2 mt-3">
        <button className="flex-1 px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 text-sm font-medium">
          Edit
        </button>
        <button className="flex-1 px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 text-sm font-medium">
          Cancel
        </button>
      </div>
    </div>
  );
}

function FeedbackHistoryItem({ feedback }: any) {
  return (
    <div className="border border-gray-200 rounded-lg p-4">
      <div className="flex items-start justify-between mb-3">
        <div>
          <SubmissionStatusBadge status={feedback.status} />
          <p className="text-sm text-gray-600 mt-2">{feedback.feedback_by}</p>
          <p className="text-xs text-gray-500">
            {new Date(feedback.feedback_date).toLocaleDateString()}
          </p>
        </div>
        <StarRating rating={feedback.rating} />
      </div>
      <p className="text-sm text-gray-700">{feedback.comments}</p>
    </div>
  );
}

function TimelineItem({ item, isLast }: any) {
  const eventIcons = {
    'Client Feedback': MessageSquare,
    'Email Viewed': Mail,
    'Submitted to Client': Send,
    'Team Approved': CheckCircle,
    'Screening Complete': ClipboardCheck
  };
  const Icon = eventIcons[item.event as keyof typeof eventIcons] || Activity;

  return (
    <div className="relative flex gap-4 pl-2">
      {/* Icon */}
      <div className="relative z-10 flex-shrink-0">
        <div className="w-12 h-12 rounded-full bg-blue-50 border-4 border-white flex items-center justify-center">
          <Icon className="w-5 h-5 text-blue-600" />
        </div>
      </div>

      {/* Content */}
      <div className="flex-1 pb-6">
        <div className="bg-gray-50 rounded-lg p-4 border border-gray-200">
          <div className="flex items-start justify-between mb-2">
            <h4 className="font-semibold text-gray-900">{item.event}</h4>
            <span className="text-xs text-gray-500">
              {new Date(item.date).toLocaleString()}
            </span>
          </div>
          <p className="text-sm text-gray-700 mb-2">{item.description}</p>
          <p className="text-xs text-gray-500">By: {item.user}</p>
        </div>
      </div>
    </div>
  );
}

function CheckboxItem({ label }: any) {
  return (
    <label className="flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 cursor-pointer transition-colors">
      <input
        type="checkbox"
        className="w-5 h-5 text-blue-600 rounded border-gray-300 focus:ring-2 focus:ring-blue-500"
      />
      <span className="text-sm text-gray-700">{label}</span>
    </label>
  );
}
-----------------------------

File: src/app/submissions/page.tsx
Content:

-----------------------------

File: src/app/loading.tsx
Content:
export default function Loading() {
    return (
      <div className="min-h-screen flex items-center justify-center bg-gray-50">
        <div className="text-center">
          <div className="animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600 mx-auto mb-4"></div>
          <p className="text-xl text-gray-600">Loading...</p>
        </div>
      </div>
    );
  }
  
-----------------------------

File: src/app/jobs/components/JobCard.tsx
Content:

-----------------------------

File: src/app/jobs/components/KanbanView.tsx
Content:

-----------------------------

File: src/app/jobs/components/ListView.tsx
Content:

-----------------------------

File: src/app/jobs/components/GridView.tsx
Content:

-----------------------------

File: src/app/jobs/new/page.tsx
Content:
// src/app/jobs/new/page.tsx
'use client';

import { useState } from 'react';
import { useRouter } from 'next/navigation';
import {
  Building2, Sparkles, ChevronRight, ChevronLeft, Check,
  MapPin, DollarSign, Calendar, Users, Briefcase, Globe,
  Plus, X, Loader2, AlertCircle
} from 'lucide-react';

type Step = 'source' | 'details' | 'requirements';

interface JobFormData {
  // Step 1: Source
  source_type: 'direct_client' | 'consultancy' | 'job_board' | '';
  client_id: string;
  client_name: string;
  client_contact: string;
  client_email: string;
  agency_id: string;
  agency_name: string;
  
  // Step 2: Details
  job_title: string;
  location: string;
  country: string;
  contract_type: 'freelance' | 'permanent' | '';
  num_positions: number;
  duration: string;
  start_date: string;
  daily_rate: string;
  annual_salary: string;
  currency: string;
  job_description: string;
  
  // Step 3: Requirements
  required_skills: string[];
  optional_skills: string[];
  experience_years: string;
  education_level: string;
  certifications: string[];
  priority: 'low' | 'medium' | 'high' | 'urgent';
  assigned_to: string;
  internal_notes: string;
}

const INITIAL_FORM_DATA: JobFormData = {
  source_type: '',
  client_id: '',
  client_name: '',
  client_contact: '',
  client_email: '',
  agency_id: '',
  agency_name: '',
  job_title: '',
  location: '',
  country: '',
  contract_type: '',
  num_positions: 1,
  duration: '',
  start_date: '',
  daily_rate: '',
  annual_salary: '',
  currency: 'EUR',
  job_description: '',
  required_skills: [],
  optional_skills: [],
  experience_years: '',
  education_level: '',
  certifications: [],
  priority: 'medium',
  assigned_to: '',
  internal_notes: ''
};

export default function JobCreationWizard() {
  const router = useRouter();
  const [currentStep, setCurrentStep] = useState<Step>('source');
  const [formData, setFormData] = useState<JobFormData>(INITIAL_FORM_DATA);
  const [saving, setSaving] = useState(false);
  const [errors, setErrors] = useState<Record<string, string>>({});

  const steps = [
    { key: 'source', label: 'Source', icon: Building2 },
    { key: 'details', label: 'Job Details', icon: Briefcase },
    { key: 'requirements', label: 'Requirements', icon: Users }
  ];

  const currentStepIndex = steps.findIndex(s => s.key === currentStep);

  const validateStep = (step: Step): boolean => {
    const newErrors: Record<string, string> = {};

    if (step === 'source') {
      if (!formData.source_type) {
        newErrors.source_type = 'Please select a source';
      }
      if (formData.source_type === 'direct_client' && !formData.client_id && !formData.client_name) {
        newErrors.client = 'Please select or add a client';
      }
      if (formData.source_type === 'consultancy' && !formData.agency_id && !formData.agency_name) {
        newErrors.agency = 'Please select or add an agency';
      }
    }

    if (step === 'details') {
      if (!formData.job_title) newErrors.job_title = 'Job title is required';
      if (!formData.location) newErrors.location = 'Location is required';
      if (!formData.contract_type) newErrors.contract_type = 'Contract type is required';
      if (!formData.job_description || formData.job_description.length < 100) {
        newErrors.job_description = 'Job description must be at least 100 characters';
      }
    }

    if (step === 'requirements') {
      if (formData.required_skills.length === 0) {
        newErrors.required_skills = 'Add at least one required skill';
      }
    }

    setErrors(newErrors);
    return Object.keys(newErrors).length === 0;
  };

  const handleNext = () => {
    if (validateStep(currentStep)) {
      const nextIndex = currentStepIndex + 1;
      if (nextIndex < steps.length) {
        setCurrentStep(steps[nextIndex].key as Step);
      }
    }
  };

  const handleBack = () => {
    const prevIndex = currentStepIndex - 1;
    if (prevIndex >= 0) {
      setCurrentStep(steps[prevIndex].key as Step);
    }
  };

  const handleSubmit = async () => {
    if (!validateStep('requirements')) return;

    setSaving(true);
    try {
      // API call will go here
      // const response = await fetch('/api/jobs', {
      //   method: 'POST',
      //   headers: { 'Content-Type': 'application/json' },
      //   body: JSON.stringify(formData)
      // });
      
      await new Promise(resolve => setTimeout(resolve, 1000)); // Simulate API
      
      router.push('/jobs');
    } catch (error) {
      alert('Failed to create job. Please try again.');
    } finally {
      setSaving(false);
    }
  };

  return (
    <div className="min-h-screen bg-gray-50 p-4 md:p-6">
      <div className="max-w-4xl mx-auto">
        {/* Header */}
        <div className="mb-8">
          <button
            onClick={() => router.push('/jobs')}
            className="text-sm text-gray-600 hover:text-gray-900 mb-4 flex items-center gap-1"
          >
            <ChevronLeft className="w-4 h-4" />
            Back to Jobs
          </button>
          <h1 className="text-3xl font-bold text-gray-900">Create New Job</h1>
          <p className="text-gray-600 mt-1">Complete the form to add a new position</p>
        </div>

        {/* Progress Steps */}
        <div className="mb-8">
          <div className="flex items-center justify-between">
            {steps.map((step, index) => {
              const Icon = step.icon;
              const isCompleted = index < currentStepIndex;
              const isCurrent = index === currentStepIndex;

              return (
                <div key={step.key} className="flex items-center flex-1">
                  <div className="flex flex-col items-center">
                    <div
                      className={`w-12 h-12 rounded-full flex items-center justify-center border-2 transition-colors ${
                        isCompleted
                          ? 'bg-green-600 border-green-600 text-white'
                          : isCurrent
                          ? 'bg-blue-600 border-blue-600 text-white'
                          : 'bg-white border-gray-300 text-gray-400'
                      }`}
                    >
                      {isCompleted ? (
                        <Check className="w-6 h-6" />
                      ) : (
                        <Icon className="w-6 h-6" />
                      )}
                    </div>
                    <span
                      className={`text-sm font-medium mt-2 ${
                        isCurrent ? 'text-gray-900' : 'text-gray-500'
                      }`}
                    >
                      {step.label}
                    </span>
                  </div>
                  {index < steps.length - 1 && (
                    <div
                      className={`flex-1 h-0.5 mx-4 ${
                        isCompleted ? 'bg-green-600' : 'bg-gray-300'
                      }`}
                    ></div>
                  )}
                </div>
              );
            })}
          </div>
        </div>

        {/* Form Content */}
        <div className="bg-white rounded-xl shadow-lg border">
          <div className="p-6 md:p-8">
            {currentStep === 'source' && (
              <SourceStep formData={formData} setFormData={setFormData} errors={errors} />
            )}
            {currentStep === 'details' && (
              <DetailsStep formData={formData} setFormData={setFormData} errors={errors} />
            )}
            {currentStep === 'requirements' && (
              <RequirementsStep formData={formData} setFormData={setFormData} errors={errors} />
            )}
          </div>

          {/* Navigation */}
          <div className="p-6 bg-gray-50 border-t flex items-center justify-between">
            <button
              onClick={handleBack}
              disabled={currentStepIndex === 0}
              className="px-5 py-2.5 border border-gray-300 rounded-lg hover:bg-white disabled:opacity-50 disabled:cursor-not-allowed font-medium flex items-center gap-2"
            >
              <ChevronLeft className="w-5 h-5" />
              Back
            </button>

            {currentStepIndex < steps.length - 1 ? (
              <button
                onClick={handleNext}
                className="px-6 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium flex items-center gap-2"
              >
                Continue
                <ChevronRight className="w-5 h-5" />
              </button>
            ) : (
              <button
                onClick={handleSubmit}
                disabled={saving}
                className="px-6 py-2.5 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:from-blue-700 hover:to-purple-700 disabled:opacity-50 font-medium flex items-center gap-2"
              >
                {saving ? (
                  <>
                    <Loader2 className="w-5 h-5 animate-spin" />
                    Creating...
                  </>
                ) : (
                  <>
                    <Check className="w-5 h-5" />
                    Create Job
                  </>
                )}
              </button>
            )}
          </div>
        </div>
      </div>
    </div>
  );
}

// Step 1: Source Selection
function SourceStep({ formData, setFormData, errors }: any) {
  const [showClientForm, setShowClientForm] = useState(false);
  const [showAgencyForm, setShowAgencyForm] = useState(false);

  const sources = [
    {
      value: 'direct_client',
      label: 'Direct Client',
      icon: Building2,
      description: 'Job from your client company'
    },
    {
      value: 'consultancy',
      label: 'Consultancy/Agency',
      icon: Users,
      description: 'Job from another agency'
    },
    {
      value: 'job_board',
      label: 'Job Board',
      icon: Globe,
      description: 'LinkedIn, Indeed, etc.'
    }
  ];

  // Mock data - will be replaced with API
  const mockClients = [
    { id: '1', name: 'TechCorp Solutions', contact: 'John Smith', email: 'john@tech.com' },
    { id: '2', name: 'DataFlow Inc', contact: 'Sarah Lee', email: 'sarah@data.com' }
  ];

  const mockAgencies = [
    { id: '1', name: 'Randstad Belgium', contact: 'Anna Wilson', email: 'anna@randstad.be' }
  ];

  return (
    <div className="space-y-6">
      <div>
        <h2 className="text-xl font-bold text-gray-900 mb-2">Where is this job from?</h2>
        <p className="text-gray-600">Select the source to determine required information</p>
      </div>

      {/* Source Type Selection */}
      <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
        {sources.map(({ value, label, icon: Icon, description }) => (
          <button
            key={value}
            onClick={() => setFormData({ ...formData, source_type: value })}
            className={`p-6 rounded-lg border-2 text-left transition-all ${
              formData.source_type === value
                ? 'border-blue-500 bg-blue-50 shadow-md'
                : 'border-gray-200 hover:border-gray-300 hover:shadow-sm'
            }`}
          >
            <Icon
              className={`w-8 h-8 mb-3 ${
                formData.source_type === value ? 'text-blue-600' : 'text-gray-400'
              }`}
            />
            <div className="font-semibold text-gray-900 mb-1">{label}</div>
            <div className="text-sm text-gray-600">{description}</div>
          </button>
        ))}
      </div>
      {errors.source_type && <ErrorMessage message={errors.source_type} />}

      {/* Client Selection */}
      {formData.source_type === 'direct_client' && (
        <div className="border border-gray-300 rounded-lg p-6 bg-gray-50">
          <h3 className="font-semibold text-gray-900 mb-4">Select Client</h3>
          
          {!showClientForm ? (
            <div className="space-y-3">
              {mockClients.map((client) => (
                <button
                  key={client.id}
                  onClick={() =>
                    setFormData({
                      ...formData,
                      client_id: client.id,
                      client_name: client.name,
                      client_contact: client.contact,
                      client_email: client.email
                    })
                  }
                  className={`w-full p-4 text-left rounded-lg border-2 transition-all ${
                    formData.client_id === client.id
                      ? 'border-blue-500 bg-blue-50'
                      : 'border-gray-200 hover:border-gray-300 bg-white'
                  }`}
                >
                  <div className="font-medium text-gray-900">{client.name}</div>
                  <div className="text-sm text-gray-600 mt-1">
                    {client.contact} • {client.email}
                  </div>
                </button>
              ))}
              
              <button
                onClick={() => setShowClientForm(true)}
                className="w-full p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-400 hover:bg-blue-50 text-blue-600 font-medium flex items-center justify-center gap-2"
              >
                <Plus className="w-5 h-5" />
                Add New Client
              </button>
            </div>
          ) : (
            <div className="space-y-4">
              <FormField
                label="Company Name"
                required
                value={formData.client_name}
                onChange={(val: string) => setFormData({ ...formData, client_name: val })}
              />
              <div className="grid grid-cols-2 gap-4">
                <FormField
                  label="Contact Person"
                  value={formData.client_contact}
                  onChange={(val: string) => setFormData({ ...formData, client_contact: val })}
                />
                <FormField
                  label="Email"
                  type="email"
                  value={formData.client_email}
                  onChange={(val: string) => setFormData({ ...formData, client_email: val })}
                />
              </div>
              <button
                onClick={() => setShowClientForm(false)}
                className="text-sm text-gray-600 hover:text-gray-900"
              >
                ← Back to client list
              </button>
            </div>
          )}
          {errors.client && <ErrorMessage message={errors.client} />}
        </div>
      )}

      {/* Agency Selection */}
      {formData.source_type === 'consultancy' && (
        <div className="border border-gray-300 rounded-lg p-6 bg-gray-50">
          <h3 className="font-semibold text-gray-900 mb-4">Select Agency</h3>
          
          {!showAgencyForm ? (
            <div className="space-y-3">
              {mockAgencies.map((agency) => (
                <button
                  key={agency.id}
                  onClick={() =>
                    setFormData({
                      ...formData,
                      agency_id: agency.id,
                      agency_name: agency.name
                    })
                  }
                  className={`w-full p-4 text-left rounded-lg border-2 transition-all ${
                    formData.agency_id === agency.id
                      ? 'border-purple-500 bg-purple-50'
                      : 'border-gray-200 hover:border-gray-300 bg-white'
                  }`}
                >
                  <div className="font-medium text-gray-900">{agency.name}</div>
                  <div className="text-sm text-gray-600 mt-1">
                    {agency.contact} • {agency.email}
                  </div>
                </button>
              ))}
              
              <button
                onClick={() => setShowAgencyForm(true)}
                className="w-full p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-purple-400 hover:bg-purple-50 text-purple-600 font-medium flex items-center justify-center gap-2"
              >
                <Plus className="w-5 h-5" />
                Add New Agency
              </button>
            </div>
          ) : (
            <div className="space-y-4">
              <FormField
                label="Agency Name"
                required
                value={formData.agency_name}
                onChange={(val: string) => setFormData({ ...formData, agency_name: val })}
              />
              <button
                onClick={() => setShowAgencyForm(false)}
                className="text-sm text-gray-600 hover:text-gray-900"
              >
                ← Back to agency list
              </button>
            </div>
          )}
          {errors.agency && <ErrorMessage message={errors.agency} />}
        </div>
      )}
    </div>
  );
}

// Step 2: Job Details
function DetailsStep({ formData, setFormData, errors }: any) {
  const [extracting, setExtracting] = useState(false);

  const handleAIExtract = async () => {
    if (formData.job_description.length < 100) {
      alert('Please enter at least 100 characters for AI extraction');
      return;
    }

    setExtracting(true);
    try {
      // API call will go here
      await new Promise(resolve => setTimeout(resolve, 1500));
      
      // Mock AI extraction
      setFormData({
        ...formData,
        job_title: 'Senior Full Stack Developer',
        location: 'Remote (EU)',
        required_skills: ['React', 'Node.js', 'TypeScript', 'PostgreSQL']
      });
    } catch (error) {
      alert('AI extraction failed');
    } finally {
      setExtracting(false);
    }
  };

  return (
    <div className="space-y-6">
      <div>
        <h2 className="text-xl font-bold text-gray-900 mb-2">Job Details</h2>
        <p className="text-gray-600">Provide complete job information</p>
      </div>

      {/* Basic Info */}
      <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
        <FormField
          label="Job Title"
          required
          value={formData.job_title}
          onChange={(val: string) => setFormData({ ...formData, job_title: val })}
          error={errors.job_title}
          placeholder="e.g., Senior Full Stack Developer"
        />
        <FormField
          label="Location"
          required
          value={formData.location}
          onChange={(val: string) => setFormData({ ...formData, location: val })}
          error={errors.location}
          placeholder="e.g., Remote, Brussels, Hybrid"
        />
        <FormField
          label="Number of Positions"
          type="number"
          value={formData.num_positions}
          onChange={(val: number) => setFormData({ ...formData, num_positions: val })}
          min={1}
        />
        <FormSelect
          label="Country"
          value={formData.country}
          onChange={(val: string) => setFormData({ ...formData, country: val })}
          options={[
            { value: '', label: 'Select country...' },
            { value: 'BE', label: 'Belgium' },
            { value: 'NL', label: 'Netherlands' },
            { value: 'LU', label: 'Luxembourg' },
            { value: 'DE', label: 'Germany' },
            { value: 'FR', label: 'France' }
          ]}
        />
      </div>

      {/* Contract Type */}
      <div>
        <label className="block text-sm font-medium text-gray-700 mb-3">
          Contract Type <span className="text-red-500">*</span>
        </label>
        <div className="grid grid-cols-2 gap-3">
          <button
            onClick={() => setFormData({ ...formData, contract_type: 'freelance' })}
            className={`p-4 rounded-lg border-2 ${
              formData.contract_type === 'freelance'
                ? 'border-blue-500 bg-blue-50'
                : 'border-gray-300 hover:border-gray-400'
            }`}
          >
            <Briefcase className="w-6 h-6 mx-auto mb-2" />
            <div className="font-medium">Freelance/Contract</div>
          </button>
          <button
            onClick={() => setFormData({ ...formData, contract_type: 'permanent' })}
            className={`p-4 rounded-lg border-2 ${
              formData.contract_type === 'permanent'
                ? 'border-blue-500 bg-blue-50'
                : 'border-gray-300 hover:border-gray-400'
            }`}
          >
            <Building2 className="w-6 h-6 mx-auto mb-2" />
            <div className="font-medium">Permanent</div>
          </button>
        </div>
        {errors.contract_type && <ErrorMessage message={errors.contract_type} />}
      </div>

      {/* Contract-specific fields */}
      {formData.contract_type === 'freelance' && (
        <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
          <FormField
            label="Duration"
            value={formData.duration}
            onChange={(val: string) => setFormData({ ...formData, duration: val })}
            placeholder="e.g., 6 months"
          />
          <FormField
            label="Start Date"
            value={formData.start_date}
            onChange={(val: string) => setFormData({ ...formData, start_date: val })}
            placeholder="e.g., ASAP, January 2025"
          />
          <FormField
            label="Daily Rate"
            value={formData.daily_rate}
            onChange={(val: string) => setFormData({ ...formData, daily_rate: val })}
            placeholder="e.g., €600-700"
          />
        </div>
      )}

      {formData.contract_type === 'permanent' && (
        <div className="grid grid-cols-2 gap-4">
          <FormField
            label="Start Date"
            value={formData.start_date}
            onChange={(val: string) => setFormData({ ...formData, start_date: val })}
            placeholder="e.g., February 2025"
          />
          <FormField
            label="Annual Salary"
            value={formData.annual_salary}
            onChange={(val: string) => setFormData({ ...formData, annual_salary: val })}
            placeholder="e.g., €50,000-60,000"
          />
        </div>
      )}

      {/* Job Description with AI */}
      <div>
        <div className="flex items-center justify-between mb-2">
          <label className="block text-sm font-medium text-gray-700">
            Job Description <span className="text-red-500">*</span>
          </label>
          <button
            onClick={handleAIExtract}
            disabled={extracting || formData.job_description.length < 100}
            className="px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 disabled:opacity-50 text-sm font-medium flex items-center gap-2"
          >
            {extracting ? (
              <>
                <Loader2 className="w-4 h-4 animate-spin" />
                Extracting...
              </>
            ) : (
              <>
                <Sparkles className="w-4 h-4" />
                AI Extract
              </>
            )}
          </button>
        </div>
        <textarea
          value={formData.job_description}
          onChange={(e) => setFormData({ ...formData, job_description: e.target.value })}
          className="w-full h-64 p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-sm resize-none"
          placeholder="Paste complete job description here..."
        />
        <div className="flex justify-between mt-2 text-xs">
          <span className={formData.job_description.length >= 100 ? 'text-green-600' : 'text-gray-500'}>
            {formData.job_description.length} characters
            {formData.job_description.length < 100 && ' (minimum 100)'}
          </span>
        </div>
        {errors.job_description && <ErrorMessage message={errors.job_description} />}
      </div>
    </div>
  );
}

// Step 3: Requirements
function RequirementsStep({ formData, setFormData, errors }: any) {
  const [newSkill, setNewSkill] = useState('');

  const addSkill = (type: 'required' | 'optional') => {
    if (!newSkill.trim()) return;
    
    const field = type === 'required' ? 'required_skills' : 'optional_skills';
    if (!formData[field].includes(newSkill.trim())) {
      setFormData({
        ...formData,
        [field]: [...formData[field], newSkill.trim()]
      });
      setNewSkill('');
    }
  };

  const removeSkill = (type: 'required' | 'optional', skill: string) => {
    const field = type === 'required' ? 'required_skills' : 'optional_skills';
    setFormData({
      ...formData,
      [field]: formData[field].filter((s: string) => s !== skill)
    });
  };

  return (
    <div className="space-y-6">
      <div>
        <h2 className="text-xl font-bold text-gray-900 mb-2">Requirements & Skills</h2>
        <p className="text-gray-600">Define what you're looking for</p>
      </div>

      {/* Required Skills */}
      <div>
        <label className="block text-sm font-medium text-gray-700 mb-2">
          Required Skills <span className="text-red-500">*</span>
        </label>
        <div className="flex flex-wrap gap-2 mb-3">
          {formData.required_skills.map((skill: string) => (
            <span
              key={skill}
              className="px-3 py-1.5 bg-red-100 text-red-800 rounded-full text-sm font-medium border border-red-300 flex items-center gap-2"
            >
              {skill}
              <button onClick={() => removeSkill('required', skill)}>
                <X className="w-3.5 h-3.5 hover:text-red-900" />
              </button>
            </span>
          ))}
        </div>
        <div className="flex gap-2">
          <input
            type="text"
            value={newSkill}
            onChange={(e) => setNewSkill(e.target.value)}
            onKeyPress={(e) => e.key === 'Enter' && (e.preventDefault(), addSkill('required'))}
            placeholder="Type skill and press Enter"
            className="flex-1 p-2.5 border border-gray-300 rounded-lg text-sm"
          />
          <button
            onClick={() => addSkill('required')}
            className="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 text-sm font-medium"
          >
            Add
          </button>
        </div>
        {errors.required_skills && <ErrorMessage message={errors.required_skills} />}
      </div>

      {/* Optional Skills */}
      <div>
        <label className="block text-sm font-medium text-gray-700 mb-2">
          Optional Skills (Nice to Have)
        </label>
        <div className="flex flex-wrap gap-2 mb-3">
          {formData.optional_skills.map((skill: string) => (
            <span
              key={skill}
              className="px-3 py-1.5 bg-blue-100 text-blue-800 rounded-full text-sm font-medium border border-blue-300 flex items-center gap-2"
            >
              {skill}
              <button onClick={() => removeSkill('optional', skill)}>
                <X className="w-3.5 h-3.5 hover:text-blue-900" />
              </button>
            </span>
          ))}
        </div>
        <div className="flex gap-2">
          <input
            type="text"
            value={newSkill}
            onChange={(e) => setNewSkill(e.target.value)}
            onKeyPress={(e) => e.key === 'Enter' && (e.preventDefault(), addSkill('optional'))}
            placeholder="Type skill and press Enter"
            className="flex-1 p-2.5 border border-gray-300 rounded-lg text-sm"
          />
          <button
            onClick={() => addSkill('optional')}
            className="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm font-medium"
          >
            Add
          </button>
        </div>
      </div>

      {/* Other Requirements */}
      <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
        <FormField
          label="Experience Required"
          value={formData.experience_years}
          onChange={(val: string) => setFormData({ ...formData, experience_years: val })}
          placeholder="e.g., 5+ years, 3-5 years"
        />
        <FormSelect
          label="Education Level"
          value={formData.education_level}
          onChange={(val: string) => setFormData({ ...formData, education_level: val })}
          options={[
            { value: '', label: 'Not specified' },
            { value: 'high_school', label: 'High School' },
            { value: 'bachelor', label: "Bachelor's Degree" },
            { value: 'master', label: "Master's Degree" },
            { value: 'phd', label: 'PhD' }
          ]}
        />
      </div>

      {/* Internal Settings */}
      <div className="border-t pt-6">
        <h3 className="font-semibold text-gray-900 mb-4">Internal Settings</h3>
        <div className="grid grid-cols-2 gap-4">
          <FormSelect
            label="Priority"
            value={formData.priority}
            onChange={(val: string) => setFormData({ ...formData, priority: val })}
            options={[
              { value: 'low', label: '🟢 Low' },
              { value: 'medium', label: '🟡 Medium' },
              { value: 'high', label: '🟠 High' },
              { value: 'urgent', label: '🔴 Urgent' }
            ]}
          />
          <FormSelect
            label="Assign To"
            value={formData.assigned_to}
            onChange={(val: string) => setFormData({ ...formData, assigned_to: val })}
            options={[
              { value: '', label: 'Unassigned' },
              { value: 'team_it', label: 'IT Team' },
              { value: 'sarah', label: 'Sarah Johnson' }
            ]}
          />
        </div>
        <div className="mt-4">
          <label className="block text-sm font-medium text-gray-700 mb-2">
            Internal Notes
          </label>
          <textarea
            value={formData.internal_notes}
            onChange={(e) => setFormData({ ...formData, internal_notes: e.target.value })}
            className="w-full p-3 border border-gray-300 rounded-lg text-sm"
            rows={3}
            placeholder="Private notes for your team..."
          />
        </div>
      </div>
    </div>
  );
}

// Helper Components
function FormField({ label, value, onChange, type = 'text', required = false, error, placeholder = '', min }: any) {
  return (
    <div>
      <label className="block text-sm font-medium text-gray-700 mb-1.5">
        {label} {required && <span className="text-red-500">*</span>}
      </label>
      <input
        type={type}
        value={value}
        onChange={(e) => onChange(type === 'number' ? Number(e.target.value) : e.target.value)}
        placeholder={placeholder}
        min={min}
        className={`w-full p-2.5 border rounded-lg text-sm ${
          error ? 'border-red-500 focus:ring-red-500' : 'border-gray-300 focus:ring-blue-500'
        } focus:ring-2`}
      />
      {error && <ErrorMessage message={error} />}
    </div>
  );
}

function FormSelect({ label, value, onChange, options, required = false }: any) {
  return (
    <div>
      <label className="block text-sm font-medium text-gray-700 mb-1.5">
        {label} {required && <span className="text-red-500">*</span>}
      </label>
      <select
        value={value}
        onChange={(e) => onChange(e.target.value)}
        className="w-full p-2.5 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500"
      >
        {options.map((opt: any) => (
          <option key={opt.value} value={opt.value}>
            {opt.label}
          </option>
        ))}
      </select>
    </div>
  );
}

function ErrorMessage({ message }: { message: string }) {
  return (
    <div className="flex items-center gap-1 mt-1 text-xs text-red-600">
      <AlertCircle className="w-3 h-3" />
      <span>{message}</span>
    </div>
  );
}
-----------------------------

File: src/app/jobs/[id]/page.tsx
Content:
// src/app/jobs/[id]/page.tsx
'use client';

import { useState } from 'react';
import { useRouter } from 'next/navigation';
import {
  ArrowLeft, Edit2, Trash2, Play, Pause, X, MoreVertical,
  Building2, MapPin, DollarSign, Calendar, Users, Target,
  TrendingUp, Clock, Briefcase, CheckCircle, AlertCircle,
  Send, Eye, Star, Share2, Download, Plus, Search
} from 'lucide-react';

type Tab = 'overview' | 'candidates' | 'submissions' | 'activity';

interface Job {
  id: string;
  title: string;
  status: 'active' | 'draft' | 'on_hold' | 'closed';
  client: {
    id: string;
    name: string;
    contact_person: string;
    contact_email: string;
  };
  location: string;
  country: string;
  contract_type: 'freelance' | 'permanent';
  duration?: string;
  start_date: string;
  daily_rate?: string;
  salary_range?: string;
  num_positions: number;
  filled_positions: number;
  required_skills: string[];
  optional_skills: string[];
  experience_years: string;
  education_level: string;
  priority: 'low' | 'medium' | 'high' | 'urgent';
  description: string;
  candidates_count: number;
  submissions_count: number;
  interviews_count: number;
  created_at: string;
  updated_at: string;
  assigned_to?: {
    id: string;
    name: string;
  };
  health_score: number;
  internal_notes: string;
}

// Will be replaced with API data
const PLACEHOLDER_JOB: Job = {
  id: '',
  title: 'Loading...',
  status: 'active',
  client: { id: '', name: '', contact_person: '', contact_email: '' },
  location: '',
  country: '',
  contract_type: 'freelance',
  start_date: '',
  num_positions: 1,
  filled_positions: 0,
  required_skills: [],
  optional_skills: [],
  experience_years: '',
  education_level: '',
  priority: 'medium',
  description: '',
  candidates_count: 0,
  submissions_count: 0,
  interviews_count: 0,
  created_at: '',
  updated_at: '',
  health_score: 0,
  internal_notes: ''
};

export default function JobDetailPage({ params }: { params: { id: string } }) {
  const router = useRouter();
  const [activeTab, setActiveTab] = useState<Tab>('overview');
  const [showActions, setShowActions] = useState(false);

  // Replace with: const { data: job, loading } = useJob(params.id);
  const job = PLACEHOLDER_JOB;
  const loading = false;

  const handleDelete = async () => {
    if (!confirm('Are you sure you want to delete this job?')) return;
    
    try {
      // await fetch(`/api/jobs/${params.id}`, { method: 'DELETE' });
      router.push('/jobs');
    } catch (error) {
      alert('Failed to delete job');
    }
  };

  const handleStatusChange = async (newStatus: Job['status']) => {
    try {
      // await fetch(`/api/jobs/${params.id}`, {
      //   method: 'PATCH',
      //   body: JSON.stringify({ status: newStatus })
      // });
      alert(`Job ${newStatus}`);
    } catch (error) {
      alert('Failed to update status');
    }
  };

  if (loading) {
    return <LoadingState />;
  }

  if (!job.id) {
    return <NotFoundState />;
  }

  return (
    <div className="min-h-screen bg-gray-50 p-4 md:p-6">
      <div className="max-w-7xl mx-auto">
        {/* Header */}
        <div className="mb-6">
          <button
            onClick={() => router.push('/jobs')}
            className="flex items-center text-gray-600 hover:text-gray-900 mb-4"
          >
            <ArrowLeft className="w-5 h-5 mr-2" />
            Back to Jobs
          </button>

          <div className="bg-white rounded-xl shadow-lg border p-6">
            <div className="flex items-start justify-between mb-4">
              <div className="flex-1">
                <div className="flex items-center gap-3 mb-2">
                  <h1 className="text-2xl font-bold text-gray-900">{job.title}</h1>
                  <StatusBadge status={job.status} />
                  <PriorityBadge priority={job.priority} />
                </div>
                <div className="flex items-center gap-4 text-sm text-gray-600">
                  <div className="flex items-center gap-1">
                    <Building2 className="w-4 h-4" />
                    <span>{job.client.name}</span>
                  </div>
                  <div className="flex items-center gap-1">
                    <MapPin className="w-4 h-4" />
                    <span>{job.location}</span>
                  </div>
                  <div className="flex items-center gap-1">
                    <Calendar className="w-4 h-4" />
                    <span>Start: {job.start_date}</span>
                  </div>
                </div>
              </div>

              {/* Actions */}
              <div className="flex items-center gap-2">
                <button
                  onClick={() => router.push(`/match?jobId=${job.id}`)}
                  className="px-4 py-2 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:from-blue-700 hover:to-purple-700 font-medium flex items-center gap-2"
                >
                  <Target className="w-4 h-4" />
                  Match Candidates
                </button>
                
                <div className="relative">
                  <button
                    onClick={() => setShowActions(!showActions)}
                    className="p-2 border border-gray-300 rounded-lg hover:bg-gray-50"
                  >
                    <MoreVertical className="w-5 h-5" />
                  </button>

                  {showActions && (
                    <div className="absolute right-0 top-full mt-2 w-48 bg-white border rounded-lg shadow-xl z-10">
                      <button
                        onClick={() => router.push(`/jobs/${job.id}/edit`)}
                        className="w-full px-4 py-2 text-left hover:bg-gray-50 flex items-center gap-2 text-sm"
                      >
                        <Edit2 className="w-4 h-4" />
                        Edit Job
                      </button>
                      <button
                        onClick={() => handleStatusChange(job.status === 'active' ? 'on_hold' : 'active')}
                        className="w-full px-4 py-2 text-left hover:bg-gray-50 flex items-center gap-2 text-sm"
                      >
                        {job.status === 'active' ? <Pause className="w-4 h-4" /> : <Play className="w-4 h-4" />}
                        {job.status === 'active' ? 'Pause Job' : 'Activate Job'}
                      </button>
                      <button className="w-full px-4 py-2 text-left hover:bg-gray-50 flex items-center gap-2 text-sm">
                        <Share2 className="w-4 h-4" />
                        Share
                      </button>
                      <button className="w-full px-4 py-2 text-left hover:bg-gray-50 flex items-center gap-2 text-sm">
                        <Download className="w-4 h-4" />
                        Export
                      </button>
                      <div className="border-t my-1"></div>
                      <button
                        onClick={handleDelete}
                        className="w-full px-4 py-2 text-left hover:bg-red-50 flex items-center gap-2 text-sm text-red-600"
                      >
                        <Trash2 className="w-4 h-4" />
                        Delete Job
                      </button>
                    </div>
                  )}
                </div>
              </div>
            </div>

            {/* Quick Stats */}
            <div className="grid grid-cols-2 md:grid-cols-5 gap-4 pt-4 border-t">
              <QuickStat label="Positions" value={`${job.filled_positions}/${job.num_positions}`} icon={Users} />
              <QuickStat label="Candidates" value={job.candidates_count} icon={Target} />
              <QuickStat label="Submissions" value={job.submissions_count} icon={Send} />
              <QuickStat label="Interviews" value={job.interviews_count} icon={Eye} />
              <QuickStat
                label="Health"
                value={`${job.health_score}%`}
                icon={TrendingUp}
                color={job.health_score >= 70 ? 'green' : job.health_score >= 40 ? 'yellow' : 'red'}
              />
            </div>
          </div>
        </div>

        {/* Tabs */}
        <div className="mb-6">
          <div className="bg-white rounded-xl shadow-sm border overflow-hidden">
            <div className="flex border-b overflow-x-auto">
              <TabButton
                active={activeTab === 'overview'}
                onClick={() => setActiveTab('overview')}
                label="Overview"
              />
              <TabButton
                active={activeTab === 'candidates'}
                onClick={() => setActiveTab('candidates')}
                label="Candidates"
                badge={job.candidates_count}
              />
              <TabButton
                active={activeTab === 'submissions'}
                onClick={() => setActiveTab('submissions')}
                label="Submissions"
                badge={job.submissions_count}
              />
              <TabButton
                active={activeTab === 'activity'}
                onClick={() => setActiveTab('activity')}
                label="Activity"
              />
            </div>
          </div>
        </div>

        {/* Tab Content */}
        {activeTab === 'overview' && <OverviewTab job={job} />}
        {activeTab === 'candidates' && <CandidatesTab job={job} />}
        {activeTab === 'submissions' && <SubmissionsTab job={job} />}
        {activeTab === 'activity' && <ActivityTab job={job} />}
      </div>
    </div>
  );
}

// Overview Tab
function OverviewTab({ job }: { job: Job }) {
  return (
    <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
      {/* Main Column */}
      <div className="lg:col-span-2 space-y-6">
        {/* Description */}
        <div className="bg-white rounded-xl shadow-sm border p-6">
          <h2 className="text-lg font-semibold text-gray-900 mb-4">Job Description</h2>
          <p className="text-gray-700 whitespace-pre-wrap">{job.description}</p>
        </div>

        {/* Requirements */}
        <div className="bg-white rounded-xl shadow-sm border p-6">
          <h2 className="text-lg font-semibold text-gray-900 mb-4">Requirements</h2>
          
          <div className="space-y-4">
            <div>
              <h3 className="text-sm font-medium text-gray-700 mb-2">Required Skills</h3>
              <div className="flex flex-wrap gap-2">
                {job.required_skills.map((skill) => (
                  <span key={skill} className="px-3 py-1 bg-red-100 text-red-800 rounded-full text-sm border border-red-200">
                    {skill}
                  </span>
                ))}
              </div>
            </div>

            {job.optional_skills.length > 0 && (
              <div>
                <h3 className="text-sm font-medium text-gray-700 mb-2">Optional Skills</h3>
                <div className="flex flex-wrap gap-2">
                  {job.optional_skills.map((skill) => (
                    <span key={skill} className="px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm border border-blue-200">
                      {skill}
                    </span>
                  ))}
                </div>
              </div>
            )}

            <div className="grid grid-cols-2 gap-4 pt-4 border-t">
              {job.experience_years && (
                <div>
                  <div className="text-sm text-gray-600">Experience</div>
                  <div className="font-medium text-gray-900">{job.experience_years}</div>
                </div>
              )}
              {job.education_level && (
                <div>
                  <div className="text-sm text-gray-600">Education</div>
                  <div className="font-medium text-gray-900 capitalize">{job.education_level.replace('_', ' ')}</div>
                </div>
              )}
            </div>
          </div>
        </div>

        {/* Client Info */}
        <div className="bg-white rounded-xl shadow-sm border p-6">
          <h2 className="text-lg font-semibold text-gray-900 mb-4">Client Information</h2>
          <div className="space-y-3">
            <div className="flex justify-between">
              <span className="text-gray-600">Company</span>
              <span className="font-medium text-gray-900">{job.client.name}</span>
            </div>
            <div className="flex justify-between">
              <span className="text-gray-600">Contact Person</span>
              <span className="font-medium text-gray-900">{job.client.contact_person}</span>
            </div>
            <div className="flex justify-between">
              <span className="text-gray-600">Email</span>
              <span className="font-medium text-gray-900">{job.client.contact_email}</span>
            </div>
          </div>
          <button
            onClick={() => window.location.href = `/clients/${job.client.id}`}
            className="mt-4 w-full px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 text-sm font-medium"
          >
            View Client Profile
          </button>
        </div>
      </div>

      {/* Sidebar */}
      <div className="space-y-6">
        {/* Contract Details */}
        <div className="bg-white rounded-xl shadow-sm border p-6">
          <h2 className="text-lg font-semibold text-gray-900 mb-4">Contract Details</h2>
          <div className="space-y-3 text-sm">
            <div className="flex justify-between">
              <span className="text-gray-600">Type</span>
              <span className="font-medium text-gray-900 capitalize">{job.contract_type}</span>
            </div>
            {job.duration && (
              <div className="flex justify-between">
                <span className="text-gray-600">Duration</span>
                <span className="font-medium text-gray-900">{job.duration}</span>
              </div>
            )}
            <div className="flex justify-between">
              <span className="text-gray-600">Start Date</span>
              <span className="font-medium text-gray-900">{job.start_date}</span>
            </div>
            {job.daily_rate && (
              <div className="flex justify-between">
                <span className="text-gray-600">Daily Rate</span>
                <span className="font-medium text-gray-900">{job.daily_rate}</span>
              </div>
            )}
            {job.salary_range && (
              <div className="flex justify-between">
                <span className="text-gray-600">Salary</span>
                <span className="font-medium text-gray-900">{job.salary_range}</span>
              </div>
            )}
          </div>
        </div>

        {/* Progress */}
        <div className="bg-white rounded-xl shadow-sm border p-6">
          <h2 className="text-lg font-semibold text-gray-900 mb-4">Filling Progress</h2>
          <div className="space-y-4">
            <div>
              <div className="flex justify-between text-sm mb-2">
                <span className="text-gray-600">Positions Filled</span>
                <span className="font-semibold text-gray-900">
                  {job.filled_positions}/{job.num_positions}
                </span>
              </div>
              <div className="w-full bg-gray-200 rounded-full h-3">
                <div
                  className="bg-blue-600 h-3 rounded-full transition-all"
                  style={{ width: `${(job.filled_positions / job.num_positions) * 100}%` }}
                ></div>
              </div>
            </div>

            {job.assigned_to && (
              <div className="pt-4 border-t">
                <div className="text-sm text-gray-600 mb-2">Assigned To</div>
                <div className="flex items-center gap-2">
                  <div className="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-sm font-medium text-blue-700">
                    {job.assigned_to.name.charAt(0)}
                  </div>
                  <span className="font-medium text-gray-900">{job.assigned_to.name}</span>
                </div>
              </div>
            )}
          </div>
        </div>

        {/* Internal Notes */}
        {job.internal_notes && (
          <div className="bg-yellow-50 rounded-xl border border-yellow-200 p-6">
            <h2 className="text-lg font-semibold text-gray-900 mb-2">Internal Notes</h2>
            <p className="text-sm text-gray-700">{job.internal_notes}</p>
          </div>
        )}
      </div>
    </div>
  );
}

// Candidates Tab
function CandidatesTab({ job }: { job: Job }) {
  return (
    <div className="bg-white rounded-xl shadow-sm border p-6">
      <div className="flex items-center justify-between mb-6">
        <h2 className="text-lg font-semibold text-gray-900">Linked Candidates</h2>
        <button
          onClick={() => window.location.href = `/match?jobId=${job.id}`}
          className="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2"
        >
          <Plus className="w-4 h-4" />
          Match Candidates
        </button>
      </div>

      <EmptyState
        icon={Users}
        title="No candidates yet"
        description="Use AI matching to find suitable candidates"
        actionLabel="Match Candidates"
        onAction={() => window.location.href = `/match?jobId=${job.id}`}
      />
    </div>
  );
}

// Submissions Tab
function SubmissionsTab({ job }: { job: Job }) {
  return (
    <div className="bg-white rounded-xl shadow-sm border p-6">
      <div className="flex items-center justify-between mb-6">
        <h2 className="text-lg font-semibold text-gray-900">Submissions</h2>
      </div>

      <EmptyState
        icon={Send}
        title="No submissions yet"
        description="Submit candidates to the client to get started"
      />
    </div>
  );
}

// Activity Tab
function ActivityTab({ job }: { job: Job }) {
  return (
    <div className="bg-white rounded-xl shadow-sm border p-6">
      <h2 className="text-lg font-semibold text-gray-900 mb-6">Activity Timeline</h2>
      
      <div className="space-y-4">
        <ActivityItem
          icon={CheckCircle}
          title="Job Created"
          description={`Job posted by ${job.assigned_to?.name || 'Admin'}`}
          timestamp={job.created_at}
          color="green"
        />
      </div>
    </div>
  );
}

// Helper Components
function TabButton({ active, onClick, label, badge }: any) {
  return (
    <button
      onClick={onClick}
      className={`px-6 py-3 font-medium border-b-2 transition-colors whitespace-nowrap ${
        active
          ? 'border-blue-600 text-blue-600'
          : 'border-transparent text-gray-600 hover:text-gray-900'
      }`}
    >
      {label}
      {badge !== undefined && badge > 0 && (
        <span className="ml-2 px-2 py-0.5 bg-gray-100 text-gray-700 rounded-full text-xs font-bold">
          {badge}
        </span>
      )}
    </button>
  );
}

function QuickStat({ label, value, icon: Icon, color = 'blue' }: any) {
  const colors = {
    blue: 'text-blue-600',
    green: 'text-green-600',
    yellow: 'text-yellow-600',
    red: 'text-red-600'
  };

  return (
    <div className="text-center">
      <Icon className={`w-5 h-5 mx-auto mb-1 ${colors[color]}`} />
      <div className="text-lg font-bold text-gray-900">{value}</div>
      <div className="text-xs text-gray-600">{label}</div>
    </div>
  );
}

function StatusBadge({ status }: { status: Job['status'] }) {
  const config = {
    active: { label: 'Active', color: 'bg-green-100 text-green-700 border-green-300' },
    draft: { label: 'Draft', color: 'bg-gray-100 text-gray-700 border-gray-300' },
    on_hold: { label: 'On Hold', color: 'bg-yellow-100 text-yellow-700 border-yellow-300' },
    closed: { label: 'Closed', color: 'bg-blue-100 text-blue-700 border-blue-300' }
  };

  const { label, color } = config[status];

  return (
    <span className={`px-3 py-1 rounded-full text-sm font-medium border ${color}`}>
      {label}
    </span>
  );
}

function PriorityBadge({ priority }: { priority: Job['priority'] }) {
  const config = {
    low: { label: 'Low', color: 'bg-gray-100 text-gray-700' },
    medium: { label: 'Medium', color: 'bg-blue-100 text-blue-700' },
    high: { label: 'High', color: 'bg-orange-100 text-orange-700' },
    urgent: { label: 'Urgent', color: 'bg-red-100 text-red-700' }
  };

  const { label, color } = config[priority];

  return (
    <span className={`px-3 py-1 rounded-full text-sm font-medium ${color}`}>
      {label}
    </span>
  );
}

function LoadingState() {
  return (
    <div className="min-h-screen flex items-center justify-center">
      <div className="text-center">
        <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"></div>
        <p className="text-gray-600">Loading job details...</p>
      </div>
    </div>
  );
}

function NotFoundState() {
  return (
    <div className="min-h-screen flex items-center justify-center">
      <div className="text-center">
        <AlertCircle className="w-16 h-16 text-gray-400 mx-auto mb-4" />
        <h2 className="text-2xl font-bold text-gray-900 mb-2">Job Not Found</h2>
        <p className="text-gray-600 mb-6">This job doesn't exist or has been deleted</p>
        <button
          onClick={() => window.location.href = '/jobs'}
          className="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700"
        >
          Back to Jobs
        </button>
      </div>
    </div>
  );
}

function EmptyState({ icon: Icon, title, description, actionLabel, onAction }: any) {
  return (
    <div className="text-center py-12">
      <Icon className="w-16 h-16 text-gray-400 mx-auto mb-4" />
      <h3 className="text-lg font-semibold text-gray-900 mb-2">{title}</h3>
      <p className="text-gray-600 mb-6">{description}</p>
      {actionLabel && onAction && (
        <button
          onClick={onAction}
          className="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700"
        >
          {actionLabel}
        </button>
      )}
    </div>
  );
}

function ActivityItem({ icon: Icon, title, description, timestamp, color }: any) {
  return (
    <div className="flex gap-3">
      <div className={`w-8 h-8 rounded-full flex items-center justify-center bg-${color}-100`}>
        <Icon className={`w-4 h-4 text-${color}-600`} />
      </div>
      <div className="flex-1">
        <div className="font-medium text-gray-900">{title}</div>
        <div className="text-sm text-gray-600">{description}</div>
        <div className="text-xs text-gray-500 mt-1">
          {new Date(timestamp).toLocaleString()}
        </div>
      </div>
    </div>
  );
}
-----------------------------

File: src/app/jobs/page.tsx
Content:
// src/app/jobs/page.tsx
'use client';

import { useState } from 'react';
import { useRouter } from 'next/navigation';
import {
  Briefcase, Plus, Search, Filter, Grid, List, Trello,
  MapPin, DollarSign, Calendar, Users, TrendingUp,
  Building2, Clock, MoreVertical, Eye, Edit2, Trash2,
  Target, CheckCircle, AlertCircle, Play, Pause
} from 'lucide-react';

type ViewMode = 'grid' | 'list' | 'kanban';
type JobStatus = 'all' | 'active' | 'draft' | 'on_hold' | 'closed';

interface Job {
  id: string;
  title: string;
  client: {
    id: string;
    name: string;
  };
  status: 'active' | 'draft' | 'on_hold' | 'closed';
  location: string;
  contract_type: 'freelance' | 'permanent';
  rate_range?: string;
  salary_range?: string;
  num_positions: number;
  filled_positions: number;
  candidates_count: number;
  submissions_count: number;
  priority: 'low' | 'medium' | 'high' | 'urgent';
  created_at: string;
  start_date: string;
  required_skills: string[];
  assigned_to?: {
    id: string;
    name: string;
  };
  health_score: number; // 0-100
}

// This will be replaced with real API data
const PLACEHOLDER_JOBS: Job[] = [];

export default function JobsListPage() {
  const router = useRouter();
  const [viewMode, setViewMode] = useState<ViewMode>('grid');
  const [statusFilter, setStatusFilter] = useState<JobStatus>('all');
  const [searchQuery, setSearchQuery] = useState('');
  const [showFilters, setShowFilters] = useState(false);

  // Replace with: const { data: jobs, loading } = useJobs();
  const jobs = PLACEHOLDER_JOBS;
  const loading = false;

  const filteredJobs = jobs.filter(job => {
    const matchesStatus = statusFilter === 'all' || job.status === statusFilter;
    const matchesSearch = job.title.toLowerCase().includes(searchQuery.toLowerCase()) ||
                          job.client.name.toLowerCase().includes(searchQuery.toLowerCase());
    return matchesStatus && matchesSearch;
  });

  const stats = {
    total: jobs.length,
    active: jobs.filter(j => j.status === 'active').length,
    draft: jobs.filter(j => j.status === 'draft').length,
    filled: jobs.filter(j => j.filled_positions === j.num_positions).length
  };

  return (
    <div className="min-h-screen bg-gray-50 p-4 md:p-6">
      <div className="max-w-7xl mx-auto">
        {/* Header */}
        <div className="mb-6">
          <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6">
            <div>
              <h1 className="text-3xl font-bold text-gray-900">Jobs</h1>
              <p className="text-gray-600 mt-1">
                Manage all your open positions
              </p>
            </div>
            <button
              onClick={() => router.push('/jobs/new')}
              className="px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:from-blue-700 hover:to-purple-700 shadow-md flex items-center gap-2 font-medium"
            >
              <Plus className="w-5 h-5" />
              Create Job
            </button>
          </div>

          {/* Stats */}
          <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
            <StatCard
              label="Total Jobs"
              value={stats.total}
              icon={Briefcase}
              color="blue"
            />
            <StatCard
              label="Active"
              value={stats.active}
              icon={Play}
              color="green"
            />
            <StatCard
              label="Drafts"
              value={stats.draft}
              icon={Edit2}
              color="yellow"
            />
            <StatCard
              label="Filled"
              value={stats.filled}
              icon={CheckCircle}
              color="purple"
            />
          </div>
        </div>

        {/* Controls */}
        <div className="bg-white rounded-xl border shadow-sm p-4 mb-6">
          <div className="flex flex-col md:flex-row gap-4">
            {/* Search */}
            <div className="flex-1 relative">
              <Search className="absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400" />
              <input
                type="text"
                value={searchQuery}
                onChange={(e) => setSearchQuery(e.target.value)}
                placeholder="Search jobs by title or client..."
                className="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
              />
            </div>

            {/* Status Filter */}
            <select
              value={statusFilter}
              onChange={(e) => setStatusFilter(e.target.value as JobStatus)}
              className="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
            >
              <option value="all">All Status</option>
              <option value="active">Active</option>
              <option value="draft">Draft</option>
              <option value="on_hold">On Hold</option>
              <option value="closed">Closed</option>
            </select>

            {/* View Mode Toggle */}
            <div className="flex items-center gap-1 bg-gray-100 p-1 rounded-lg">
              <button
                onClick={() => setViewMode('grid')}
                className={`p-2 rounded ${viewMode === 'grid' ? 'bg-white shadow' : 'hover:bg-gray-200'}`}
                title="Grid View"
              >
                <Grid className="w-5 h-5" />
              </button>
              <button
                onClick={() => setViewMode('list')}
                className={`p-2 rounded ${viewMode === 'list' ? 'bg-white shadow' : 'hover:bg-gray-200'}`}
                title="List View"
              >
                <List className="w-5 h-5" />
              </button>
              <button
                onClick={() => setViewMode('kanban')}
                className={`p-2 rounded ${viewMode === 'kanban' ? 'bg-white shadow' : 'hover:bg-gray-200'}`}
                title="Kanban View"
              >
                <Trello className="w-5 h-5" />
              </button>
            </div>

            {/* Filters Button */}
            <button
              onClick={() => setShowFilters(!showFilters)}
              className="px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-2"
            >
              <Filter className="w-5 h-5" />
              Filters
            </button>
          </div>

          {/* Advanced Filters */}
          {showFilters && (
            <div className="mt-4 pt-4 border-t grid grid-cols-1 md:grid-cols-3 gap-4">
              <select className="px-3 py-2 border border-gray-300 rounded-lg text-sm">
                <option>All Clients</option>
              </select>
              <select className="px-3 py-2 border border-gray-300 rounded-lg text-sm">
                <option>All Priorities</option>
                <option>Urgent</option>
                <option>High</option>
                <option>Medium</option>
                <option>Low</option>
              </select>
              <select className="px-3 py-2 border border-gray-300 rounded-lg text-sm">
                <option>Contract Type</option>
                <option>Freelance</option>
                <option>Permanent</option>
              </select>
            </div>
          )}
        </div>

        {/* Content */}
        {loading ? (
          <LoadingState />
        ) : filteredJobs.length === 0 ? (
          <EmptyState
            hasJobs={jobs.length > 0}
            onCreateJob={() => router.push('/jobs/new')}
          />
        ) : (
          <>
            {viewMode === 'grid' && <GridView jobs={filteredJobs} />}
            {viewMode === 'list' && <ListView jobs={filteredJobs} />}
            {viewMode === 'kanban' && <KanbanView jobs={filteredJobs} />}
          </>
        )}
      </div>
    </div>
  );
}

// Grid View Component
function GridView({ jobs }: { jobs: Job[] }) {
  const router = useRouter();

  return (
    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
      {jobs.map((job) => (
        <div
          key={job.id}
          onClick={() => router.push(`/jobs/${job.id}`)}
          className="bg-white rounded-xl border shadow-sm p-5 hover:shadow-md transition-shadow cursor-pointer"
        >
          {/* Header */}
          <div className="flex items-start justify-between mb-3">
            <div className="flex-1">
              <h3 className="font-semibold text-lg text-gray-900 mb-1 line-clamp-1">
                {job.title}
              </h3>
              <div className="flex items-center gap-2 text-sm text-gray-600">
                <Building2 className="w-4 h-4" />
                <span className="truncate">{job.client.name}</span>
              </div>
            </div>
            <StatusBadge status={job.status} />
          </div>

          {/* Quick Info */}
          <div className="grid grid-cols-2 gap-2 mb-3 text-xs text-gray-600">
            <div className="flex items-center gap-1">
              <MapPin className="w-3 h-3" />
              <span className="truncate">{job.location}</span>
            </div>
            <div className="flex items-center gap-1">
              <DollarSign className="w-3 h-3" />
              <span className="truncate">{job.rate_range || job.salary_range}</span>
            </div>
            <div className="flex items-center gap-1">
              <Users className="w-3 h-3" />
              <span>{job.filled_positions}/{job.num_positions} filled</span>
            </div>
            <div className="flex items-center gap-1">
              <Target className="w-3 h-3" />
              <span>{job.candidates_count} candidates</span>
            </div>
          </div>

          {/* Progress */}
          <div className="mb-3">
            <div className="flex justify-between text-xs text-gray-600 mb-1">
              <span>Progress</span>
              <span className="font-semibold">{Math.round((job.filled_positions / job.num_positions) * 100)}%</span>
            </div>
            <div className="w-full bg-gray-200 rounded-full h-2">
              <div
                className="bg-blue-600 h-2 rounded-full"
                style={{ width: `${(job.filled_positions / job.num_positions) * 100}%` }}
              ></div>
            </div>
          </div>

          {/* Footer */}
          <div className="flex items-center justify-between pt-3 border-t text-xs">
            <div className="flex items-center gap-1 text-gray-500">
              <Clock className="w-3 h-3" />
              <span>{new Date(job.created_at).toLocaleDateString()}</span>
            </div>
            <div className="flex items-center gap-1">
              <TrendingUp className={`w-4 h-4 ${
                job.health_score >= 70 ? 'text-green-600' : 
                job.health_score >= 40 ? 'text-yellow-600' : 'text-red-600'
              }`} />
              <span className="font-semibold text-gray-900">{job.health_score}%</span>
            </div>
          </div>
        </div>
      ))}
    </div>
  );
}

// List View Component
function ListView({ jobs }: { jobs: Job[] }) {
  const router = useRouter();

  return (
    <div className="bg-white rounded-xl border shadow-sm overflow-hidden">
      <table className="w-full">
        <thead className="bg-gray-50 border-b">
          <tr>
            <th className="px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase">Job Title</th>
            <th className="px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase">Client</th>
            <th className="px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase">Status</th>
            <th className="px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase">Progress</th>
            <th className="px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase">Candidates</th>
            <th className="px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase">Health</th>
            <th className="px-4 py-3 text-right text-xs font-semibold text-gray-700 uppercase">Actions</th>
          </tr>
        </thead>
        <tbody className="divide-y">
          {jobs.map((job) => (
            <tr
              key={job.id}
              onClick={() => router.push(`/jobs/${job.id}`)}
              className="hover:bg-gray-50 cursor-pointer"
            >
              <td className="px-4 py-3">
                <div className="font-medium text-gray-900">{job.title}</div>
                <div className="text-xs text-gray-500">{job.location}</div>
              </td>
              <td className="px-4 py-3 text-sm text-gray-700">{job.client.name}</td>
              <td className="px-4 py-3">
                <StatusBadge status={job.status} />
              </td>
              <td className="px-4 py-3">
                <div className="flex items-center gap-2">
                  <div className="w-24 bg-gray-200 rounded-full h-2">
                    <div
                      className="bg-blue-600 h-2 rounded-full"
                      style={{ width: `${(job.filled_positions / job.num_positions) * 100}%` }}
                    ></div>
                  </div>
                  <span className="text-xs text-gray-600">{job.filled_positions}/{job.num_positions}</span>
                </div>
              </td>
              <td className="px-4 py-3 text-sm text-gray-700">{job.candidates_count}</td>
              <td className="px-4 py-3">
                <span className={`text-sm font-semibold ${
                  job.health_score >= 70 ? 'text-green-600' :
                  job.health_score >= 40 ? 'text-yellow-600' : 'text-red-600'
                }`}>
                  {job.health_score}%
                </span>
              </td>
              <td className="px-4 py-3 text-right">
                <button
                  onClick={(e) => {
                    e.stopPropagation();
                    // Actions menu
                  }}
                  className="p-1 hover:bg-gray-200 rounded"
                >
                  <MoreVertical className="w-4 h-4" />
                </button>
              </td>
            </tr>
          ))}
        </tbody>
      </table>
    </div>
  );
}

// Kanban View Component
function KanbanView({ jobs }: { jobs: Job[] }) {
  const statuses = ['active', 'draft', 'on_hold', 'closed'] as const;

  return (
    <div className="grid grid-cols-1 md:grid-cols-4 gap-4">
      {statuses.map((status) => {
        const statusJobs = jobs.filter(j => j.status === status);
        return (
          <div key={status} className="bg-gray-100 rounded-xl p-4">
            <div className="flex items-center justify-between mb-4">
              <h3 className="font-semibold text-gray-900 capitalize">{status.replace('_', ' ')}</h3>
              <span className="px-2 py-1 bg-white rounded-full text-xs font-semibold text-gray-700">
                {statusJobs.length}
              </span>
            </div>
            <div className="space-y-3">
              {statusJobs.map((job) => (
                <KanbanCard key={job.id} job={job} />
              ))}
            </div>
          </div>
        );
      })}
    </div>
  );
}

function KanbanCard({ job }: { job: Job }) {
  const router = useRouter();

  return (
    <div
      onClick={() => router.push(`/jobs/${job.id}`)}
      className="bg-white rounded-lg p-3 shadow-sm hover:shadow-md transition-shadow cursor-pointer border border-gray-200"
    >
      <h4 className="font-medium text-sm text-gray-900 mb-2 line-clamp-2">{job.title}</h4>
      <div className="text-xs text-gray-600 mb-2">{job.client.name}</div>
      <div className="flex items-center justify-between text-xs">
        <span className="text-gray-500">{job.filled_positions}/{job.num_positions}</span>
        <span className={`font-semibold ${
          job.health_score >= 70 ? 'text-green-600' :
          job.health_score >= 40 ? 'text-yellow-600' : 'text-red-600'
        }`}>
          {job.health_score}%
        </span>
      </div>
    </div>
  );
}

// Helper Components
function StatCard({ label, value, icon: Icon, color }: any) {
  const colors = {
    blue: 'bg-blue-50 text-blue-600 border-blue-200',
    green: 'bg-green-50 text-green-600 border-green-200',
    yellow: 'bg-yellow-50 text-yellow-600 border-yellow-200',
    purple: 'bg-purple-50 text-purple-600 border-purple-200'
  };

  return (
    <div className="bg-white rounded-xl border shadow-sm p-4">
      <div className="flex items-center gap-3">
        <div className={`p-2 rounded-lg ${colors[color]}`}>
          <Icon className="w-5 h-5" />
        </div>
        <div>
          <div className="text-2xl font-bold text-gray-900">{value}</div>
          <div className="text-sm text-gray-600">{label}</div>
        </div>
      </div>
    </div>
  );
}

function StatusBadge({ status }: { status: Job['status'] }) {
  const config = {
    active: { label: 'Active', color: 'bg-green-100 text-green-700 border-green-300' },
    draft: { label: 'Draft', color: 'bg-gray-100 text-gray-700 border-gray-300' },
    on_hold: { label: 'On Hold', color: 'bg-yellow-100 text-yellow-700 border-yellow-300' },
    closed: { label: 'Closed', color: 'bg-blue-100 text-blue-700 border-blue-300' }
  };

  const { label, color } = config[status];

  return (
    <span className={`px-2 py-1 rounded-full text-xs font-medium border ${color}`}>
      {label}
    </span>
  );
}

function LoadingState() {
  return (
    <div className="flex items-center justify-center py-20">
      <div className="text-center">
        <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"></div>
        <p className="text-gray-600">Loading jobs...</p>
      </div>
    </div>
  );
}

function EmptyState({ hasJobs, onCreateJob }: { hasJobs: boolean; onCreateJob: () => void }) {
  return (
    <div className="bg-white rounded-xl border shadow-sm p-16 text-center">
      <Briefcase className="w-16 h-16 text-gray-400 mx-auto mb-4" />
      <h3 className="text-xl font-bold text-gray-900 mb-2">
        {hasJobs ? 'No jobs match your filters' : 'No jobs yet'}
      </h3>
      <p className="text-gray-600 mb-6">
        {hasJobs ? 'Try adjusting your search or filters' : 'Create your first job to start recruiting'}
      </p>
      <button
        onClick={onCreateJob}
        className="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium"
      >
        <Plus className="w-5 h-5 inline mr-2" />
        Create First Job
      </button>
    </div>
  );
}
-----------------------------

File: src/app/page.tsx
Content:
'use client';
import { useRouter } from 'next/navigation';
import { useEffect } from 'react';

export default function HomePage() {
  const router = useRouter();
  
  useEffect(() => {
    router.push('/dashboard');
  }, [router]);
  
  return (
    <div className="flex items-center justify-center min-h-screen">
      <div className="text-center">
        <h1 className="text-4xl font-bold mb-4">TalentPlus</h1>
        <p className="text-gray-600">Redirecting to dashboard...</p>
      </div>
    </div>
  );
}

-----------------------------

File: src/app/global-error.tsx
Content:
// src/app/global-error.tsx 
'use client';

import { useEffect } from 'react';
import { AlertTriangle, RefreshCw, Home } from 'lucide-react';

export default function GlobalError({
  error,
  reset,
}: {
  error: Error & { digest?: string };
  reset: () => void;
}) {
  useEffect(() => {
    // Log error to monitoring service (add your service here)
    console.error('Global error caught:', error);
  }, [error]);

  return (
    <html>
      <body>
        <div className="min-h-screen flex items-center justify-center bg-gradient-to-br from-red-50 to-orange-50 p-4">
          <div className="max-w-md w-full bg-white rounded-2xl shadow-xl p-8 text-center">
            {/* Icon */}
            <div className="w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6">
              <AlertTriangle className="w-10 h-10 text-red-600" />
            </div>

            {/* Title */}
            <h1 className="text-2xl font-bold text-gray-900 mb-3">
              Something Went Wrong
            </h1>

            {/* Description */}
            <p className="text-gray-600 mb-6">
              We're sorry, but something unexpected happened. 
              This has been logged and we'll investigate.
            </p>

            {/* Error Details (only in development) */}
            {process.env.NODE_ENV === 'development' && (
              <div className="mb-6 p-4 bg-gray-100 rounded-lg text-left">
                <p className="text-xs font-mono text-gray-800 break-words">
                  {error.message}
                </p>
                {error.digest && (
                  <p className="text-xs text-gray-500 mt-2">
                    Error ID: {error.digest}
                  </p>
                )}
              </div>
            )}

            {/* Actions */}
            <div className="space-y-3">
              <button
                onClick={reset}
                className="w-full px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center justify-center gap-2 font-medium transition"
              >
                <RefreshCw className="w-5 h-5" />
                Try Again
              </button>

              <a
                href="/dashboard"
                className="w-full px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 flex items-center justify-center gap-2 font-medium transition"
              >
                <Home className="w-5 h-5" />
                Go to Dashboard
              </a>
            </div>

            {/* Help Text */}
            <p className="text-sm text-gray-500 mt-6">
              If this problem persists, please contact support
            </p>
          </div>
        </div>
      </body>
    </html>
  );
}
-----------------------------

File: src/app/help/page.tsx
Content:
// src/app/help/page.tsx - USER-FOCUSED DOCUMENTATION
'use client';

import { 
  HelpCircle, Upload, Search, Target, Database, Zap, 
  CheckCircle, AlertTriangle, TrendingUp, Users, FileText,
  Sparkles, Shield, Clock, BarChart
} from 'lucide-react';

export default function HelpPage() {
  return (
    <div className="min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 p-8 pb-24 md:pb-8">
      <div className="max-w-4xl mx-auto">
        {/* Header */}
        <div className="text-center mb-12">
          <HelpCircle className="w-16 h-16 text-blue-600 mx-auto mb-4" />
          <h1 className="text-4xl font-bold mb-4 bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent">
            Help & User Guide
          </h1>
          <p className="text-lg text-gray-600">
            Everything you need to know to find perfect candidates faster
          </p>
        </div>

        {/* Quick Start */}
        <div className="bg-white rounded-2xl border shadow-lg p-8 mb-8">
          <h2 className="text-2xl font-bold mb-6 flex items-center gap-3">
            <Zap className="w-7 h-7 text-yellow-500" />
            Quick Start Guide
          </h2>
          
          <div className="space-y-6">
            <div className="flex gap-4">
              <div className="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center text-xl font-bold text-blue-600 flex-shrink-0">
                1
              </div>
              <div className="flex-1">
                <h3 className="font-semibold text-lg mb-2">Upload Resumes to Your Library</h3>
                <p className="text-gray-700 mb-2">
                  Go to <strong>Library</strong> → Click <strong>"Add Candidate"</strong> → Upload PDF, DOCX, or TXT files
                </p>
                <div className="bg-blue-50 p-3 rounded-lg text-sm">
                  <strong>💡 Pro Tip:</strong> Use "Bulk Upload" to process 10-50 resumes at once
                </div>
              </div>
            </div>

            <div className="flex gap-4">
              <div className="w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center text-xl font-bold text-purple-600 flex-shrink-0">
                2
              </div>
              <div className="flex-1">
                <h3 className="font-semibold text-lg mb-2">Create a Match</h3>
                <p className="text-gray-700 mb-2">
                  Go to <strong>Match</strong> → Paste your full job description → Click <strong>"Match Candidates"</strong>
                </p>
                <div className="bg-purple-50 p-3 rounded-lg text-sm">
                  <strong>💡 Pro Tip:</strong> Include specific skills, experience years, and must-have requirements for best results
                </div>
              </div>
            </div>

            <div className="flex gap-4">
              <div className="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center text-xl font-bold text-green-600 flex-shrink-0">
                3
              </div>
              <div className="flex-1">
                <h3 className="font-semibold text-lg mb-2">Review Top Matches</h3>
                <p className="text-gray-700 mb-2">
                  Get instant results ranked by match score with detailed explanations
                </p>
                <div className="bg-green-50 p-3 rounded-lg text-sm">
                  <strong>💡 Pro Tip:</strong> Tier A (85-100%) = Excellent fit, Tier B (70-84%) = Strong fit
                </div>
              </div>
            </div>
          </div>
        </div>

        {/* Understanding Results */}
        <div className="bg-white rounded-2xl border shadow-lg p-8 mb-8">
          <h2 className="text-2xl font-bold mb-6 flex items-center gap-3">
            <BarChart className="w-7 h-7 text-green-600" />
            Understanding Match Scores
          </h2>

          <div className="space-y-4">
            <div className="border-l-4 border-green-500 pl-4 py-2">
              <div className="flex items-center gap-2 mb-1">
                <span className="px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-bold">Tier A</span>
                <span className="font-semibold">85-100% Match</span>
              </div>
              <p className="text-gray-700 text-sm">
                <strong>Excellent candidate.</strong> Meets all major requirements. Recommend immediate interview.
              </p>
            </div>

            <div className="border-l-4 border-blue-500 pl-4 py-2">
              <div className="flex items-center gap-2 mb-1">
                <span className="px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-bold">Tier B</span>
                <span className="font-semibold">70-84% Match</span>
              </div>
              <p className="text-gray-700 text-sm">
                <strong>Strong candidate.</strong> Meets most requirements with minor gaps. Worth interviewing.
              </p>
            </div>

            <div className="border-l-4 border-yellow-500 pl-4 py-2">
              <div className="flex items-center gap-2 mb-1">
                <span className="px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-sm font-bold">Tier C</span>
                <span className="font-semibold">50-69% Match</span>
              </div>
              <p className="text-gray-700 text-sm">
                <strong>Potential candidate.</strong> Some skills match but has gaps. Consider if adjustable.
              </p>
            </div>

            <div className="border-l-4 border-gray-400 pl-4 py-2">
              <div className="flex items-center gap-2 mb-1">
                <span className="px-3 py-1 bg-gray-100 text-gray-800 rounded-full text-sm font-bold">Tier D</span>
                <span className="font-semibold">Below 50% Match</span>
              </div>
              <p className="text-gray-700 text-sm">
                <strong>Not recommended.</strong> Significant gaps in requirements. Consider for different roles.
              </p>
            </div>
          </div>

          <div className="mt-6 bg-blue-50 p-4 rounded-lg">
            <h3 className="font-semibold text-blue-900 mb-2 flex items-center gap-2">
              <Sparkles className="w-5 h-5" />
              How Scoring Works
            </h3>
            <ul className="text-sm text-blue-900 space-y-1 ml-5 list-disc">
              <li><strong>Skills (40%):</strong> Technical and domain expertise match</li>
              <li><strong>Experience (30%):</strong> Years of relevant experience</li>
              <li><strong>Education (15%):</strong> Degree and certification alignment</li>
              <li><strong>Location (10%):</strong> Geographic fit for role</li>
              <li><strong>Certifications (5%):</strong> Professional credentials</li>
            </ul>
          </div>
        </div>

        {/* Resume Upload Best Practices */}
        <div className="bg-white rounded-2xl border shadow-lg p-8 mb-8">
          <h2 className="text-2xl font-bold mb-6 flex items-center gap-3">
            <Upload className="w-7 h-7 text-orange-600" />
            Resume Upload Best Practices
          </h2>

          <div className="grid md:grid-cols-2 gap-6">
            <div>
              <h3 className="font-semibold text-green-700 mb-3 flex items-center gap-2">
                <CheckCircle className="w-5 h-5" />
                ✓ Do This
              </h3>
              <ul className="space-y-2 text-sm text-gray-700">
                <li>✓ Use standard formats: PDF, DOCX, TXT</li>
                <li>✓ Ensure text is selectable (not scanned images)</li>
                <li>✓ Include clear sections: Experience, Education, Skills</li>
                <li>✓ Keep file size under 10MB</li>
                <li>✓ Use well-formatted, ATS-friendly resumes</li>
                <li>✓ Include contact information (email, phone)</li>
              </ul>
            </div>

            <div>
              <h3 className="font-semibold text-red-700 mb-3 flex items-center gap-2">
                <AlertTriangle className="w-5 h-5" />
                ✗ Avoid This
              </h3>
              <ul className="space-y-2 text-sm text-gray-700">
                <li>✗ Scanned images or photos of resumes</li>
                <li>✗ Heavy graphics, charts, or infographics</li>
                <li>✗ Password-protected files</li>
                <li>✗ Files larger than 10MB</li>
                <li>✗ Unusual fonts or colors</li>
                <li>✗ Incomplete or vague information</li>
              </ul>
            </div>
          </div>

          <div className="mt-6 bg-yellow-50 border border-yellow-200 p-4 rounded-lg">
            <p className="text-sm text-yellow-900">
              <strong>⚠️ Low Confidence Score?</strong> If a resume gets below 70% confidence, it might have formatting issues. 
              Review the extracted data in the candidate profile and edit if needed.
            </p>
          </div>
        </div>

        {/* External Search */}
        <div className="bg-white rounded-2xl border shadow-lg p-8 mb-8">
          <h2 className="text-2xl font-bold mb-6 flex items-center gap-3">
            <Search className="w-7 h-7 text-teal-600" />
            Finding External Candidates
          </h2>

          <p className="text-gray-700 mb-4">
            Can't find the right candidate in your library? Use <strong>"Find External Candidates"</strong> 
            to search Apollo.io and other professional databases.
          </p>

          <div className="bg-teal-50 p-4 rounded-lg mb-4">
            <h3 className="font-semibold mb-2">How It Works:</h3>
            <ol className="list-decimal list-inside space-y-1 text-sm text-gray-700">
              <li>Paste your job description in the Match page</li>
              <li>Click "Find External Candidates"</li>
              <li>Enter location (e.g., "Remote", "London", "Belgium")</li>
              <li>Choose how many candidates to import (5-50)</li>
              <li>AI automatically adds them to your library and runs the match</li>
            </ol>
          </div>

          <div className="bg-blue-50 p-4 rounded-lg">
            <p className="text-sm text-blue-900">
              <strong>💡 Setup Required:</strong> Contact your administrator to configure Apollo API access. 
              External search is billed separately through Apollo.io.
            </p>
          </div>
        </div>

        {/* Troubleshooting */}
        <div className="bg-white rounded-2xl border shadow-lg p-8 mb-8">
          <h2 className="text-2xl font-bold mb-6 flex items-center gap-3">
            <Shield className="w-7 h-7 text-red-600" />
            Troubleshooting Common Issues
          </h2>

          <div className="space-y-6">
            <div>
              <h3 className="font-semibold text-lg mb-2">❓ "No matches found"</h3>
              <p className="text-gray-700 text-sm mb-2">
                <strong>Likely Cause:</strong> Your database might be empty or filters too strict.
              </p>
              <p className="text-gray-700 text-sm">
                <strong>Solution:</strong> Upload more resumes to your Library, or try "Find External Candidates"
              </p>
            </div>

            <div>
              <h3 className="font-semibold text-lg mb-2">❓ "Low confidence scores on uploads"</h3>
              <p className="text-gray-700 text-sm mb-2">
                <strong>Likely Cause:</strong> Resume has poor formatting or is a scanned image.
              </p>
              <p className="text-gray-700 text-sm">
                <strong>Solution:</strong> Request a text-based version from the candidate, or manually review and edit the profile
              </p>
            </div>

            <div>
              <h3 className="font-semibold text-lg mb-2">❓ "Parsing failed"</h3>
              <p className="text-gray-700 text-sm mb-2">
                <strong>Likely Cause:</strong> File is corrupted, password-protected, or unsupported format.
              </p>
              <p className="text-gray-700 text-sm">
                <strong>Solution:</strong> Re-export the resume as PDF or DOCX and try again
              </p>
            </div>

            <div>
              <h3 className="font-semibold text-lg mb-2">❓ "External search not working"</h3>
              <p className="text-gray-700 text-sm mb-2">
                <strong>Likely Cause:</strong> Apollo API key not configured or expired.
              </p>
              <p className="text-gray-700 text-sm">
                <strong>Solution:</strong> Check Settings → External Sources, or contact support
              </p>
            </div>
          </div>
        </div>

        {/* System Requirements */}
        <div className="bg-white rounded-2xl border shadow-lg p-8">
          <h2 className="text-2xl font-bold mb-6 flex items-center gap-3">
            <Clock className="w-7 h-7 text-indigo-600" />
            System Information
          </h2>

          <div className="grid md:grid-cols-2 gap-6 text-sm">
            <div>
              <h3 className="font-semibold mb-2">Supported File Formats</h3>
              <ul className="space-y-1 text-gray-700">
                <li>• PDF (.pdf)</li>
                <li>• Microsoft Word (.docx)</li>
                <li>• Plain Text (.txt)</li>
              </ul>
            </div>

            <div>
              <h3 className="font-semibold mb-2">File Limits</h3>
              <ul className="space-y-1 text-gray-700">
                <li>• Max size: 10MB per file</li>
                <li>• Bulk upload: 50 files max</li>
                <li>• Processing time: 5-10 seconds per resume</li>
              </ul>
            </div>

            <div>
              <h3 className="font-semibold mb-2">AI Processing</h3>
              <ul className="space-y-1 text-gray-700">
                <li>• Primary: OpenAI GPT-4</li>
                <li>• Fallback: Claude (Anthropic)</li>
                <li>• Final fallback: Regex parsing</li>
              </ul>
            </div>

            <div>
              <h3 className="font-semibold mb-2">Data Storage</h3>
              <ul className="space-y-1 text-gray-700">
                <li>• Secure cloud database (Supabase)</li>
                <li>• Full-text search enabled</li>
                <li>• Automatic backups daily</li>
              </ul>
            </div>
          </div>
        </div>

        {/* Contact Support */}
        <div className="mt-8 text-center bg-gradient-to-r from-blue-600 to-purple-600 text-white p-8 rounded-2xl">
          <h3 className="text-2xl font-bold mb-2">Still Need Help?</h3>
          <p className="mb-4">Our support team is here for you</p>
          <div className="flex flex-col sm:flex-row gap-4 justify-center">
            <a 
              href="mailto:support@talentplus.ai" 
              className="px-6 py-3 bg-white text-blue-600 rounded-lg font-semibold hover:bg-gray-100 transition"
            >
              Email Support
            </a>
            <a 
              href="/docs" 
              className="px-6 py-3 bg-white/20 backdrop-blur-sm text-white rounded-lg font-semibold hover:bg-white/30 transition"
            >
              View Documentation
            </a>
          </div>
        </div>
      </div>
    </div>
  );
}
-----------------------------

File: src/components/GlassCard.tsx
Content:
import { ReactNode } from 'react';

interface GlassCardProps {
  children: ReactNode;
  className?: string;
  style?: React.CSSProperties;
}

export default function GlassCard({ children, className = '', style = {} }: GlassCardProps) {
  return (
    <div 
      className={`glass-card bg-white/70 backdrop-blur-lg border border-white/20 rounded-2xl shadow-xl ${className}`}
      style={style}
    >
      {children}
    </div>
  );
}
-----------------------------

File: src/components/UploadForm.tsx
Content:
import { useRef, useState } from 'react';

export default function UploadForm({ onParsed }: any) {
  const fileRef = useRef<HTMLInputElement | null>(null);
  const [loading, setLoading] = useState(false);
  const [msg, setMsg] = useState('');

  async function upload() {
    if (!fileRef.current?.files?.[0]) return;
    const file = fileRef.current.files[0];
    const form = new FormData();
    form.append('file', file);
    setLoading(true);
    setMsg('');
    const res = await fetch('/api/resumes/parse', { method: 'POST', body: form });
    const data = await res.json();
    setLoading(false);
    if (!res.ok) {
      setMsg(JSON.stringify(data));
    } else {
      setMsg('Parsed & saved');
      onParsed && onParsed(data.candidate);
    }
  }

  return (
    <div style={{ border: '1px solid #ddd', padding: 12, borderRadius: 8 }}>
      <label>Select resume (PDF/DOCX/TXT)</label><br />
      <input ref={fileRef} type="file" accept=".pdf,.docx,.txt" />
      <div style={{ marginTop: 8 }}>
        <button onClick={upload} disabled={loading}>{loading ? 'Uploading...' : 'Add Talent Profile'}</button>
      </div>
      {msg && <div style={{ marginTop: 8 }}>{msg}</div>}
    </div>
  );
}

-----------------------------

File: src/components/CandidateCard.tsx
Content:
// src/components/CandidateCard.tsx
import Link from 'next/link';

export default function CandidateCard({ candidate }: { candidate: any }) {
  return (
    <div className="border rounded-lg p-4 hover:shadow-md">
      <h3 className="font-bold">{candidate.name || 'Unknown'}</h3>
      <p className="text-sm text-gray-600">{candidate.email}</p>
      <div className="mt-2 flex flex-wrap gap-1">
        {(candidate.skills || []).slice(0, 5).map((skill: string) => (
          <span key={skill} className="bg-blue-100 text-blue-800 text-xs px-2 py-0.5 rounded">
            {skill}
          </span>
        ))}
      </div>
      <div className={`mt-2 text-xs px-2 py-1 rounded inline-block ${
        candidate.parse_confidence >= 80 ? 'bg-green-100 text-green-800' :
        candidate.parse_confidence >= 60 ? 'bg-yellow-100 text-yellow-800' :
        'bg-red-100 text-red-800'
      }`}>
        {candidate.parse_confidence}% confidence
      </div>
      <div className="mt-3 space-x-2">
        <Link href={`/manual-review/${candidate.id}`} className="text-sm text-blue-600">
          Review
        </Link>
      </div>
    </div>
  );
}
-----------------------------

File: src/components/MatchScore.tsx
Content:
// src/components/MatchScore.tsx
export default function MatchScore({ score, tier }: { score: number; tier: string }) {
  return (
    <div className="flex justify-between items-center mt-2">
      <span className={`px-2 py-1 rounded text-xs ${
        tier === 'A' ? 'bg-green-100 text-green-800' :
        tier === 'B' ? 'bg-blue-100 text-blue-800' :
        'bg-yellow-100 text-yellow-800'
      }`}>
        Tier {tier}
      </span>
      <span className="font-bold">{score}%</span>
    </div>
  );
}
-----------------------------

File: src/components/ManualReviewPanel.tsx
Content:
export default function ManualReviewPanel({ rawText, suggested, onApprove }: any) {
    return (
      <div style={{ display: 'flex', gap: 12 }}>
        <div style={{ flex: 1 }}>
          <h4>Raw</h4>
          <pre style={{ maxHeight: 400, overflow: 'auto' }}>{rawText}</pre>
        </div>
        <div style={{ flex: 1 }}>
          <h4>Suggested</h4>
          <pre>{JSON.stringify(suggested, null, 2)}</pre>
          <button onClick={() => onApprove(suggested)}>Approve</button>
        </div>
      </div>
    );
  }
  
-----------------------------

File: src/components/Navigation.tsx
Content:
// src/components/Navigation.tsx
'use client';

import { useState } from 'react';
import Link from 'next/link';
import { usePathname } from 'next/navigation';
import {
  LayoutDashboard,
  Briefcase,
  Users,
  Building2,
  Target,
  Send,
  Settings,
  HelpCircle,
  Menu,
  X,
  ChevronDown,
  History,
  Database
} from 'lucide-react';

interface NavItem {
  label: string;
  href: string;
  icon: any;
  badge?: number;
  submenu?: { label: string; href: string; }[];
}

const navItems: NavItem[] = [
  {
    label: 'Dashboard',
    href: '/dashboard',
    icon: LayoutDashboard
  },
  {
    label: 'Jobs',
    href: '/jobs',
    icon: Briefcase,
    submenu: [
      { label: 'All Jobs', href: '/jobs' },
      { label: 'Create Job', href: '/jobs/new' },
      { label: 'Active Jobs', href: '/jobs?status=active' },
      { label: 'Closed Jobs', href: '/jobs?status=closed' }
    ]
  },
  {
    label: 'Clients',
    href: '/clients',
    icon: Building2,
    submenu: [
      { label: 'All Clients', href: '/clients' },
      { label: 'Add Client', href: '/clients/new' }
    ]
  },
  {
    label: 'Library',
    href: '/library',
    icon: Database
  },
  {
    label: 'Match',
    href: '/match',
    icon: Target,
    submenu: [
      { label: 'New Match', href: '/match' },
      { label: 'Match History', href: '/match/history' }
    ]
  },
  {
    label: 'Submissions',
    href: '/submissions',
    icon: Send
  },
  {
    label: 'Settings',
    href: '/settings',
    icon: Settings
  },
  {
    label: 'Help',
    href: '/help',
    icon: HelpCircle
  }
];

export default function Navigation() {
  const pathname = usePathname();
  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);
  const [activeSubmenu, setActiveSubmenu] = useState<string | null>(null);

  const isActive = (href: string) => {
    if (href === '/dashboard') return pathname === href;
    return pathname.startsWith(href);
  };

  const toggleSubmenu = (label: string) => {
    setActiveSubmenu(activeSubmenu === label ? null : label);
  };

  return (
    <>
      {/* Desktop Navigation */}
      <nav className="hidden md:flex fixed top-0 left-0 right-0 bg-white border-b border-gray-200 z-40">
        <div className="w-full px-4 lg:px-6">
          <div className="flex items-center justify-between h-16">
            {/* Logo */}
            <Link href="/dashboard" className="flex items-center gap-2">
              <div className="w-8 h-8 bg-gradient-to-br from-blue-600 to-purple-600 rounded-lg flex items-center justify-center">
                <span className="text-white font-bold text-lg">T</span>
              </div>
              <span className="text-xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent">
                TalentPlus
              </span>
            </Link>

            {/* Main Navigation */}
            <div className="flex items-center gap-1">
              {navItems.map((item) => (
                <div key={item.label} className="relative group">
                  <Link
                    href={item.href}
                    className={`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${
                      isActive(item.href)
                        ? 'bg-blue-50 text-blue-700 font-medium'
                        : 'text-gray-700 hover:bg-gray-100'
                    }`}
                  >
                    <item.icon className="w-5 h-5" />
                    <span className="text-sm">{item.label}</span>
                    {item.badge && (
                      <span className="ml-1 px-2 py-0.5 bg-red-500 text-white text-xs rounded-full font-bold">
                        {item.badge}
                      </span>
                    )}
                    {item.submenu && (
                      <ChevronDown className="w-4 h-4 ml-1" />
                    )}
                  </Link>

                  {/* Dropdown Submenu */}
                  {item.submenu && (
                    <div className="absolute top-full left-0 mt-1 w-48 bg-white border border-gray-200 rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all">
                      {item.submenu.map((subitem) => (
                        <Link
                          key={subitem.href}
                          href={subitem.href}
                          className="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 first:rounded-t-lg last:rounded-b-lg"
                        >
                          {subitem.label}
                        </Link>
                      ))}
                    </div>
                  )}
                </div>
              ))}
            </div>

            {/* User Menu */}
            <div className="flex items-center gap-3">
              <button className="px-4 py-2 text-sm font-medium text-gray-700 hover:text-gray-900">
                Your Account
              </button>
            </div>
          </div>
        </div>
      </nav>

      {/* Mobile Navigation */}
      <nav className="md:hidden fixed top-0 left-0 right-0 bg-white border-b border-gray-200 z-40">
        <div className="flex items-center justify-between h-16 px-4">
          {/* Logo */}
          <Link href="/dashboard" className="flex items-center gap-2">
            <div className="w-8 h-8 bg-gradient-to-br from-blue-600 to-purple-600 rounded-lg flex items-center justify-center">
              <span className="text-white font-bold text-lg">T</span>
            </div>
            <span className="text-lg font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent">
              TalentPlus
            </span>
          </Link>

          {/* Mobile Menu Button */}
          <button
            onClick={() => setMobileMenuOpen(!mobileMenuOpen)}
            className="p-2 rounded-lg hover:bg-gray-100"
          >
            {mobileMenuOpen ? (
              <X className="w-6 h-6" />
            ) : (
              <Menu className="w-6 h-6" />
            )}
          </button>
        </div>

        {/* Mobile Menu Drawer */}
        {mobileMenuOpen && (
          <div className="absolute top-16 left-0 right-0 bg-white border-b border-gray-200 shadow-lg max-h-[calc(100vh-4rem)] overflow-y-auto">
            <div className="py-2">
              {navItems.map((item) => (
                <div key={item.label}>
                  <button
                    onClick={() => {
                      if (item.submenu) {
                        toggleSubmenu(item.label);
                      } else {
                        setMobileMenuOpen(false);
                      }
                    }}
                    className={`w-full flex items-center justify-between px-4 py-3 ${
                      isActive(item.href)
                        ? 'bg-blue-50 text-blue-700 font-medium'
                        : 'text-gray-700'
                    }`}
                  >
                    <Link
                      href={item.href}
                      className="flex items-center gap-3 flex-1"
                      onClick={(e) => {
                        if (item.submenu) e.preventDefault();
                        else setMobileMenuOpen(false);
                      }}
                    >
                      <item.icon className="w-5 h-5" />
                      <span>{item.label}</span>
                      {item.badge && (
                        <span className="px-2 py-0.5 bg-red-500 text-white text-xs rounded-full font-bold">
                          {item.badge}
                        </span>
                      )}
                    </Link>
                    {item.submenu && (
                      <ChevronDown
                        className={`w-4 h-4 transition-transform ${
                          activeSubmenu === item.label ? 'rotate-180' : ''
                        }`}
                      />
                    )}
                  </button>

                  {/* Mobile Submenu */}
                  {item.submenu && activeSubmenu === item.label && (
                    <div className="bg-gray-50 border-t border-b border-gray-200">
                      {item.submenu.map((subitem) => (
                        <Link
                          key={subitem.href}
                          href={subitem.href}
                          onClick={() => setMobileMenuOpen(false)}
                          className="block px-12 py-2 text-sm text-gray-700 hover:bg-gray-100"
                        >
                          {subitem.label}
                        </Link>
                      ))}
                    </div>
                  )}
                </div>
              ))}
            </div>
          </div>
        )}
      </nav>

      {/* Spacer for fixed navigation */}
      <div className="h-16"></div>
    </>
  );
}
-----------------------------

File: src/components/UploadModal.tsx
Content:
// src/components/UploadModal.tsx
'use client';
import { useState } from 'react';
import { X, Upload, CheckCircle, AlertCircle, Loader2 } from 'lucide-react';

export default function UploadModal({ onClose, onUploadSuccess }: { onClose: () => void; onUploadSuccess: () => void }) {
  const [uploading, setUploading] = useState(false);
  const [message, setMessage] = useState<{ type: string; text: string } | null>(null);

  async function handleFileUpload(file: File | null) {
    if (!file) return;
    if (file.size > 10 * 1024 * 1024) {
      setMessage({ type: 'error', text: 'File too large (max 10MB)' });
      return;
    }
    const validTypes = ['application/pdf', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document', 'text/plain'];
    if (!validTypes.includes(file.type)) {
      setMessage({ type: 'error', text: 'Invalid file type. Please upload PDF, DOCX, or TXT' });
      return;
    }

    setUploading(true);
    setMessage(null);
    const formData = new FormData();
    formData.append('file', file);

    try {
      const res = await fetch('/api/parse', { method: 'POST', body: formData });
      const data = await res.json();
      if (data.success) {
        setMessage({ type: 'success', text: `✓ ${data.data.name} added successfully!` });
        setTimeout(() => {
          onUploadSuccess();
          onClose();
        }, 1500);
      } else {
        setMessage({ type: 'error', text: data.error || 'Upload failed' });
      }
    } catch (err) {
      setMessage({ type: 'error', text: 'Upload failed. Please try again.' });
    } finally {
      setUploading(false);
    }
  }

  function handleDrop(e: React.DragEvent) {
    e.preventDefault();
    const file = e.dataTransfer.files[0];
    if (file) handleFileUpload(file);
  }

  return (
    <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
      <div className="bg-white rounded-2xl shadow-xl w-full max-w-md">
        <div className="flex justify-between items-center p-6 border-b">
          <h3 className="text-xl font-bold">Upload Resume</h3>
          <button onClick={onClose} className="text-gray-500 hover:text-gray-700">
            <X className="w-5 h-5" />
          </button>
        </div>

        <div
          onDrop={handleDrop}
          onDragOver={(e) => e.preventDefault()}
          className="border-2 border-dashed border-gray-300 rounded-xl p-12 text-center m-6"
        >
          {uploading ? (
            <div className="space-y-4">
              <Loader2 className="w-12 h-12 text-blue-600 animate-spin mx-auto" />
              <p className="text-gray-700">Processing...</p>
            </div>
          ) : (
            <>
              <Upload className="w-12 h-12 text-gray-400 mx-auto mb-3" />
              <p className="text-gray-700 mb-2">Drop file or click below</p>
              <input
                type="file"
                accept=".pdf,.docx,.txt"
                onChange={(e) => handleFileUpload(e.target.files?.[0] || null)}
                className="hidden"
                id="modal-file"
              />
              <label
                htmlFor="modal-file"
                className="px-4 py-2 bg-blue-600 text-white rounded-lg cursor-pointer text-sm"
              >
                Choose File
              </label>
            </>
          )}
        </div>

        {message && (
          <div className={`mx-6 p-3 rounded-lg ${
            message.type === 'success' ? 'bg-green-50 text-green-800' : 'bg-red-50 text-red-800'
          }`}>
            {message.type === 'success' ? <CheckCircle className="w-4 h-4 inline mr-2" /> : <AlertCircle className="w-4 h-4 inline mr-2" />}
            {message.text}
          </div>
        )}
      </div>
    </div>
  );
}
-----------------------------

File: database/schema.sql
Content:
-- ============================================
-- TalentPlus PRODUCTION Database Schema v1.1
-- CLEAN & OPTIMIZED FOR PRODUCTION
-- ============================================
-- Enable required extensions
CREATE EXTENSION IF NOT EXISTS "uuid-ossp";
CREATE EXTENSION IF NOT EXISTS "pg_trgm";
CREATE EXTENSION IF NOT EXISTS "pgcrypto";

-- ============================================
-- USER SETTINGS TABLE 
-- ============================================
CREATE TABLE IF NOT EXISTS user_settings (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID, -- For future multi-user support
  settings JSONB NOT NULL DEFAULT '{
    "name": "",
    "company": "",
    "email": "",
    "minScore": 70,
    "exportFields": ["name", "email", "skills", "experience", "score"],
    "notifications": true
  }'::jsonb,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);
-- Insert default settings
INSERT INTO user_settings (settings) 
VALUES ('{
  "name": "",
  "company": "",
  "email": "",
  "minScore": 70,
  "exportFields": ["name", "email", "skills", "experience", "score"],
  "notifications": true
}'::jsonb)
ON CONFLICT (id) DO NOTHING;

-- ============================================
-- MATCH HISTORY TABLE 
-- ============================================
CREATE TABLE IF NOT EXISTS match_history (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  job_title TEXT NOT NULL,
  job_description TEXT NOT NULL,
  match_count INTEGER DEFAULT 0,
  top_matches UUID[] DEFAULT '{}', -- Array of candidate IDs
  filters JSONB, -- Store search criteria
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);
CREATE INDEX IF NOT EXISTS idx_match_history_created ON match_history(created_at DESC);

-- ============================================
-- CANDIDATES TABLE (ENHANCED)
-- ============================================
CREATE TABLE IF NOT EXISTS candidates (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  -- Basic Info
  name TEXT NOT NULL,
  email TEXT,
  phone TEXT,
  location TEXT,
  -- Professional Info
  title TEXT,
  summary TEXT,
  years_of_experience INTEGER DEFAULT 0,
  -- Structured Data
  skills TEXT[] DEFAULT '{}',
  experience JSONB DEFAULT '[]',
  education JSONB DEFAULT '[]',
  certifications JSONB DEFAULT '[]',
  languages TEXT[] DEFAULT '{}',
  -- File Metadata
  raw_text TEXT,
  file_name TEXT,
  file_type TEXT,
  file_size INTEGER,
  content_hash TEXT,
  -- Parse Metadata
  parse_confidence INTEGER DEFAULT 0 CHECK (parse_confidence >= 0 AND parse_confidence <= 100),
  parse_method TEXT,
  parse_status TEXT DEFAULT 'pending' CHECK (parse_status IN ('pending', 'processing', 'completed', 'failed', 'needs_review')),
  parse_attempts INTEGER DEFAULT 0,
  -- Source Tracking
  source TEXT DEFAULT 'upload' CHECK (source IN ('upload', 'api', 'import', 'enriched', 'apollo')),
  source_url TEXT,
  -- Authenticity Detection
  authenticity_score INTEGER DEFAULT 0,
  authenticity_risk TEXT CHECK (authenticity_risk IN ('LOW', 'MEDIUM', 'HIGH', 'CRITICAL')),
  authenticity_report JSONB,
  authenticity_checked_at TIMESTAMPTZ,
  -- Search
  search_vector tsvector,
  -- Timestamps
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW(),
  last_viewed_at TIMESTAMPTZ,
  deleted_at TIMESTAMPTZ
);
-- Enhanced Indexes
CREATE INDEX IF NOT EXISTS idx_candidates_skills ON candidates USING GIN(skills);
CREATE INDEX IF NOT EXISTS idx_candidates_search ON candidates USING GIN(search_vector);
CREATE INDEX IF NOT EXISTS idx_candidates_email ON candidates(email) WHERE email IS NOT NULL;
CREATE INDEX IF NOT EXISTS idx_candidates_parse_status ON candidates(parse_status) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_candidates_created_at ON candidates(created_at DESC) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_candidates_confidence ON candidates(parse_confidence DESC) WHERE deleted_at IS NULL;
CREATE INDEX IF NOT EXISTS idx_candidates_source ON candidates(source);
CREATE INDEX IF NOT EXISTS idx_candidates_name ON candidates USING GIN(name gin_trgm_ops); -- For fuzzy search
CREATE INDEX IF NOT EXISTS idx_candidates_authenticity ON candidates(authenticity_score DESC) WHERE deleted_at IS NULL;

-- ============================================
-- JOBS TABLE
-- ============================================
CREATE TABLE IF NOT EXISTS jobs (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  title TEXT NOT NULL,
  company TEXT,
  description TEXT NOT NULL,
  -- Parsed Requirements
  required_skills TEXT[] DEFAULT '{}',
  preferred_skills TEXT[] DEFAULT '{}',
  min_experience INTEGER,
  max_experience INTEGER,
  education_level TEXT,
  location_type TEXT CHECK (location_type IN ('remote', 'hybrid', 'onsite', 'any')),
  locations TEXT[] DEFAULT '{}',
  seniority_level TEXT CHECK (seniority_level IN ('intern', 'junior', 'mid', 'senior', 'lead', 'executive')),
  -- Analysis
  analysis JSONB,
  analysis_confidence INTEGER,
  -- Metadata
  status TEXT DEFAULT 'active' CHECK (status IN ('active', 'archived', 'draft')),
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW(),
  deleted_at TIMESTAMPTZ
);
CREATE INDEX IF NOT EXISTS idx_jobs_created ON jobs(created_at DESC);
CREATE INDEX IF NOT EXISTS idx_jobs_status ON jobs(status) WHERE deleted_at IS NULL;

-- ============================================
-- MATCH RESULTS TABLE
-- ============================================
CREATE TABLE IF NOT EXISTS match_results (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  candidate_id UUID NOT NULL REFERENCES candidates(id) ON DELETE CASCADE,
  job_id UUID REFERENCES jobs(id) ON DELETE CASCADE,
  -- Scores
  overall_score INTEGER NOT NULL CHECK (overall_score >= 0 AND overall_score <= 100),
  skills_score INTEGER,
  experience_score INTEGER,
  education_score INTEGER,
  location_score INTEGER,
  -- Analysis
  matched_skills TEXT[] DEFAULT '{}',
  missing_skills TEXT[] DEFAULT '{}',
  strengths TEXT[] DEFAULT '{}',
  gaps TEXT[] DEFAULT '{}',
  explanation TEXT,
  recommendation TEXT,
  tier TEXT CHECK (tier IN ('A', 'B', 'C', 'D')),
  -- Interview
  suggested_questions JSONB DEFAULT '[]',
  -- Status
  status TEXT DEFAULT 'new' CHECK (status IN ('new', 'reviewed', 'shortlisted', 'rejected', 'interviewed', 'hired')),
  reviewed_at TIMESTAMPTZ,
  notes TEXT,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);
CREATE INDEX IF NOT EXISTS idx_matches_candidate ON match_results(candidate_id);
CREATE INDEX IF NOT EXISTS idx_matches_job ON match_results(job_id);
CREATE INDEX IF NOT EXISTS idx_matches_score ON match_results(overall_score DESC);
CREATE INDEX IF NOT EXISTS idx_matches_tier ON match_results(tier);

-- ============================================
-- PARSE ATTEMPTS (MONITORING)
-- ============================================
CREATE TABLE IF NOT EXISTS parse_attempts (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  candidate_id UUID REFERENCES candidates(id) ON DELETE CASCADE,
  file_name TEXT,
  method TEXT NOT NULL,
  model TEXT,
  tokens_used INTEGER,
  processing_time_ms INTEGER,
  cost_usd DECIMAL(10, 4),
  confidence INTEGER,
  success BOOLEAN,
  error_message TEXT,
  response JSONB,
  created_at TIMESTAMPTZ DEFAULT NOW()
);
CREATE INDEX IF NOT EXISTS idx_parse_candidate ON parse_attempts(candidate_id);
CREATE INDEX IF NOT EXISTS idx_parse_method ON parse_attempts(method);
CREATE INDEX IF NOT EXISTS idx_parse_created ON parse_attempts(created_at DESC);

-- ============================================
-- AUDIT LOGS
-- ============================================
CREATE TABLE IF NOT EXISTS audit_logs (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  action TEXT NOT NULL,
  resource_type TEXT,
  resource_id UUID,
  user_id UUID,
  ip_address INET,
  old_data JSONB,
  new_data JSONB,
  metadata JSONB,
  created_at TIMESTAMPTZ DEFAULT NOW()
);
CREATE INDEX IF NOT EXISTS idx_audit_action ON audit_logs(action);
CREATE INDEX IF NOT EXISTS idx_audit_created ON audit_logs(created_at DESC);

-- ============================================
-- API RATE LIMITING TABLE
-- ============================================
CREATE TABLE IF NOT EXISTS api_rate_limits (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  endpoint TEXT NOT NULL,
  user_id UUID,
  ip_address INET,
  request_count INTEGER DEFAULT 0,
  reset_time TIMESTAMPTZ NOT NULL,
  created_at TIMESTAMPTZ DEFAULT NOW()
);
CREATE INDEX IF NOT EXISTS idx_rate_limits_reset ON api_rate_limits(reset_time);
CREATE INDEX IF NOT EXISTS idx_rate_limits_endpoint ON api_rate_limits(endpoint);

-- ============================================
-- TRIGGERS
-- ============================================
-- Auto-update updated_at
CREATE OR REPLACE FUNCTION update_updated_at()
RETURNS TRIGGER AS $$
BEGIN
  NEW.updated_at = NOW();
  RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER update_candidates_updated_at BEFORE UPDATE ON candidates
  FOR EACH ROW EXECUTE FUNCTION update_updated_at();
CREATE TRIGGER update_settings_updated_at BEFORE UPDATE ON user_settings
  FOR EACH ROW EXECUTE FUNCTION update_updated_at();
CREATE TRIGGER update_match_history_updated_at BEFORE UPDATE ON match_history
  FOR EACH ROW EXECUTE FUNCTION update_updated_at();
CREATE TRIGGER update_jobs_updated_at BEFORE UPDATE ON jobs
  FOR EACH ROW EXECUTE FUNCTION update_updated_at();
CREATE TRIGGER update_match_results_updated_at BEFORE UPDATE ON match_results
  FOR EACH ROW EXECUTE FUNCTION update_updated_at();

-- Update search vector
CREATE OR REPLACE FUNCTION update_search_vector()
RETURNS TRIGGER AS $$
BEGIN
  NEW.search_vector := 
    setweight(to_tsvector('english', COALESCE(NEW.name, '')), 'A') ||
    setweight(to_tsvector('english', COALESCE(NEW.title, '')), 'A') ||
    setweight(to_tsvector('english', COALESCE(NEW.summary, '')), 'B') ||
    setweight(to_tsvector('english', COALESCE(array_to_string(NEW.skills, ' '), '')), 'A');
  RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER update_candidate_search BEFORE INSERT OR UPDATE ON candidates
  FOR EACH ROW EXECUTE FUNCTION update_search_vector();

-- ============================================
-- HELPER VIEWS
-- ============================================
CREATE OR REPLACE VIEW candidate_stats AS
SELECT 
  COUNT(*) as total,
  COUNT(*) FILTER (WHERE created_at > NOW() - INTERVAL '7 days') as recent_week,
  COUNT(*) FILTER (WHERE parse_confidence >= 80) as high_quality,
  ROUND(AVG(parse_confidence)) as avg_confidence,
  COUNT(*) FILTER (WHERE source = 'apollo') as external_candidates,
  COUNT(*) FILTER (WHERE authenticity_score >= 75) as high_authenticity,
  COUNT(*) FILTER (WHERE authenticity_score < 50 AND authenticity_score IS NOT NULL) as suspicious
FROM candidates
WHERE deleted_at IS NULL;

-- ============================================
-- SECURITY & PERMISSIONS
-- ============================================
-- Create read-only role
DO $$
BEGIN
  IF NOT EXISTS (SELECT 1 FROM pg_roles WHERE rolname = 'readonly_user') THEN
    CREATE ROLE readonly_user;
  END IF;
END
$$;

GRANT CONNECT ON DATABASE postgres TO readonly_user;
GRANT USAGE ON SCHEMA public TO readonly_user;
GRANT SELECT ON ALL TABLES IN SCHEMA public TO readonly_user;
ALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT SELECT ON TABLES TO readonly_user;

-- ============================================
-- DATA INTEGRITY
-- ============================================
-- Add constraints for data validation
ALTER TABLE candidates ADD CONSTRAINT check_skills_count 
  CHECK (array_length(skills, 1) IS NULL OR array_length(skills, 1) <= 100);

ALTER TABLE jobs ADD CONSTRAINT check_required_skills 
  CHECK (array_length(required_skills, 1) IS NULL OR array_length(required_skills, 1) <= 50);

-- ============================================
-- MIGRATION HELPER
-- ============================================
-- Function to migrate data from old schema to new schema
CREATE OR REPLACE FUNCTION migrate_schema()
RETURNS void AS $$
BEGIN
  -- Example migration step
  ALTER TABLE IF EXISTS candidates 
  ADD COLUMN IF NOT EXISTS authenticity_score INTEGER DEFAULT 0;
END;
$$ LANGUAGE plpgsql;
-----------------------------

File: public/logo.svg
Content:
<svg width="200" height="60" viewBox="0 0 200 60" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="200" height="60" rx="12" fill="linear-gradient(135deg, #667eea 0%, #764ba2 100%)" />
  
  <!-- T Icon -->
  <text x="20" y="42" font-family="Inter, sans-serif" font-size="32" font-weight="800" fill="white" letter-spacing="-0.5">T</text>
  
  <!-- Plus Icon -->
  <g transform="translate(55, 25)">
    <circle cx="0" cy="0" r="12" fill="white" opacity="0.9"/>
    <text x="-6" y="6" font-family="Inter, sans-serif" font-size="20" font-weight="900" fill="#667eea" text-anchor="middle">+</text>
  </g>
  
  <!-- TalentPlus Text -->
  <text x="85" y="38" font-family="Inter, sans-serif" font-size="18" font-weight="700" fill="white" letter-spacing="-0.3">alent</text>
  <text x="85" y="42" font-family="Inter, sans-serif" font-size="24" font-weight="900" fill="white">T</text>
  <text x="105" y="38" font-family="Inter, sans-serif" font-size="18" font-weight="700" fill="white" letter-spacing="-0.3">Plus</text>
  
  <!-- Tagline -->
  <text x="20" y="55" font-family="Inter, sans-serif" font-size="10" fill="rgba(255,255,255,0.8)" letter-spacing="0.5">AI Resume Matcher</text>
</svg>
-----------------------------

